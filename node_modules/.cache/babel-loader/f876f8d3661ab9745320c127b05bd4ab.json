{"ast":null,"code":"import React, { forwardRef, useEffect, useImperativeHandle, useMemo, useRef, useState } from 'react';\nimport { withNativeProps } from '../../utils/native-props';\nimport { mergeProps } from '../../utils/with-default-props';\nimport classNames from 'classnames';\nimport { SwiperItem } from './swiper-item';\nimport { devWarning } from '../../utils/dev-log';\nimport { useSpring, animated } from '@react-spring/web';\nimport { useDrag } from '@use-gesture/react';\nimport PageIndicator from '../page-indicator';\nimport { staged } from 'staged-components';\nimport { useRefState } from '../../utils/use-ref-state';\nimport { bound } from '../../utils/bound';\nvar defaultProps = {\n  defaultIndex: 0,\n  allowTouchMove: true,\n  autoplay: false,\n  autoplayInterval: 3000,\n  loop: true,\n  direction: 'horizontal'\n};\nexport var Swiper = /*#__PURE__*/forwardRef(staged(function (p, ref) {\n  var props = mergeProps(defaultProps, p);\n  var isVertical = props.direction === 'vertical';\n\n  var _useMemo = useMemo(function () {\n    var count = 0;\n    var validChildren = React.Children.map(props.children, function (child) {\n      if (! /*#__PURE__*/React.isValidElement(child)) return null;\n\n      if (child.type !== SwiperItem) {\n        devWarning('Swiper', 'The children of `Swiper` must be `Swiper.Item` components.');\n        return null;\n      }\n\n      count++;\n      return child;\n    });\n    return {\n      validChildren: validChildren,\n      count: count\n    };\n  }, [props.children]),\n      validChildren = _useMemo.validChildren,\n      count = _useMemo.count;\n\n  if (count === 0) {\n    devWarning('Swiper', '`Swiper` needs at least one child.');\n    return null;\n  }\n\n  return function () {\n    var loop = props.loop;\n\n    if (count === 1 && loop) {\n      devWarning('Swiper', '`Swiper` needs at least two children to enable loop.');\n      loop = false;\n    }\n\n    var trackRef = useRef(null);\n\n    function getSize() {\n      var track = trackRef.current;\n      if (!track) return 0;\n      return isVertical ? track.offsetHeight : track.offsetWidth;\n    }\n\n    var _useState = useState(props.defaultIndex),\n        current = _useState[0],\n        setCurrent = _useState[1];\n\n    var _useRefState = useRefState(false),\n        dragging = _useRefState[0],\n        setDragging = _useRefState[1],\n        draggingRef = _useRefState[2];\n\n    var _useSpring = useSpring(function () {\n      return {\n        position: bound(current, 0, count - 1) * 100,\n        config: {\n          tension: 200,\n          friction: 30\n        },\n        onRest: function onRest() {\n          if (draggingRef.current) return;\n          var rawX = position.get();\n          var totalWidth = 100 * count;\n          var standardPosition = modulus(rawX, totalWidth);\n          if (standardPosition === rawX) return;\n          api.start({\n            position: standardPosition,\n            immediate: true\n          });\n        }\n      };\n    }, [count]),\n        position = _useSpring[0].position,\n        api = _useSpring[1];\n\n    var bind = useDrag(function (state) {\n      var size = getSize();\n      if (!size) return;\n      var paramIndex = isVertical ? 1 : 0;\n      var offset = state.offset[paramIndex];\n      var direction = state.direction[paramIndex];\n      var velocity = state.velocity[paramIndex];\n      setDragging(true);\n\n      if (!state.last) {\n        api.start({\n          position: offset * 100 / size,\n          immediate: true\n        });\n      } else {\n        var index = Math.round((offset + Math.min(velocity * 2000, size) * direction) / size);\n        swipeTo(index);\n        window.setTimeout(function () {\n          setDragging(false);\n        });\n      }\n    }, {\n      transform: function transform(_ref) {\n        var x = _ref[0],\n            y = _ref[1];\n        return [-x, -y];\n      },\n      from: function from() {\n        var size = getSize();\n        return [position.get() / 100 * size, position.get() / 100 * size];\n      },\n      bounds: function bounds() {\n        if (loop) return {};\n        var size = getSize();\n        return isVertical ? {\n          top: 0,\n          bottom: (count - 1) * size\n        } : {\n          left: 0,\n          right: (count - 1) * size\n        };\n      },\n      rubberband: true,\n      axis: isVertical ? 'y' : 'x',\n      preventScroll: !isVertical,\n      pointer: {\n        touch: true\n      }\n    });\n\n    function swipeTo(index) {\n      var _a, _b;\n\n      if (loop) {\n        var i = modulus(index, count);\n        setCurrent(i);\n        (_a = props.onIndexChange) === null || _a === void 0 ? void 0 : _a.call(props, i);\n        api.start({\n          position: index * 100\n        });\n      } else {\n        var _i = bound(index, 0, count - 1);\n\n        setCurrent(_i);\n        (_b = props.onIndexChange) === null || _b === void 0 ? void 0 : _b.call(props, _i);\n        api.start({\n          position: _i * 100\n        });\n      }\n    }\n\n    function swipeNext() {\n      swipeTo(Math.round(position.get() / 100) + 1);\n    }\n\n    function swipePrev() {\n      swipeTo(Math.round(position.get() / 100) - 1);\n    }\n\n    useImperativeHandle(ref, function () {\n      return {\n        swipeTo: swipeTo,\n        swipeNext: swipeNext,\n        swipePrev: swipePrev\n      };\n    });\n    var autoplay = props.autoplay,\n        autoplayInterval = props.autoplayInterval;\n    useEffect(function () {\n      if (!autoplay || dragging) return;\n      var interval = window.setInterval(function () {\n        swipeNext();\n      }, autoplayInterval);\n      return function () {\n        window.clearInterval(interval);\n      };\n    }, [autoplay, autoplayInterval, dragging]);\n    return withNativeProps(props, /*#__PURE__*/React.createElement(\"div\", {\n      className: classNames('adm-swiper', \"adm-swiper-\" + props.direction)\n    }, /*#__PURE__*/React.createElement(\"div\", Object.assign({\n      className: classNames('adm-swiper-track', {\n        'adm-swiper-track-allow-touch-move': props.allowTouchMove\n      }),\n      onClickCapture: function onClickCapture(e) {\n        if (draggingRef.current) {\n          e.stopPropagation();\n        }\n      }\n    }, props.allowTouchMove ? bind() : {}), /*#__PURE__*/React.createElement(\"div\", {\n      className: 'adm-swiper-track-inner',\n      ref: trackRef\n    }, React.Children.map(validChildren, function (child, index) {\n      var _style;\n\n      return /*#__PURE__*/React.createElement(animated.div, {\n        className: 'adm-swiper-slide',\n        style: (_style = {}, _style[isVertical ? 'y' : 'x'] = position.to(function (position) {\n          var finalPosition = -position + index * 100;\n\n          if (loop) {\n            var totalWidth = count * 100;\n            var flagWidth = totalWidth / 2 - 10;\n            finalPosition = modulus(finalPosition + flagWidth, totalWidth) - flagWidth;\n          }\n\n          return finalPosition + \"%\";\n        }), _style.left = \"-\" + index * 100 + \"%\", _style)\n      }, child);\n    }))), props.indicator === undefined ? /*#__PURE__*/React.createElement(\"div\", {\n      className: 'adm-swiper-indicator'\n    }, /*#__PURE__*/React.createElement(PageIndicator, Object.assign({}, props.indicatorProps, {\n      total: count,\n      current: current,\n      direction: props.direction\n    }))) : props.indicator(count, current)));\n  };\n}));\n\nfunction modulus(value, division) {\n  var remainder = value % division;\n  return remainder < 0 ? remainder + division : remainder;\n}","map":{"version":3,"sources":["/Users/brandonliu/Project/goairmart/antd-demo/node_modules/antd-mobile/es/components/swiper/swiper.js"],"names":["React","forwardRef","useEffect","useImperativeHandle","useMemo","useRef","useState","withNativeProps","mergeProps","classNames","SwiperItem","devWarning","useSpring","animated","useDrag","PageIndicator","staged","useRefState","bound","defaultProps","defaultIndex","allowTouchMove","autoplay","autoplayInterval","loop","direction","Swiper","p","ref","props","isVertical","_useMemo","count","validChildren","Children","map","children","child","isValidElement","type","trackRef","getSize","track","current","offsetHeight","offsetWidth","_useState","setCurrent","_useRefState","dragging","setDragging","draggingRef","_useSpring","position","config","tension","friction","onRest","rawX","get","totalWidth","standardPosition","modulus","api","start","immediate","bind","state","size","paramIndex","offset","velocity","last","index","Math","round","min","swipeTo","window","setTimeout","transform","_ref","x","y","from","bounds","top","bottom","left","right","rubberband","axis","preventScroll","pointer","touch","_a","_b","i","onIndexChange","call","_i","swipeNext","swipePrev","interval","setInterval","clearInterval","createElement","className","Object","assign","onClickCapture","e","stopPropagation","_style","div","style","to","finalPosition","flagWidth","indicator","undefined","indicatorProps","total","value","division","remainder"],"mappings":"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","sourcesContent":["import React, { forwardRef, useEffect, useImperativeHandle, useMemo, useRef, useState } from 'react';\nimport { withNativeProps } from '../../utils/native-props';\nimport { mergeProps } from '../../utils/with-default-props';\nimport classNames from 'classnames';\nimport { SwiperItem } from './swiper-item';\nimport { devWarning } from '../../utils/dev-log';\nimport { useSpring, animated } from '@react-spring/web';\nimport { useDrag } from '@use-gesture/react';\nimport PageIndicator from '../page-indicator';\nimport { staged } from 'staged-components';\nimport { useRefState } from '../../utils/use-ref-state';\nimport { bound } from '../../utils/bound';\nvar defaultProps = {\n  defaultIndex: 0,\n  allowTouchMove: true,\n  autoplay: false,\n  autoplayInterval: 3000,\n  loop: true,\n  direction: 'horizontal'\n};\nexport var Swiper = /*#__PURE__*/forwardRef(staged(function (p, ref) {\n  var props = mergeProps(defaultProps, p);\n  var isVertical = props.direction === 'vertical';\n\n  var _useMemo = useMemo(function () {\n    var count = 0;\n    var validChildren = React.Children.map(props.children, function (child) {\n      if (! /*#__PURE__*/React.isValidElement(child)) return null;\n\n      if (child.type !== SwiperItem) {\n        devWarning('Swiper', 'The children of `Swiper` must be `Swiper.Item` components.');\n        return null;\n      }\n\n      count++;\n      return child;\n    });\n    return {\n      validChildren: validChildren,\n      count: count\n    };\n  }, [props.children]),\n      validChildren = _useMemo.validChildren,\n      count = _useMemo.count;\n\n  if (count === 0) {\n    devWarning('Swiper', '`Swiper` needs at least one child.');\n    return null;\n  }\n\n  return function () {\n    var loop = props.loop;\n\n    if (count === 1 && loop) {\n      devWarning('Swiper', '`Swiper` needs at least two children to enable loop.');\n      loop = false;\n    }\n\n    var trackRef = useRef(null);\n\n    function getSize() {\n      var track = trackRef.current;\n      if (!track) return 0;\n      return isVertical ? track.offsetHeight : track.offsetWidth;\n    }\n\n    var _useState = useState(props.defaultIndex),\n        current = _useState[0],\n        setCurrent = _useState[1];\n\n    var _useRefState = useRefState(false),\n        dragging = _useRefState[0],\n        setDragging = _useRefState[1],\n        draggingRef = _useRefState[2];\n\n    var _useSpring = useSpring(function () {\n      return {\n        position: bound(current, 0, count - 1) * 100,\n        config: {\n          tension: 200,\n          friction: 30\n        },\n        onRest: function onRest() {\n          if (draggingRef.current) return;\n          var rawX = position.get();\n          var totalWidth = 100 * count;\n          var standardPosition = modulus(rawX, totalWidth);\n          if (standardPosition === rawX) return;\n          api.start({\n            position: standardPosition,\n            immediate: true\n          });\n        }\n      };\n    }, [count]),\n        position = _useSpring[0].position,\n        api = _useSpring[1];\n\n    var bind = useDrag(function (state) {\n      var size = getSize();\n      if (!size) return;\n      var paramIndex = isVertical ? 1 : 0;\n      var offset = state.offset[paramIndex];\n      var direction = state.direction[paramIndex];\n      var velocity = state.velocity[paramIndex];\n      setDragging(true);\n\n      if (!state.last) {\n        api.start({\n          position: offset * 100 / size,\n          immediate: true\n        });\n      } else {\n        var index = Math.round((offset + Math.min(velocity * 2000, size) * direction) / size);\n        swipeTo(index);\n        window.setTimeout(function () {\n          setDragging(false);\n        });\n      }\n    }, {\n      transform: function transform(_ref) {\n        var x = _ref[0],\n            y = _ref[1];\n        return [-x, -y];\n      },\n      from: function from() {\n        var size = getSize();\n        return [position.get() / 100 * size, position.get() / 100 * size];\n      },\n      bounds: function bounds() {\n        if (loop) return {};\n        var size = getSize();\n        return isVertical ? {\n          top: 0,\n          bottom: (count - 1) * size\n        } : {\n          left: 0,\n          right: (count - 1) * size\n        };\n      },\n      rubberband: true,\n      axis: isVertical ? 'y' : 'x',\n      preventScroll: !isVertical,\n      pointer: {\n        touch: true\n      }\n    });\n\n    function swipeTo(index) {\n      var _a, _b;\n\n      if (loop) {\n        var i = modulus(index, count);\n        setCurrent(i);\n        (_a = props.onIndexChange) === null || _a === void 0 ? void 0 : _a.call(props, i);\n        api.start({\n          position: index * 100\n        });\n      } else {\n        var _i = bound(index, 0, count - 1);\n\n        setCurrent(_i);\n        (_b = props.onIndexChange) === null || _b === void 0 ? void 0 : _b.call(props, _i);\n        api.start({\n          position: _i * 100\n        });\n      }\n    }\n\n    function swipeNext() {\n      swipeTo(Math.round(position.get() / 100) + 1);\n    }\n\n    function swipePrev() {\n      swipeTo(Math.round(position.get() / 100) - 1);\n    }\n\n    useImperativeHandle(ref, function () {\n      return {\n        swipeTo: swipeTo,\n        swipeNext: swipeNext,\n        swipePrev: swipePrev\n      };\n    });\n    var autoplay = props.autoplay,\n        autoplayInterval = props.autoplayInterval;\n    useEffect(function () {\n      if (!autoplay || dragging) return;\n      var interval = window.setInterval(function () {\n        swipeNext();\n      }, autoplayInterval);\n      return function () {\n        window.clearInterval(interval);\n      };\n    }, [autoplay, autoplayInterval, dragging]);\n    return withNativeProps(props, /*#__PURE__*/React.createElement(\"div\", {\n      className: classNames('adm-swiper', \"adm-swiper-\" + props.direction)\n    }, /*#__PURE__*/React.createElement(\"div\", Object.assign({\n      className: classNames('adm-swiper-track', {\n        'adm-swiper-track-allow-touch-move': props.allowTouchMove\n      }),\n      onClickCapture: function onClickCapture(e) {\n        if (draggingRef.current) {\n          e.stopPropagation();\n        }\n      }\n    }, props.allowTouchMove ? bind() : {}), /*#__PURE__*/React.createElement(\"div\", {\n      className: 'adm-swiper-track-inner',\n      ref: trackRef\n    }, React.Children.map(validChildren, function (child, index) {\n      var _style;\n\n      return /*#__PURE__*/React.createElement(animated.div, {\n        className: 'adm-swiper-slide',\n        style: (_style = {}, _style[isVertical ? 'y' : 'x'] = position.to(function (position) {\n          var finalPosition = -position + index * 100;\n\n          if (loop) {\n            var totalWidth = count * 100;\n            var flagWidth = totalWidth / 2 - 10;\n            finalPosition = modulus(finalPosition + flagWidth, totalWidth) - flagWidth;\n          }\n\n          return finalPosition + \"%\";\n        }), _style.left = \"-\" + index * 100 + \"%\", _style)\n      }, child);\n    }))), props.indicator === undefined ? /*#__PURE__*/React.createElement(\"div\", {\n      className: 'adm-swiper-indicator'\n    }, /*#__PURE__*/React.createElement(PageIndicator, Object.assign({}, props.indicatorProps, {\n      total: count,\n      current: current,\n      direction: props.direction\n    }))) : props.indicator(count, current)));\n  };\n}));\n\nfunction modulus(value, division) {\n  var remainder = value % division;\n  return remainder < 0 ? remainder + division : remainder;\n}"]},"metadata":{},"sourceType":"module"}