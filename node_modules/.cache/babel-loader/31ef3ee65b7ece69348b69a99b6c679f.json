{"ast":null,"code":"import React, { useRef, useState } from 'react';\nimport { mergeProps } from '../../utils/with-default-props';\nimport { withNativeProps } from '../../utils/native-props';\nimport { useResizeEffect } from '../../utils/use-resize-effect';\nvar classPrefix = \"adm-ellipsis\";\nvar defaultProps = {\n  direction: 'end',\n  rows: 1,\n  expandText: '',\n  collapseText: ''\n};\nexport var Ellipsis = function Ellipsis(p) {\n  var props = mergeProps(defaultProps, p);\n  var rootRef = useRef(null);\n\n  var _useState = useState({}),\n      ellipsised = _useState[0],\n      setEllipsised = _useState[1];\n\n  var _useState2 = useState(false),\n      expanded = _useState2[0],\n      setExpanded = _useState2[1];\n\n  var _useState3 = useState(false),\n      exceeded = _useState3[0],\n      setExceeded = _useState3[1];\n\n  useResizeEffect(function () {\n    var root = rootRef.current;\n    if (!root) return;\n    var originStyle = window.getComputedStyle(root);\n    var container = document.createElement('div');\n    var styleNames = Array.prototype.slice.apply(originStyle);\n    styleNames.forEach(function (name) {\n      container.style.setProperty(name, originStyle.getPropertyValue(name));\n    });\n    container.style.position = 'fixed';\n    container.style.left = '999999px';\n    container.style.top = '999999px';\n    container.style.zIndex = '-1000';\n    container.style.height = 'auto';\n    container.style.minHeight = 'auto';\n    container.style.maxHeight = 'auto';\n    container.style.textOverflow = 'clip';\n    container.style.whiteSpace = 'normal';\n    container.style.webkitLineClamp = 'unset';\n    container.style.webkitBoxOrient = 'unset';\n    container.style.display = 'block';\n    var lineHeight = pxToNumber(originStyle.lineHeight);\n    var maxHeight = Math.floor(lineHeight * props.rows + pxToNumber(originStyle.paddingTop) + pxToNumber(originStyle.paddingBottom));\n    container.innerText = props.content;\n    document.body.appendChild(container);\n\n    if (container.offsetHeight <= maxHeight) {\n      setExceeded(false);\n    } else {\n      var check = function check(left, right) {\n        if (right - left <= 1) {\n          if (props.direction === 'end') {\n            return {\n              leading: props.content.slice(0, left) + '...'\n            };\n          } else {\n            return {\n              tailing: '...' + props.content.slice(right, end)\n            };\n          }\n        }\n\n        var middle = Math.round((left + right) / 2);\n\n        if (props.direction === 'end') {\n          container.innerText = props.content.slice(0, middle) + '...' + actionText;\n        } else {\n          container.innerText = actionText + '...' + props.content.slice(middle, end);\n        }\n\n        if (container.offsetHeight <= maxHeight) {\n          if (props.direction === 'end') {\n            return check(middle, right);\n          } else {\n            return check(left, middle);\n          }\n        } else {\n          if (props.direction === 'end') {\n            return check(left, middle);\n          } else {\n            return check(middle, right);\n          }\n        }\n      };\n\n      var checkMiddle = function checkMiddle(leftPart, rightPart) {\n        if (leftPart[1] - leftPart[0] <= 1 && rightPart[1] - rightPart[0] <= 1) {\n          return {\n            leading: props.content.slice(0, leftPart[0]) + '...',\n            tailing: '...' + props.content.slice(rightPart[1], end)\n          };\n        }\n\n        var leftPartMiddle = Math.floor((leftPart[0] + leftPart[1]) / 2);\n        var rightPartMiddle = Math.floor((rightPart[0] + rightPart[1]) / 2);\n        container.innerText = props.content.slice(0, leftPartMiddle) + '...' + actionText + '...' + props.content.slice(rightPartMiddle, end);\n\n        if (container.offsetHeight <= maxHeight) {\n          return checkMiddle([leftPartMiddle, leftPart[1]], [rightPart[0], rightPartMiddle]);\n        } else {\n          return checkMiddle([leftPart[0], leftPartMiddle], [rightPartMiddle, rightPart[1]]);\n        }\n      };\n\n      setExceeded(true);\n      var end = props.content.length;\n      var actionText = expanded ? props.collapseText : props.expandText;\n      var middle = Math.floor((0 + end) / 2);\n\n      var _ellipsised = props.direction === 'middle' ? checkMiddle([0, middle], [middle, end]) : check(0, end);\n\n      setEllipsised(_ellipsised);\n    }\n\n    document.body.removeChild(container);\n  }, rootRef);\n  var expandActionElement = exceeded && props.expandText ? /*#__PURE__*/React.createElement(\"a\", {\n    onClick: function onClick() {\n      setExpanded(true);\n    }\n  }, props.expandText) : null;\n  var collapseActionElement = exceeded && props.expandText ? /*#__PURE__*/React.createElement(\"a\", {\n    onClick: function onClick() {\n      setExpanded(false);\n    }\n  }, props.collapseText) : null;\n\n  var renderContent = function renderContent() {\n    if (!exceeded) {\n      return props.content;\n    }\n\n    if (expanded) {\n      return /*#__PURE__*/React.createElement(React.Fragment, null, props.content, collapseActionElement);\n    } else {\n      return /*#__PURE__*/React.createElement(React.Fragment, null, ellipsised.leading, expandActionElement, ellipsised.tailing);\n    }\n  };\n\n  return withNativeProps(props, /*#__PURE__*/React.createElement(\"div\", {\n    ref: rootRef,\n    className: classPrefix\n  }, renderContent()));\n};\n\nfunction pxToNumber(value) {\n  if (!value) return 0;\n  var match = value.match(/^\\d*(\\.\\d*)?/);\n  return match ? Number(match[0]) : 0;\n}","map":{"version":3,"sources":["/Users/brandonliu/Project/goairmart/antd-demo/node_modules/antd-mobile/es/components/ellipsis/ellipsis.js"],"names":["React","useRef","useState","mergeProps","withNativeProps","useResizeEffect","classPrefix","defaultProps","direction","rows","expandText","collapseText","Ellipsis","p","props","rootRef","_useState","ellipsised","setEllipsised","_useState2","expanded","setExpanded","_useState3","exceeded","setExceeded","root","current","originStyle","window","getComputedStyle","container","document","createElement","styleNames","Array","prototype","slice","apply","forEach","name","style","setProperty","getPropertyValue","position","left","top","zIndex","height","minHeight","maxHeight","textOverflow","whiteSpace","webkitLineClamp","webkitBoxOrient","display","lineHeight","pxToNumber","Math","floor","paddingTop","paddingBottom","innerText","content","body","appendChild","offsetHeight","check","right","leading","tailing","end","middle","round","actionText","checkMiddle","leftPart","rightPart","leftPartMiddle","rightPartMiddle","length","_ellipsised","removeChild","expandActionElement","onClick","collapseActionElement","renderContent","Fragment","ref","className","value","match","Number"],"mappings":"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","sourcesContent":["import React, { useRef, useState } from 'react';\nimport { mergeProps } from '../../utils/with-default-props';\nimport { withNativeProps } from '../../utils/native-props';\nimport { useResizeEffect } from '../../utils/use-resize-effect';\nvar classPrefix = \"adm-ellipsis\";\nvar defaultProps = {\n  direction: 'end',\n  rows: 1,\n  expandText: '',\n  collapseText: ''\n};\nexport var Ellipsis = function Ellipsis(p) {\n  var props = mergeProps(defaultProps, p);\n  var rootRef = useRef(null);\n\n  var _useState = useState({}),\n      ellipsised = _useState[0],\n      setEllipsised = _useState[1];\n\n  var _useState2 = useState(false),\n      expanded = _useState2[0],\n      setExpanded = _useState2[1];\n\n  var _useState3 = useState(false),\n      exceeded = _useState3[0],\n      setExceeded = _useState3[1];\n\n  useResizeEffect(function () {\n    var root = rootRef.current;\n    if (!root) return;\n    var originStyle = window.getComputedStyle(root);\n    var container = document.createElement('div');\n    var styleNames = Array.prototype.slice.apply(originStyle);\n    styleNames.forEach(function (name) {\n      container.style.setProperty(name, originStyle.getPropertyValue(name));\n    });\n    container.style.position = 'fixed';\n    container.style.left = '999999px';\n    container.style.top = '999999px';\n    container.style.zIndex = '-1000';\n    container.style.height = 'auto';\n    container.style.minHeight = 'auto';\n    container.style.maxHeight = 'auto';\n    container.style.textOverflow = 'clip';\n    container.style.whiteSpace = 'normal';\n    container.style.webkitLineClamp = 'unset';\n    container.style.webkitBoxOrient = 'unset';\n    container.style.display = 'block';\n    var lineHeight = pxToNumber(originStyle.lineHeight);\n    var maxHeight = Math.floor(lineHeight * props.rows + pxToNumber(originStyle.paddingTop) + pxToNumber(originStyle.paddingBottom));\n    container.innerText = props.content;\n    document.body.appendChild(container);\n\n    if (container.offsetHeight <= maxHeight) {\n      setExceeded(false);\n    } else {\n      var check = function check(left, right) {\n        if (right - left <= 1) {\n          if (props.direction === 'end') {\n            return {\n              leading: props.content.slice(0, left) + '...'\n            };\n          } else {\n            return {\n              tailing: '...' + props.content.slice(right, end)\n            };\n          }\n        }\n\n        var middle = Math.round((left + right) / 2);\n\n        if (props.direction === 'end') {\n          container.innerText = props.content.slice(0, middle) + '...' + actionText;\n        } else {\n          container.innerText = actionText + '...' + props.content.slice(middle, end);\n        }\n\n        if (container.offsetHeight <= maxHeight) {\n          if (props.direction === 'end') {\n            return check(middle, right);\n          } else {\n            return check(left, middle);\n          }\n        } else {\n          if (props.direction === 'end') {\n            return check(left, middle);\n          } else {\n            return check(middle, right);\n          }\n        }\n      };\n\n      var checkMiddle = function checkMiddle(leftPart, rightPart) {\n        if (leftPart[1] - leftPart[0] <= 1 && rightPart[1] - rightPart[0] <= 1) {\n          return {\n            leading: props.content.slice(0, leftPart[0]) + '...',\n            tailing: '...' + props.content.slice(rightPart[1], end)\n          };\n        }\n\n        var leftPartMiddle = Math.floor((leftPart[0] + leftPart[1]) / 2);\n        var rightPartMiddle = Math.floor((rightPart[0] + rightPart[1]) / 2);\n        container.innerText = props.content.slice(0, leftPartMiddle) + '...' + actionText + '...' + props.content.slice(rightPartMiddle, end);\n\n        if (container.offsetHeight <= maxHeight) {\n          return checkMiddle([leftPartMiddle, leftPart[1]], [rightPart[0], rightPartMiddle]);\n        } else {\n          return checkMiddle([leftPart[0], leftPartMiddle], [rightPartMiddle, rightPart[1]]);\n        }\n      };\n\n      setExceeded(true);\n      var end = props.content.length;\n      var actionText = expanded ? props.collapseText : props.expandText;\n      var middle = Math.floor((0 + end) / 2);\n\n      var _ellipsised = props.direction === 'middle' ? checkMiddle([0, middle], [middle, end]) : check(0, end);\n\n      setEllipsised(_ellipsised);\n    }\n\n    document.body.removeChild(container);\n  }, rootRef);\n  var expandActionElement = exceeded && props.expandText ? /*#__PURE__*/React.createElement(\"a\", {\n    onClick: function onClick() {\n      setExpanded(true);\n    }\n  }, props.expandText) : null;\n  var collapseActionElement = exceeded && props.expandText ? /*#__PURE__*/React.createElement(\"a\", {\n    onClick: function onClick() {\n      setExpanded(false);\n    }\n  }, props.collapseText) : null;\n\n  var renderContent = function renderContent() {\n    if (!exceeded) {\n      return props.content;\n    }\n\n    if (expanded) {\n      return /*#__PURE__*/React.createElement(React.Fragment, null, props.content, collapseActionElement);\n    } else {\n      return /*#__PURE__*/React.createElement(React.Fragment, null, ellipsised.leading, expandActionElement, ellipsised.tailing);\n    }\n  };\n\n  return withNativeProps(props, /*#__PURE__*/React.createElement(\"div\", {\n    ref: rootRef,\n    className: classPrefix\n  }, renderContent()));\n};\n\nfunction pxToNumber(value) {\n  if (!value) return 0;\n  var match = value.match(/^\\d*(\\.\\d*)?/);\n  return match ? Number(match[0]) : 0;\n}"]},"metadata":{},"sourceType":"module"}