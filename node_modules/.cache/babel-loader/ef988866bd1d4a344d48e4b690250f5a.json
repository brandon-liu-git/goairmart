{"ast":null,"code":"import React, { useRef, useLayoutEffect } from 'react';\nimport classNames from 'classnames';\nimport { useSpring, animated } from '@react-spring/web';\nimport { withNativeProps } from '../../utils/native-props';\nimport { usePropsValue } from '../../utils/use-props-value';\nimport { bound } from '../../utils/bound';\nimport { useUpdateLayoutEffect, useThrottleFn } from 'ahooks';\nimport { useMutationEffect } from '../../utils/use-mutation-effect';\nimport { useResizeEffect } from '../../utils/use-resize-effect';\nimport { mergeProps } from '../../utils/with-default-props';\nvar classPrefix = \"adm-tabs\";\nexport var TabPane = function TabPane() {\n  return null;\n};\nvar defaultProps = {\n  activeLineMode: 'auto'\n};\nexport var Tabs = function Tabs(p) {\n  var _a;\n\n  var props = mergeProps(defaultProps, p);\n  var tabListContainerRef = useRef(null);\n  var rootRef = useRef(null);\n  var activeLineRef = useRef(null);\n  var keyToIndexRecord = {};\n  var firstActiveKey = null;\n  var panes = [];\n  React.Children.forEach(props.children, function (child, index) {\n    if (! /*#__PURE__*/React.isValidElement(child)) return;\n    var key = child.key;\n    if (typeof key !== 'string') return;\n\n    if (index === 0) {\n      firstActiveKey = key;\n    }\n\n    var length = panes.push(child);\n    keyToIndexRecord[key] = length - 1;\n  });\n\n  var _usePropsValue = usePropsValue({\n    value: props.activeKey,\n    defaultValue: (_a = props.defaultActiveKey) !== null && _a !== void 0 ? _a : firstActiveKey,\n    onChange: props.onChange\n  }),\n      activeKey = _usePropsValue[0],\n      setActiveKey = _usePropsValue[1];\n\n  var _useSpring = useSpring(function () {\n    return {\n      x: 0,\n      width: 0,\n      config: {\n        tension: 300,\n        clamp: true\n      }\n    };\n  }),\n      _useSpring$ = _useSpring[0],\n      x = _useSpring$.x,\n      width = _useSpring$.width,\n      api = _useSpring[1];\n\n  var _useSpring2 = useSpring(function () {\n    return {\n      scrollLeft: 0,\n      config: {\n        tension: 300,\n        clamp: true\n      }\n    };\n  }),\n      scrollLeft = _useSpring2[0].scrollLeft,\n      scrollApi = _useSpring2[1];\n\n  var _useSpring3 = useSpring(function () {\n    return {\n      leftMaskOpacity: 0,\n      rightMaskOpacity: 0,\n      config: {\n        clamp: true\n      }\n    };\n  }),\n      _useSpring3$ = _useSpring3[0],\n      leftMaskOpacity = _useSpring3$.leftMaskOpacity,\n      rightMaskOpacity = _useSpring3$.rightMaskOpacity,\n      maskApi = _useSpring3[1];\n\n  function animate(immediate) {\n    if (immediate === void 0) {\n      immediate = false;\n    }\n\n    var container = tabListContainerRef.current;\n    if (!container) return;\n    var activeIndex = keyToIndexRecord[activeKey];\n\n    if (activeIndex === undefined) {\n      api.start({\n        x: 0,\n        width: 0,\n        immediate: true\n      });\n      return;\n    }\n\n    var activeLine = activeLineRef.current;\n    if (!activeLine) return;\n    var activeTabWrapper = container.children.item(activeIndex + 1);\n    var activeTab = activeTabWrapper.children.item(0);\n    var activeTabLeft = activeTab.offsetLeft;\n    var activeTabWidth = activeTab.offsetWidth;\n    var activeTabWrapperLeft = activeTabWrapper.offsetLeft;\n    var activeTabWrapperWidth = activeTabWrapper.offsetWidth;\n    var containerWidth = container.offsetWidth;\n    var containerScrollWidth = container.scrollWidth;\n    var containerScrollLeft = container.scrollLeft;\n    var activeLineWidth = activeLine.offsetWidth;\n    var x = 0;\n    var width = 0;\n\n    if (props.activeLineMode === 'auto') {\n      x = activeTabLeft;\n      width = activeTabWidth;\n    } else if (props.activeLineMode === 'full') {\n      x = activeTabWrapperLeft;\n      width = activeTabWrapperWidth;\n    } else {\n      x = activeTabLeft + (activeTabWidth - activeLineWidth) / 2;\n    }\n\n    api.start({\n      x: x,\n      width: width,\n      immediate: immediate\n    });\n    var maxScrollDistance = containerScrollWidth - containerWidth;\n    if (maxScrollDistance <= 0) return;\n    var nextScrollLeft = bound(activeTabLeft - (containerWidth - activeTabWidth) / 2, 0, containerScrollWidth - containerWidth);\n    scrollApi.start({\n      scrollLeft: nextScrollLeft,\n      from: {\n        scrollLeft: containerScrollLeft\n      },\n      immediate: immediate\n    });\n  }\n\n  useLayoutEffect(function () {\n    animate(true);\n  }, []);\n  useUpdateLayoutEffect(function () {\n    animate();\n  }, [activeKey]);\n  useResizeEffect(function () {\n    animate(true);\n  }, rootRef);\n  useMutationEffect(function () {\n    animate(true);\n  }, tabListContainerRef, {\n    subtree: true,\n    childList: true,\n    characterData: true\n  });\n\n  var _useThrottleFn = useThrottleFn(function (immediate) {\n    if (immediate === void 0) {\n      immediate = false;\n    }\n\n    var container = tabListContainerRef.current;\n    if (!container) return;\n    var scrollLeft = container.scrollLeft;\n    var showLeftMask = scrollLeft > 0;\n    var showRightMask = scrollLeft + container.offsetWidth < container.scrollWidth;\n    maskApi.start({\n      leftMaskOpacity: showLeftMask ? 1 : 0,\n      rightMaskOpacity: showRightMask ? 1 : 0,\n      immediate: immediate\n    });\n  }, {\n    wait: 100,\n    trailing: true,\n    leading: true\n  }),\n      updateMask = _useThrottleFn.run;\n\n  useLayoutEffect(function () {\n    updateMask(true);\n  }, []);\n  return withNativeProps(props, /*#__PURE__*/React.createElement(\"div\", {\n    className: classPrefix,\n    ref: rootRef\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classPrefix + \"-header\"\n  }, /*#__PURE__*/React.createElement(animated.div, {\n    className: classNames(classPrefix + \"-header-mask\", classPrefix + \"-header-mask-left\"),\n    style: {\n      opacity: leftMaskOpacity\n    }\n  }), /*#__PURE__*/React.createElement(animated.div, {\n    className: classNames(classPrefix + \"-header-mask\", classPrefix + \"-header-mask-right\"),\n    style: {\n      opacity: rightMaskOpacity\n    }\n  }), /*#__PURE__*/React.createElement(animated.div, {\n    className: classPrefix + \"-tab-list\",\n    ref: tabListContainerRef,\n    scrollLeft: scrollLeft,\n    onScroll: updateMask\n  }, /*#__PURE__*/React.createElement(animated.div, {\n    ref: activeLineRef,\n    className: classPrefix + \"-tab-line\",\n    style: {\n      width: props.activeLineMode === 'fixed' ? 'var(--fixed-active-line-width, 30px)' : width,\n      x: x\n    }\n  }), panes.map(function (pane) {\n    var _classNames;\n\n    return withNativeProps(pane.props, /*#__PURE__*/React.createElement(\"div\", {\n      key: pane.key,\n      className: classPrefix + \"-tab-wrapper\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      onClick: function onClick() {\n        var key = pane.key;\n        if (pane.props.disabled) return;\n\n        if (key === undefined || key === null) {\n          return;\n        }\n\n        setActiveKey(key.toString());\n      },\n      className: classNames(classPrefix + \"-tab\", (_classNames = {}, _classNames[classPrefix + \"-tab-active\"] = pane.key === activeKey, _classNames[classPrefix + \"-tab-disabled\"] = pane.props.disabled, _classNames))\n    }, pane.props.title)));\n  }))), panes.map(function (pane) {\n    if (pane.props.children === undefined) {\n      return null;\n    }\n\n    if (pane.key === activeKey) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        key: pane.key,\n        className: classPrefix + \"-content\"\n      }, pane.props.children);\n    }\n\n    if (pane.props.forceRender) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        key: pane.key,\n        style: {\n          display: 'none'\n        }\n      }, pane.props.children);\n    }\n\n    return null;\n  })));\n};","map":{"version":3,"sources":["/Users/brandonliu/Project/goairmart/antd-demo/node_modules/antd-mobile/es/components/tabs/tabs.js"],"names":["React","useRef","useLayoutEffect","classNames","useSpring","animated","withNativeProps","usePropsValue","bound","useUpdateLayoutEffect","useThrottleFn","useMutationEffect","useResizeEffect","mergeProps","classPrefix","TabPane","defaultProps","activeLineMode","Tabs","p","_a","props","tabListContainerRef","rootRef","activeLineRef","keyToIndexRecord","firstActiveKey","panes","Children","forEach","children","child","index","isValidElement","key","length","push","_usePropsValue","value","activeKey","defaultValue","defaultActiveKey","onChange","setActiveKey","_useSpring","x","width","config","tension","clamp","_useSpring$","api","_useSpring2","scrollLeft","scrollApi","_useSpring3","leftMaskOpacity","rightMaskOpacity","_useSpring3$","maskApi","animate","immediate","container","current","activeIndex","undefined","start","activeLine","activeTabWrapper","item","activeTab","activeTabLeft","offsetLeft","activeTabWidth","offsetWidth","activeTabWrapperLeft","activeTabWrapperWidth","containerWidth","containerScrollWidth","scrollWidth","containerScrollLeft","activeLineWidth","maxScrollDistance","nextScrollLeft","from","subtree","childList","characterData","_useThrottleFn","showLeftMask","showRightMask","wait","trailing","leading","updateMask","run","createElement","className","ref","div","style","opacity","onScroll","map","pane","_classNames","onClick","disabled","toString","title","forceRender","display"],"mappings":"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","sourcesContent":["import React, { useRef, useLayoutEffect } from 'react';\nimport classNames from 'classnames';\nimport { useSpring, animated } from '@react-spring/web';\nimport { withNativeProps } from '../../utils/native-props';\nimport { usePropsValue } from '../../utils/use-props-value';\nimport { bound } from '../../utils/bound';\nimport { useUpdateLayoutEffect, useThrottleFn } from 'ahooks';\nimport { useMutationEffect } from '../../utils/use-mutation-effect';\nimport { useResizeEffect } from '../../utils/use-resize-effect';\nimport { mergeProps } from '../../utils/with-default-props';\nvar classPrefix = \"adm-tabs\";\nexport var TabPane = function TabPane() {\n  return null;\n};\nvar defaultProps = {\n  activeLineMode: 'auto'\n};\nexport var Tabs = function Tabs(p) {\n  var _a;\n\n  var props = mergeProps(defaultProps, p);\n  var tabListContainerRef = useRef(null);\n  var rootRef = useRef(null);\n  var activeLineRef = useRef(null);\n  var keyToIndexRecord = {};\n  var firstActiveKey = null;\n  var panes = [];\n  React.Children.forEach(props.children, function (child, index) {\n    if (! /*#__PURE__*/React.isValidElement(child)) return;\n    var key = child.key;\n    if (typeof key !== 'string') return;\n\n    if (index === 0) {\n      firstActiveKey = key;\n    }\n\n    var length = panes.push(child);\n    keyToIndexRecord[key] = length - 1;\n  });\n\n  var _usePropsValue = usePropsValue({\n    value: props.activeKey,\n    defaultValue: (_a = props.defaultActiveKey) !== null && _a !== void 0 ? _a : firstActiveKey,\n    onChange: props.onChange\n  }),\n      activeKey = _usePropsValue[0],\n      setActiveKey = _usePropsValue[1];\n\n  var _useSpring = useSpring(function () {\n    return {\n      x: 0,\n      width: 0,\n      config: {\n        tension: 300,\n        clamp: true\n      }\n    };\n  }),\n      _useSpring$ = _useSpring[0],\n      x = _useSpring$.x,\n      width = _useSpring$.width,\n      api = _useSpring[1];\n\n  var _useSpring2 = useSpring(function () {\n    return {\n      scrollLeft: 0,\n      config: {\n        tension: 300,\n        clamp: true\n      }\n    };\n  }),\n      scrollLeft = _useSpring2[0].scrollLeft,\n      scrollApi = _useSpring2[1];\n\n  var _useSpring3 = useSpring(function () {\n    return {\n      leftMaskOpacity: 0,\n      rightMaskOpacity: 0,\n      config: {\n        clamp: true\n      }\n    };\n  }),\n      _useSpring3$ = _useSpring3[0],\n      leftMaskOpacity = _useSpring3$.leftMaskOpacity,\n      rightMaskOpacity = _useSpring3$.rightMaskOpacity,\n      maskApi = _useSpring3[1];\n\n  function animate(immediate) {\n    if (immediate === void 0) {\n      immediate = false;\n    }\n\n    var container = tabListContainerRef.current;\n    if (!container) return;\n    var activeIndex = keyToIndexRecord[activeKey];\n\n    if (activeIndex === undefined) {\n      api.start({\n        x: 0,\n        width: 0,\n        immediate: true\n      });\n      return;\n    }\n\n    var activeLine = activeLineRef.current;\n    if (!activeLine) return;\n    var activeTabWrapper = container.children.item(activeIndex + 1);\n    var activeTab = activeTabWrapper.children.item(0);\n    var activeTabLeft = activeTab.offsetLeft;\n    var activeTabWidth = activeTab.offsetWidth;\n    var activeTabWrapperLeft = activeTabWrapper.offsetLeft;\n    var activeTabWrapperWidth = activeTabWrapper.offsetWidth;\n    var containerWidth = container.offsetWidth;\n    var containerScrollWidth = container.scrollWidth;\n    var containerScrollLeft = container.scrollLeft;\n    var activeLineWidth = activeLine.offsetWidth;\n    var x = 0;\n    var width = 0;\n\n    if (props.activeLineMode === 'auto') {\n      x = activeTabLeft;\n      width = activeTabWidth;\n    } else if (props.activeLineMode === 'full') {\n      x = activeTabWrapperLeft;\n      width = activeTabWrapperWidth;\n    } else {\n      x = activeTabLeft + (activeTabWidth - activeLineWidth) / 2;\n    }\n\n    api.start({\n      x: x,\n      width: width,\n      immediate: immediate\n    });\n    var maxScrollDistance = containerScrollWidth - containerWidth;\n    if (maxScrollDistance <= 0) return;\n    var nextScrollLeft = bound(activeTabLeft - (containerWidth - activeTabWidth) / 2, 0, containerScrollWidth - containerWidth);\n    scrollApi.start({\n      scrollLeft: nextScrollLeft,\n      from: {\n        scrollLeft: containerScrollLeft\n      },\n      immediate: immediate\n    });\n  }\n\n  useLayoutEffect(function () {\n    animate(true);\n  }, []);\n  useUpdateLayoutEffect(function () {\n    animate();\n  }, [activeKey]);\n  useResizeEffect(function () {\n    animate(true);\n  }, rootRef);\n  useMutationEffect(function () {\n    animate(true);\n  }, tabListContainerRef, {\n    subtree: true,\n    childList: true,\n    characterData: true\n  });\n\n  var _useThrottleFn = useThrottleFn(function (immediate) {\n    if (immediate === void 0) {\n      immediate = false;\n    }\n\n    var container = tabListContainerRef.current;\n    if (!container) return;\n    var scrollLeft = container.scrollLeft;\n    var showLeftMask = scrollLeft > 0;\n    var showRightMask = scrollLeft + container.offsetWidth < container.scrollWidth;\n    maskApi.start({\n      leftMaskOpacity: showLeftMask ? 1 : 0,\n      rightMaskOpacity: showRightMask ? 1 : 0,\n      immediate: immediate\n    });\n  }, {\n    wait: 100,\n    trailing: true,\n    leading: true\n  }),\n      updateMask = _useThrottleFn.run;\n\n  useLayoutEffect(function () {\n    updateMask(true);\n  }, []);\n  return withNativeProps(props, /*#__PURE__*/React.createElement(\"div\", {\n    className: classPrefix,\n    ref: rootRef\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classPrefix + \"-header\"\n  }, /*#__PURE__*/React.createElement(animated.div, {\n    className: classNames(classPrefix + \"-header-mask\", classPrefix + \"-header-mask-left\"),\n    style: {\n      opacity: leftMaskOpacity\n    }\n  }), /*#__PURE__*/React.createElement(animated.div, {\n    className: classNames(classPrefix + \"-header-mask\", classPrefix + \"-header-mask-right\"),\n    style: {\n      opacity: rightMaskOpacity\n    }\n  }), /*#__PURE__*/React.createElement(animated.div, {\n    className: classPrefix + \"-tab-list\",\n    ref: tabListContainerRef,\n    scrollLeft: scrollLeft,\n    onScroll: updateMask\n  }, /*#__PURE__*/React.createElement(animated.div, {\n    ref: activeLineRef,\n    className: classPrefix + \"-tab-line\",\n    style: {\n      width: props.activeLineMode === 'fixed' ? 'var(--fixed-active-line-width, 30px)' : width,\n      x: x\n    }\n  }), panes.map(function (pane) {\n    var _classNames;\n\n    return withNativeProps(pane.props, /*#__PURE__*/React.createElement(\"div\", {\n      key: pane.key,\n      className: classPrefix + \"-tab-wrapper\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      onClick: function onClick() {\n        var key = pane.key;\n        if (pane.props.disabled) return;\n\n        if (key === undefined || key === null) {\n          return;\n        }\n\n        setActiveKey(key.toString());\n      },\n      className: classNames(classPrefix + \"-tab\", (_classNames = {}, _classNames[classPrefix + \"-tab-active\"] = pane.key === activeKey, _classNames[classPrefix + \"-tab-disabled\"] = pane.props.disabled, _classNames))\n    }, pane.props.title)));\n  }))), panes.map(function (pane) {\n    if (pane.props.children === undefined) {\n      return null;\n    }\n\n    if (pane.key === activeKey) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        key: pane.key,\n        className: classPrefix + \"-content\"\n      }, pane.props.children);\n    }\n\n    if (pane.props.forceRender) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        key: pane.key,\n        style: {\n          display: 'none'\n        }\n      }, pane.props.children);\n    }\n\n    return null;\n  })));\n};"]},"metadata":{},"sourceType":"module"}