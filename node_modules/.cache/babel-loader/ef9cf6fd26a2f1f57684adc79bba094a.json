{"ast":null,"code":"var __read = this && this.__read || function (o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o),\n      r,\n      ar = [],\n      e;\n\n  try {\n    while ((n === void 0 || n-- > 0) && !(r = i.next()).done) {\n      ar.push(r.value);\n    }\n  } catch (error) {\n    e = {\n      error: error\n    };\n  } finally {\n    try {\n      if (r && !r.done && (m = i[\"return\"])) m.call(i);\n    } finally {\n      if (e) throw e.error;\n    }\n  }\n\n  return ar;\n};\n\nimport { useState, useRef, useEffect, useMemo } from 'react';\nimport { getTargetElement } from '../utils/dom';\nexport default function useExternal(path, options) {\n  var isPath = typeof path === 'string' && path !== '';\n\n  var _a = __read(useState(isPath ? 'loading' : 'unset'), 2),\n      status = _a[0],\n      setStatus = _a[1];\n\n  var _b = __read(useState(isPath), 2),\n      active = _b[0],\n      setActive = _b[1];\n\n  var ref = useRef();\n  useEffect(function () {\n    var _a;\n\n    (_a = ref.current) === null || _a === void 0 ? void 0 : _a.remove();\n\n    if (!isPath || !active) {\n      setStatus('unset');\n      ref.current = undefined;\n      return;\n    }\n\n    setStatus('loading'); // Create external element\n\n    var pathname = path.replace(/[|#].*$/, '');\n\n    if ((options === null || options === void 0 ? void 0 : options.type) === 'css' || /(^css!|\\.css$)/.test(pathname)) {\n      // css\n      ref.current = document.createElement('link');\n      ref.current.rel = 'stylesheet';\n      ref.current.href = path;\n      ref.current.media = (options === null || options === void 0 ? void 0 : options.media) || 'all'; // IE9+\n\n      var isLegacyIECss = ('hideFocus' in ref.current); // use preload in IE Edge (to detect load errors)\n\n      if (isLegacyIECss && ref.current.relList) {\n        ref.current.rel = 'preload';\n        ref.current.as = 'style';\n      }\n\n      ref.current.setAttribute('data-status', 'loading');\n      document.head.appendChild(ref.current);\n    } else if ((options === null || options === void 0 ? void 0 : options.type) === 'js' || /(^js!|\\.js$)/.test(pathname)) {\n      // javascript\n      ref.current = document.createElement('script');\n      ref.current.src = path;\n      ref.current.async = (options === null || options === void 0 ? void 0 : options.async) === undefined ? true : options === null || options === void 0 ? void 0 : options.async;\n      ref.current.setAttribute('data-status', 'loading');\n      document.body.appendChild(ref.current);\n    } else if ((options === null || options === void 0 ? void 0 : options.type) === 'img' || /(^img!|\\.(png|gif|jpg|svg|webp)$)/.test(pathname)) {\n      // image\n      ref.current = document.createElement('img');\n      ref.current.src = path;\n      ref.current.setAttribute('data-status', 'loading'); // append to wrapper\n\n      var wrapper = getTargetElement(options === null || options === void 0 ? void 0 : options.target) || document.body;\n\n      if (wrapper) {\n        wrapper.appendChild(ref.current);\n      }\n    } else {\n      // do nothing\n      console.error(\"Cannot infer the type of external resource, and please provide a type ('js' | 'css' | 'img'). \" + \"Refer to the https://ahooks.js.org/hooks/dom/use-external/#options\");\n    }\n\n    if (!ref.current) return; // Bind setAttribute Event\n\n    var setAttributeFromEvent = function setAttributeFromEvent(event) {\n      var _a;\n\n      (_a = ref.current) === null || _a === void 0 ? void 0 : _a.setAttribute('data-status', event.type === 'load' ? 'ready' : 'error');\n    };\n\n    ref.current.addEventListener('load', setAttributeFromEvent);\n    ref.current.addEventListener('error', setAttributeFromEvent);\n\n    var setStateFromEvent = function setStateFromEvent(event) {\n      setStatus(event.type === 'load' ? 'ready' : 'error');\n    };\n\n    ref.current.addEventListener('load', setStateFromEvent);\n    ref.current.addEventListener('error', setStateFromEvent);\n    return function () {\n      var _a, _b;\n\n      (_a = ref.current) === null || _a === void 0 ? void 0 : _a.removeEventListener('load', setStateFromEvent);\n      (_b = ref.current) === null || _b === void 0 ? void 0 : _b.removeEventListener('error', setStateFromEvent);\n    };\n  }, [path, active]);\n  var action = useMemo(function () {\n    var unload = function unload() {\n      return setActive(false);\n    };\n\n    var load = function load() {\n      return setActive(true);\n    };\n\n    var toggle = function toggle() {\n      return setActive(function (value) {\n        return !value;\n      });\n    };\n\n    return {\n      toggle: toggle,\n      load: load,\n      unload: unload\n    };\n  }, [setActive]);\n  return [status, action];\n}","map":{"version":3,"sources":["/Users/brandonliu/Project/goairmart/antd-demo/node_modules/ahooks/es/useExternal/index.js"],"names":["__read","o","n","m","Symbol","iterator","i","call","r","ar","e","next","done","push","value","error","useState","useRef","useEffect","useMemo","getTargetElement","useExternal","path","options","isPath","_a","status","setStatus","_b","active","setActive","ref","current","remove","undefined","pathname","replace","type","test","document","createElement","rel","href","media","isLegacyIECss","relList","as","setAttribute","head","appendChild","src","async","body","wrapper","target","console","setAttributeFromEvent","event","addEventListener","setStateFromEvent","removeEventListener","action","unload","load","toggle"],"mappings":"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","sourcesContent":["var __read = this && this.__read || function (o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o),\n      r,\n      ar = [],\n      e;\n\n  try {\n    while ((n === void 0 || n-- > 0) && !(r = i.next()).done) {\n      ar.push(r.value);\n    }\n  } catch (error) {\n    e = {\n      error: error\n    };\n  } finally {\n    try {\n      if (r && !r.done && (m = i[\"return\"])) m.call(i);\n    } finally {\n      if (e) throw e.error;\n    }\n  }\n\n  return ar;\n};\n\nimport { useState, useRef, useEffect, useMemo } from 'react';\nimport { getTargetElement } from '../utils/dom';\nexport default function useExternal(path, options) {\n  var isPath = typeof path === 'string' && path !== '';\n\n  var _a = __read(useState(isPath ? 'loading' : 'unset'), 2),\n      status = _a[0],\n      setStatus = _a[1];\n\n  var _b = __read(useState(isPath), 2),\n      active = _b[0],\n      setActive = _b[1];\n\n  var ref = useRef();\n  useEffect(function () {\n    var _a;\n\n    (_a = ref.current) === null || _a === void 0 ? void 0 : _a.remove();\n\n    if (!isPath || !active) {\n      setStatus('unset');\n      ref.current = undefined;\n      return;\n    }\n\n    setStatus('loading'); // Create external element\n\n    var pathname = path.replace(/[|#].*$/, '');\n\n    if ((options === null || options === void 0 ? void 0 : options.type) === 'css' || /(^css!|\\.css$)/.test(pathname)) {\n      // css\n      ref.current = document.createElement('link');\n      ref.current.rel = 'stylesheet';\n      ref.current.href = path;\n      ref.current.media = (options === null || options === void 0 ? void 0 : options.media) || 'all'; // IE9+\n\n      var isLegacyIECss = ('hideFocus' in ref.current); // use preload in IE Edge (to detect load errors)\n\n      if (isLegacyIECss && ref.current.relList) {\n        ref.current.rel = 'preload';\n        ref.current.as = 'style';\n      }\n\n      ref.current.setAttribute('data-status', 'loading');\n      document.head.appendChild(ref.current);\n    } else if ((options === null || options === void 0 ? void 0 : options.type) === 'js' || /(^js!|\\.js$)/.test(pathname)) {\n      // javascript\n      ref.current = document.createElement('script');\n      ref.current.src = path;\n      ref.current.async = (options === null || options === void 0 ? void 0 : options.async) === undefined ? true : options === null || options === void 0 ? void 0 : options.async;\n      ref.current.setAttribute('data-status', 'loading');\n      document.body.appendChild(ref.current);\n    } else if ((options === null || options === void 0 ? void 0 : options.type) === 'img' || /(^img!|\\.(png|gif|jpg|svg|webp)$)/.test(pathname)) {\n      // image\n      ref.current = document.createElement('img');\n      ref.current.src = path;\n      ref.current.setAttribute('data-status', 'loading'); // append to wrapper\n\n      var wrapper = getTargetElement(options === null || options === void 0 ? void 0 : options.target) || document.body;\n\n      if (wrapper) {\n        wrapper.appendChild(ref.current);\n      }\n    } else {\n      // do nothing\n      console.error(\"Cannot infer the type of external resource, and please provide a type ('js' | 'css' | 'img'). \" + \"Refer to the https://ahooks.js.org/hooks/dom/use-external/#options\");\n    }\n\n    if (!ref.current) return; // Bind setAttribute Event\n\n    var setAttributeFromEvent = function setAttributeFromEvent(event) {\n      var _a;\n\n      (_a = ref.current) === null || _a === void 0 ? void 0 : _a.setAttribute('data-status', event.type === 'load' ? 'ready' : 'error');\n    };\n\n    ref.current.addEventListener('load', setAttributeFromEvent);\n    ref.current.addEventListener('error', setAttributeFromEvent);\n\n    var setStateFromEvent = function setStateFromEvent(event) {\n      setStatus(event.type === 'load' ? 'ready' : 'error');\n    };\n\n    ref.current.addEventListener('load', setStateFromEvent);\n    ref.current.addEventListener('error', setStateFromEvent);\n    return function () {\n      var _a, _b;\n\n      (_a = ref.current) === null || _a === void 0 ? void 0 : _a.removeEventListener('load', setStateFromEvent);\n      (_b = ref.current) === null || _b === void 0 ? void 0 : _b.removeEventListener('error', setStateFromEvent);\n    };\n  }, [path, active]);\n  var action = useMemo(function () {\n    var unload = function unload() {\n      return setActive(false);\n    };\n\n    var load = function load() {\n      return setActive(true);\n    };\n\n    var toggle = function toggle() {\n      return setActive(function (value) {\n        return !value;\n      });\n    };\n\n    return {\n      toggle: toggle,\n      load: load,\n      unload: unload\n    };\n  }, [setActive]);\n  return [status, action];\n}"]},"metadata":{},"sourceType":"module"}