{"ast":null,"code":"import { mergeProps } from '../../utils/with-default-props';\nimport React, { useState, useRef } from 'react';\nimport { withNativeProps } from '../../utils/native-props';\nimport { PictureOutline, PictureWrongOutline } from 'antd-mobile-icons';\nimport { staged } from 'staged-components';\nimport { toCSSLength } from '../../utils/to-css-length';\nimport { LazyDetector } from './lazy-detector';\nvar classPrefix = \"adm-image\";\nvar defaultProps = {\n  fit: 'fill',\n  placeholder: /*#__PURE__*/React.createElement(\"div\", {\n    className: classPrefix + \"-tip\"\n  }, /*#__PURE__*/React.createElement(PictureOutline, null)),\n  fallback: /*#__PURE__*/React.createElement(\"div\", {\n    className: classPrefix + \"-tip\"\n  }, /*#__PURE__*/React.createElement(PictureWrongOutline, null)),\n  lazy: false\n};\nexport var Image = staged(function (p) {\n  var props = mergeProps(defaultProps, p);\n\n  var _useState = useState(false),\n      loaded = _useState[0],\n      setLoaded = _useState[1];\n\n  var _useState2 = useState(false),\n      failed = _useState2[0],\n      setFailed = _useState2[1];\n\n  var ref = useRef(null);\n  var src = props.src;\n  var srcSet = props.srcSet;\n\n  var _useState3 = useState(!props.lazy),\n      initialized = _useState3[0],\n      setInitialized = _useState3[1];\n\n  src = initialized ? props.src : undefined;\n  srcSet = initialized ? props.srcSet : undefined;\n\n  function renderInner() {\n    if (failed) {\n      return props.fallback;\n    }\n\n    return /*#__PURE__*/React.createElement(React.Fragment, null, !loaded && props.placeholder, /*#__PURE__*/React.createElement(\"img\", {\n      className: classPrefix + \"-img\",\n      src: src,\n      alt: props.alt,\n      onClick: props.onClick,\n      onLoad: function onLoad() {\n        setLoaded(true);\n      },\n      onError: function onError(e) {\n        var _a;\n\n        setFailed(true);\n        (_a = props.onError) === null || _a === void 0 ? void 0 : _a.call(props, e);\n      },\n      style: {\n        objectFit: props.fit,\n        display: loaded ? 'block' : 'none'\n      },\n      crossOrigin: props.crossOrigin,\n      decoding: props.decoding,\n      loading: props.loading,\n      referrerPolicy: props.referrerPolicy,\n      sizes: props.sizes,\n      srcSet: srcSet,\n      useMap: props.useMap\n    }));\n  }\n\n  var style = {};\n\n  if (props.width) {\n    style['--width'] = toCSSLength(props.width);\n  }\n\n  if (props.height) {\n    style['--height'] = toCSSLength(props.height);\n  }\n\n  return withNativeProps(props, /*#__PURE__*/React.createElement(\"div\", {\n    ref: ref,\n    className: classPrefix,\n    style: style\n  }, props.lazy && !initialized && /*#__PURE__*/React.createElement(LazyDetector, {\n    onActive: function onActive() {\n      setInitialized(true);\n    }\n  }), renderInner()));\n});","map":{"version":3,"sources":["/Users/brandonliu/Project/goairmart/antd-demo/node_modules/antd-mobile/es/components/image/image.js"],"names":["mergeProps","React","useState","useRef","withNativeProps","PictureOutline","PictureWrongOutline","staged","toCSSLength","LazyDetector","classPrefix","defaultProps","fit","placeholder","createElement","className","fallback","lazy","Image","p","props","_useState","loaded","setLoaded","_useState2","failed","setFailed","ref","src","srcSet","_useState3","initialized","setInitialized","undefined","renderInner","Fragment","alt","onClick","onLoad","onError","e","_a","call","style","objectFit","display","crossOrigin","decoding","loading","referrerPolicy","sizes","useMap","width","height","onActive"],"mappings":"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","sourcesContent":["import { mergeProps } from '../../utils/with-default-props';\nimport React, { useState, useRef } from 'react';\nimport { withNativeProps } from '../../utils/native-props';\nimport { PictureOutline, PictureWrongOutline } from 'antd-mobile-icons';\nimport { staged } from 'staged-components';\nimport { toCSSLength } from '../../utils/to-css-length';\nimport { LazyDetector } from './lazy-detector';\nvar classPrefix = \"adm-image\";\nvar defaultProps = {\n  fit: 'fill',\n  placeholder: /*#__PURE__*/React.createElement(\"div\", {\n    className: classPrefix + \"-tip\"\n  }, /*#__PURE__*/React.createElement(PictureOutline, null)),\n  fallback: /*#__PURE__*/React.createElement(\"div\", {\n    className: classPrefix + \"-tip\"\n  }, /*#__PURE__*/React.createElement(PictureWrongOutline, null)),\n  lazy: false\n};\nexport var Image = staged(function (p) {\n  var props = mergeProps(defaultProps, p);\n\n  var _useState = useState(false),\n      loaded = _useState[0],\n      setLoaded = _useState[1];\n\n  var _useState2 = useState(false),\n      failed = _useState2[0],\n      setFailed = _useState2[1];\n\n  var ref = useRef(null);\n  var src = props.src;\n  var srcSet = props.srcSet;\n\n  var _useState3 = useState(!props.lazy),\n      initialized = _useState3[0],\n      setInitialized = _useState3[1];\n\n  src = initialized ? props.src : undefined;\n  srcSet = initialized ? props.srcSet : undefined;\n\n  function renderInner() {\n    if (failed) {\n      return props.fallback;\n    }\n\n    return /*#__PURE__*/React.createElement(React.Fragment, null, !loaded && props.placeholder, /*#__PURE__*/React.createElement(\"img\", {\n      className: classPrefix + \"-img\",\n      src: src,\n      alt: props.alt,\n      onClick: props.onClick,\n      onLoad: function onLoad() {\n        setLoaded(true);\n      },\n      onError: function onError(e) {\n        var _a;\n\n        setFailed(true);\n        (_a = props.onError) === null || _a === void 0 ? void 0 : _a.call(props, e);\n      },\n      style: {\n        objectFit: props.fit,\n        display: loaded ? 'block' : 'none'\n      },\n      crossOrigin: props.crossOrigin,\n      decoding: props.decoding,\n      loading: props.loading,\n      referrerPolicy: props.referrerPolicy,\n      sizes: props.sizes,\n      srcSet: srcSet,\n      useMap: props.useMap\n    }));\n  }\n\n  var style = {};\n\n  if (props.width) {\n    style['--width'] = toCSSLength(props.width);\n  }\n\n  if (props.height) {\n    style['--height'] = toCSSLength(props.height);\n  }\n\n  return withNativeProps(props, /*#__PURE__*/React.createElement(\"div\", {\n    ref: ref,\n    className: classPrefix,\n    style: style\n  }, props.lazy && !initialized && /*#__PURE__*/React.createElement(LazyDetector, {\n    onActive: function onActive() {\n      setInitialized(true);\n    }\n  }), renderInner()));\n});"]},"metadata":{},"sourceType":"module"}