{"ast":null,"code":"import classNames from 'classnames';\nimport React, { useEffect, useState } from 'react';\nimport { MinusOutline, AddOutline } from 'antd-mobile-icons';\nimport { withNativeProps } from '../../utils/native-props';\nimport { usePropsValue } from '../../utils/use-props-value';\nimport { mergeProps } from '../../utils/with-default-props';\nimport { bound } from '../../utils/bound';\nimport Input from '../input';\nimport Button from '../button';\nvar classPrefix = \"adm-stepper\";\nvar defaultProps = {\n  defaultValue: 0,\n  step: 1,\n  disabled: false\n};\nexport var Stepper = function Stepper(p) {\n  var _classNames;\n\n  var props = mergeProps(defaultProps, p);\n  var disabled = props.disabled,\n      step = props.step,\n      max = props.max,\n      min = props.min;\n\n  var _usePropsValue = usePropsValue(props),\n      value = _usePropsValue[0],\n      setValue = _usePropsValue[1];\n\n  var _useState = useState(function () {\n    return value.toString();\n  }),\n      inputValue = _useState[0],\n      setInputValue = _useState[1];\n\n  function setValueWithCheck(v) {\n    if (isNaN(v)) return;\n    var target = bound(v, props.min, props.max);\n\n    if (props.digits || props.digits === 0) {\n      target = parseFloat(target.toFixed(props.digits));\n    }\n\n    setValue(target);\n  }\n\n  var _useState2 = useState(false),\n      hasFocus = _useState2[0],\n      setHasFocus = _useState2[1];\n\n  useEffect(function () {\n    if (!hasFocus) {\n      setInputValue(value.toString());\n    }\n  }, [hasFocus]);\n  useEffect(function () {\n    if (!hasFocus) {\n      setInputValue(value.toString());\n    }\n  }, [value]);\n\n  var handleInputChange = function handleInputChange(v) {\n    setInputValue(v);\n    setValueWithCheck(parseFloat(v));\n  };\n\n  var handleMinus = function handleMinus() {\n    setValueWithCheck(value - step);\n  };\n\n  var handlePlus = function handlePlus() {\n    setValueWithCheck(value + step);\n  };\n\n  var minusDisabled = function minusDisabled() {\n    if (min === undefined) {\n      return disabled;\n    } else {\n      return disabled || value <= min;\n    }\n  };\n\n  var plusDisabled = function plusDisabled() {\n    if (max === undefined) {\n      return disabled;\n    } else {\n      return disabled || value >= max;\n    }\n  };\n\n  return withNativeProps(props, /*#__PURE__*/React.createElement(\"div\", {\n    className: classNames(classPrefix, (_classNames = {}, _classNames[classPrefix + \"-disabled\"] = disabled, _classNames))\n  }, /*#__PURE__*/React.createElement(Button, {\n    className: classPrefix + \"-minus\",\n    onClick: handleMinus,\n    disabled: minusDisabled(),\n    fill: 'none',\n    color: 'primary'\n  }, /*#__PURE__*/React.createElement(MinusOutline, {\n    fontSize: 12\n  })), /*#__PURE__*/React.createElement(Input, {\n    className: classPrefix + \"-input\",\n    onFocus: function onFocus(e) {\n      var _a;\n\n      setHasFocus(true);\n      (_a = props.onFocus) === null || _a === void 0 ? void 0 : _a.call(props, e);\n    },\n    value: inputValue,\n    onChange: function onChange(val) {\n      disabled || handleInputChange(val);\n    },\n    disabled: disabled,\n    onBlur: function onBlur(e) {\n      var _a;\n\n      setHasFocus(false);\n      (_a = props.onBlur) === null || _a === void 0 ? void 0 : _a.call(props, e);\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    className: classPrefix + \"-plus\",\n    onClick: handlePlus,\n    disabled: plusDisabled(),\n    fill: 'none',\n    color: 'primary'\n  }, /*#__PURE__*/React.createElement(AddOutline, {\n    fontSize: 12\n  }))));\n};","map":{"version":3,"sources":["/Users/brandonliu/Project/goairmart/antd-demo/node_modules/antd-mobile/es/components/stepper/stepper.js"],"names":["classNames","React","useEffect","useState","MinusOutline","AddOutline","withNativeProps","usePropsValue","mergeProps","bound","Input","Button","classPrefix","defaultProps","defaultValue","step","disabled","Stepper","p","_classNames","props","max","min","_usePropsValue","value","setValue","_useState","toString","inputValue","setInputValue","setValueWithCheck","v","isNaN","target","digits","parseFloat","toFixed","_useState2","hasFocus","setHasFocus","handleInputChange","handleMinus","handlePlus","minusDisabled","undefined","plusDisabled","createElement","className","onClick","fill","color","fontSize","onFocus","e","_a","call","onChange","val","onBlur"],"mappings":"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","sourcesContent":["import classNames from 'classnames';\nimport React, { useEffect, useState } from 'react';\nimport { MinusOutline, AddOutline } from 'antd-mobile-icons';\nimport { withNativeProps } from '../../utils/native-props';\nimport { usePropsValue } from '../../utils/use-props-value';\nimport { mergeProps } from '../../utils/with-default-props';\nimport { bound } from '../../utils/bound';\nimport Input from '../input';\nimport Button from '../button';\nvar classPrefix = \"adm-stepper\";\nvar defaultProps = {\n  defaultValue: 0,\n  step: 1,\n  disabled: false\n};\nexport var Stepper = function Stepper(p) {\n  var _classNames;\n\n  var props = mergeProps(defaultProps, p);\n  var disabled = props.disabled,\n      step = props.step,\n      max = props.max,\n      min = props.min;\n\n  var _usePropsValue = usePropsValue(props),\n      value = _usePropsValue[0],\n      setValue = _usePropsValue[1];\n\n  var _useState = useState(function () {\n    return value.toString();\n  }),\n      inputValue = _useState[0],\n      setInputValue = _useState[1];\n\n  function setValueWithCheck(v) {\n    if (isNaN(v)) return;\n    var target = bound(v, props.min, props.max);\n\n    if (props.digits || props.digits === 0) {\n      target = parseFloat(target.toFixed(props.digits));\n    }\n\n    setValue(target);\n  }\n\n  var _useState2 = useState(false),\n      hasFocus = _useState2[0],\n      setHasFocus = _useState2[1];\n\n  useEffect(function () {\n    if (!hasFocus) {\n      setInputValue(value.toString());\n    }\n  }, [hasFocus]);\n  useEffect(function () {\n    if (!hasFocus) {\n      setInputValue(value.toString());\n    }\n  }, [value]);\n\n  var handleInputChange = function handleInputChange(v) {\n    setInputValue(v);\n    setValueWithCheck(parseFloat(v));\n  };\n\n  var handleMinus = function handleMinus() {\n    setValueWithCheck(value - step);\n  };\n\n  var handlePlus = function handlePlus() {\n    setValueWithCheck(value + step);\n  };\n\n  var minusDisabled = function minusDisabled() {\n    if (min === undefined) {\n      return disabled;\n    } else {\n      return disabled || value <= min;\n    }\n  };\n\n  var plusDisabled = function plusDisabled() {\n    if (max === undefined) {\n      return disabled;\n    } else {\n      return disabled || value >= max;\n    }\n  };\n\n  return withNativeProps(props, /*#__PURE__*/React.createElement(\"div\", {\n    className: classNames(classPrefix, (_classNames = {}, _classNames[classPrefix + \"-disabled\"] = disabled, _classNames))\n  }, /*#__PURE__*/React.createElement(Button, {\n    className: classPrefix + \"-minus\",\n    onClick: handleMinus,\n    disabled: minusDisabled(),\n    fill: 'none',\n    color: 'primary'\n  }, /*#__PURE__*/React.createElement(MinusOutline, {\n    fontSize: 12\n  })), /*#__PURE__*/React.createElement(Input, {\n    className: classPrefix + \"-input\",\n    onFocus: function onFocus(e) {\n      var _a;\n\n      setHasFocus(true);\n      (_a = props.onFocus) === null || _a === void 0 ? void 0 : _a.call(props, e);\n    },\n    value: inputValue,\n    onChange: function onChange(val) {\n      disabled || handleInputChange(val);\n    },\n    disabled: disabled,\n    onBlur: function onBlur(e) {\n      var _a;\n\n      setHasFocus(false);\n      (_a = props.onBlur) === null || _a === void 0 ? void 0 : _a.call(props, e);\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    className: classPrefix + \"-plus\",\n    onClick: handlePlus,\n    disabled: plusDisabled(),\n    fill: 'none',\n    color: 'primary'\n  }, /*#__PURE__*/React.createElement(AddOutline, {\n    fontSize: 12\n  }))));\n};"]},"metadata":{},"sourceType":"module"}