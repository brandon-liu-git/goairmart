{"ast":null,"code":"import React, { useCallback, useMemo } from 'react';\nimport Picker from '../picker';\nimport dayjs from 'dayjs';\nimport { generateIntArray } from '../../utils/generate-int-array';\nimport { withNativeProps } from '../../utils/native-props';\nimport { mergeProps } from '../../utils/with-default-props';\nimport { usePropsValue } from '../../utils/use-props-value';\nvar precisionRankRecord = {\n  year: 0,\n  month: 1,\n  day: 2,\n  hour: 3,\n  minute: 4,\n  second: 5\n};\nvar thisYear = new Date().getFullYear();\nvar defaultProps = {\n  min: new Date(new Date().setFullYear(thisYear - 10)),\n  max: new Date(new Date().setFullYear(thisYear + 10)),\n  precision: 'day'\n};\nexport var DatePicker = function DatePicker(p) {\n  var _a;\n\n  var props = mergeProps(defaultProps, p);\n\n  var _usePropsValue = usePropsValue({\n    value: props.value,\n    defaultValue: (_a = props.defaultValue) !== null && _a !== void 0 ? _a : null,\n    onChange: props.onConfirm\n  }),\n      value = _usePropsValue[0],\n      setValue = _usePropsValue[1];\n\n  function columns(selected) {\n    var ret = [];\n    var minYear = props.min.getFullYear();\n    var minMonth = props.min.getMonth() + 1;\n    var minDay = props.min.getDate();\n    var minHour = props.min.getHours();\n    var minMinute = props.min.getMinutes();\n    var minSecond = props.min.getSeconds();\n    var maxYear = props.max.getFullYear();\n    var maxMonth = props.max.getMonth() + 1;\n    var maxDay = props.max.getDate();\n    var maxHour = props.max.getHours();\n    var maxMinute = props.max.getMinutes();\n    var maxSecond = props.max.getSeconds();\n    var rank = precisionRankRecord[props.precision];\n\n    if (rank >= precisionRankRecord.year) {\n      var years = [];\n\n      for (var i = minYear; i <= maxYear; i++) {\n        years.push(i.toString());\n      }\n\n      ret.push(years);\n    }\n\n    var firstDayInSelectedMonth = dayjs(convertStringArrayToDate([selected[0], selected[1], '1']));\n    var selectedYear = parseInt(selected[0]);\n    var selectedMonth = parseInt(selected[1]);\n    var selectedDay = parseInt(selected[2]);\n    var selectedHour = parseInt(selected[3]);\n    var selectedMinute = parseInt(selected[4]);\n    var isInMinYear = selectedYear === minYear;\n    var isInMaxYear = selectedYear === maxYear;\n    var isInMinMonth = isInMinYear && selectedMonth === minMonth;\n    var isInMaxMonth = isInMaxYear && selectedMonth === maxMonth;\n    var isInMinDay = isInMinMonth && selectedDay === minDay;\n    var isInMaxDay = isInMaxMonth && selectedDay === maxDay;\n    var isInMinHour = isInMinDay && selectedHour === minHour;\n    var isInMaxHour = isInMaxDay && selectedHour === maxHour;\n    var isInMinMinute = isInMinHour && selectedMinute === minMinute;\n    var isInMaxMinute = isInMaxHour && selectedMinute === maxMinute;\n\n    if (rank >= precisionRankRecord.month) {\n      var lower = isInMinYear ? minMonth : 1;\n      var upper = isInMaxYear ? maxMonth : 12;\n      var months = generateIntArray(lower, upper);\n      ret.push(months.map(function (v) {\n        return v.toString();\n      }));\n    }\n\n    if (rank >= precisionRankRecord.day) {\n      var _lower = isInMinMonth ? minDay : 1;\n\n      var _upper = isInMaxMonth ? maxDay : firstDayInSelectedMonth.daysInMonth();\n\n      var days = generateIntArray(_lower, _upper);\n      ret.push(days.map(function (v) {\n        return v.toString();\n      }));\n    }\n\n    if (rank >= precisionRankRecord.hour) {\n      var _lower2 = isInMinDay ? minHour : 0;\n\n      var _upper2 = isInMaxDay ? maxHour : 23;\n\n      var hours = generateIntArray(_lower2, _upper2);\n      ret.push(hours.map(function (v) {\n        return {\n          label: ('0' + v.toString()).slice(-2),\n          value: v.toString()\n        };\n      }));\n    }\n\n    if (rank >= precisionRankRecord.minute) {\n      var _lower3 = isInMinHour ? minMinute : 0;\n\n      var _upper3 = isInMaxHour ? maxMinute : 59;\n\n      var minutes = generateIntArray(_lower3, _upper3);\n      ret.push(minutes.map(function (v) {\n        return {\n          label: ('0' + v.toString()).slice(-2),\n          value: v.toString()\n        };\n      }));\n    }\n\n    if (rank >= precisionRankRecord.second) {\n      var _lower4 = isInMinMinute ? minSecond : 0;\n\n      var _upper4 = isInMaxMinute ? maxSecond : 59;\n\n      var seconds = generateIntArray(_lower4, _upper4);\n      ret.push(seconds.map(function (v) {\n        return {\n          label: ('0' + v.toString()).slice(-2),\n          value: v.toString()\n        };\n      }));\n    }\n\n    return ret;\n  }\n\n  var pickerValue = useMemo(function () {\n    return convertDateToStringArray(value);\n  }, [value]);\n  var onConfirm = useCallback(function (val) {\n    setValue(convertStringArrayToDate(val));\n  }, [setValue]);\n  var onSelect = useCallback(function (val) {\n    var _a;\n\n    var date = convertStringArrayToDate(val);\n\n    if (date) {\n      (_a = props.onSelect) === null || _a === void 0 ? void 0 : _a.call(props, date);\n    }\n  }, [props.onSelect]);\n  return withNativeProps(props, /*#__PURE__*/React.createElement(Picker, {\n    columns: columns,\n    value: pickerValue,\n    onCancel: props.onCancel,\n    onClose: props.onClose,\n    visible: props.visible,\n    confirmText: props.confirmText,\n    cancelText: props.cancelText,\n    onConfirm: onConfirm,\n    onSelect: onSelect,\n    getContainer: props.getContainer,\n    afterShow: props.afterShow,\n    afterClose: props.afterClose,\n    onClick: props.onClick,\n    title: props.title,\n    stopPropagation: props.stopPropagation\n  }, function (items) {\n    var _a;\n\n    return (_a = props.children) === null || _a === void 0 ? void 0 : _a.call(props, convertStringArrayToDate(items.map(function (item) {\n      return item === null || item === void 0 ? void 0 : item.value;\n    })));\n  }));\n};\n\nfunction convertDateToStringArray(date) {\n  if (!date) return [];\n  return [date.getFullYear().toString(), (date.getMonth() + 1).toString(), date.getDate().toString(), date.getHours().toString(), date.getMinutes().toString(), date.getSeconds().toString()];\n}\n\nfunction convertStringArrayToDate(value) {\n  var _a, _b, _c, _d, _e, _f;\n\n  if (value.length === 0) return null;\n  var yearString = (_a = value[0]) !== null && _a !== void 0 ? _a : '1900';\n  var monthString = (_b = value[1]) !== null && _b !== void 0 ? _b : '1';\n  var dateString = (_c = value[2]) !== null && _c !== void 0 ? _c : '1';\n  var hourString = (_d = value[3]) !== null && _d !== void 0 ? _d : '0';\n  var minuteString = (_e = value[4]) !== null && _e !== void 0 ? _e : '0';\n  var secondString = (_f = value[5]) !== null && _f !== void 0 ? _f : '0';\n  return new Date(parseInt(yearString), parseInt(monthString) - 1, parseInt(dateString), parseInt(hourString), parseInt(minuteString), parseInt(secondString));\n}","map":{"version":3,"sources":["/Users/brandonliu/Project/goairmart/antd-demo/node_modules/antd-mobile/es/components/date-picker/date-picker.js"],"names":["React","useCallback","useMemo","Picker","dayjs","generateIntArray","withNativeProps","mergeProps","usePropsValue","precisionRankRecord","year","month","day","hour","minute","second","thisYear","Date","getFullYear","defaultProps","min","setFullYear","max","precision","DatePicker","p","_a","props","_usePropsValue","value","defaultValue","onChange","onConfirm","setValue","columns","selected","ret","minYear","minMonth","getMonth","minDay","getDate","minHour","getHours","minMinute","getMinutes","minSecond","getSeconds","maxYear","maxMonth","maxDay","maxHour","maxMinute","maxSecond","rank","years","i","push","toString","firstDayInSelectedMonth","convertStringArrayToDate","selectedYear","parseInt","selectedMonth","selectedDay","selectedHour","selectedMinute","isInMinYear","isInMaxYear","isInMinMonth","isInMaxMonth","isInMinDay","isInMaxDay","isInMinHour","isInMaxHour","isInMinMinute","isInMaxMinute","lower","upper","months","map","v","_lower","_upper","daysInMonth","days","_lower2","_upper2","hours","label","slice","_lower3","_upper3","minutes","_lower4","_upper4","seconds","pickerValue","convertDateToStringArray","val","onSelect","date","call","createElement","onCancel","onClose","visible","confirmText","cancelText","getContainer","afterShow","afterClose","onClick","title","stopPropagation","items","children","item","_b","_c","_d","_e","_f","length","yearString","monthString","dateString","hourString","minuteString","secondString"],"mappings":"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","sourcesContent":["import React, { useCallback, useMemo } from 'react';\nimport Picker from '../picker';\nimport dayjs from 'dayjs';\nimport { generateIntArray } from '../../utils/generate-int-array';\nimport { withNativeProps } from '../../utils/native-props';\nimport { mergeProps } from '../../utils/with-default-props';\nimport { usePropsValue } from '../../utils/use-props-value';\nvar precisionRankRecord = {\n  year: 0,\n  month: 1,\n  day: 2,\n  hour: 3,\n  minute: 4,\n  second: 5\n};\nvar thisYear = new Date().getFullYear();\nvar defaultProps = {\n  min: new Date(new Date().setFullYear(thisYear - 10)),\n  max: new Date(new Date().setFullYear(thisYear + 10)),\n  precision: 'day'\n};\nexport var DatePicker = function DatePicker(p) {\n  var _a;\n\n  var props = mergeProps(defaultProps, p);\n\n  var _usePropsValue = usePropsValue({\n    value: props.value,\n    defaultValue: (_a = props.defaultValue) !== null && _a !== void 0 ? _a : null,\n    onChange: props.onConfirm\n  }),\n      value = _usePropsValue[0],\n      setValue = _usePropsValue[1];\n\n  function columns(selected) {\n    var ret = [];\n    var minYear = props.min.getFullYear();\n    var minMonth = props.min.getMonth() + 1;\n    var minDay = props.min.getDate();\n    var minHour = props.min.getHours();\n    var minMinute = props.min.getMinutes();\n    var minSecond = props.min.getSeconds();\n    var maxYear = props.max.getFullYear();\n    var maxMonth = props.max.getMonth() + 1;\n    var maxDay = props.max.getDate();\n    var maxHour = props.max.getHours();\n    var maxMinute = props.max.getMinutes();\n    var maxSecond = props.max.getSeconds();\n    var rank = precisionRankRecord[props.precision];\n\n    if (rank >= precisionRankRecord.year) {\n      var years = [];\n\n      for (var i = minYear; i <= maxYear; i++) {\n        years.push(i.toString());\n      }\n\n      ret.push(years);\n    }\n\n    var firstDayInSelectedMonth = dayjs(convertStringArrayToDate([selected[0], selected[1], '1']));\n    var selectedYear = parseInt(selected[0]);\n    var selectedMonth = parseInt(selected[1]);\n    var selectedDay = parseInt(selected[2]);\n    var selectedHour = parseInt(selected[3]);\n    var selectedMinute = parseInt(selected[4]);\n    var isInMinYear = selectedYear === minYear;\n    var isInMaxYear = selectedYear === maxYear;\n    var isInMinMonth = isInMinYear && selectedMonth === minMonth;\n    var isInMaxMonth = isInMaxYear && selectedMonth === maxMonth;\n    var isInMinDay = isInMinMonth && selectedDay === minDay;\n    var isInMaxDay = isInMaxMonth && selectedDay === maxDay;\n    var isInMinHour = isInMinDay && selectedHour === minHour;\n    var isInMaxHour = isInMaxDay && selectedHour === maxHour;\n    var isInMinMinute = isInMinHour && selectedMinute === minMinute;\n    var isInMaxMinute = isInMaxHour && selectedMinute === maxMinute;\n\n    if (rank >= precisionRankRecord.month) {\n      var lower = isInMinYear ? minMonth : 1;\n      var upper = isInMaxYear ? maxMonth : 12;\n      var months = generateIntArray(lower, upper);\n      ret.push(months.map(function (v) {\n        return v.toString();\n      }));\n    }\n\n    if (rank >= precisionRankRecord.day) {\n      var _lower = isInMinMonth ? minDay : 1;\n\n      var _upper = isInMaxMonth ? maxDay : firstDayInSelectedMonth.daysInMonth();\n\n      var days = generateIntArray(_lower, _upper);\n      ret.push(days.map(function (v) {\n        return v.toString();\n      }));\n    }\n\n    if (rank >= precisionRankRecord.hour) {\n      var _lower2 = isInMinDay ? minHour : 0;\n\n      var _upper2 = isInMaxDay ? maxHour : 23;\n\n      var hours = generateIntArray(_lower2, _upper2);\n      ret.push(hours.map(function (v) {\n        return {\n          label: ('0' + v.toString()).slice(-2),\n          value: v.toString()\n        };\n      }));\n    }\n\n    if (rank >= precisionRankRecord.minute) {\n      var _lower3 = isInMinHour ? minMinute : 0;\n\n      var _upper3 = isInMaxHour ? maxMinute : 59;\n\n      var minutes = generateIntArray(_lower3, _upper3);\n      ret.push(minutes.map(function (v) {\n        return {\n          label: ('0' + v.toString()).slice(-2),\n          value: v.toString()\n        };\n      }));\n    }\n\n    if (rank >= precisionRankRecord.second) {\n      var _lower4 = isInMinMinute ? minSecond : 0;\n\n      var _upper4 = isInMaxMinute ? maxSecond : 59;\n\n      var seconds = generateIntArray(_lower4, _upper4);\n      ret.push(seconds.map(function (v) {\n        return {\n          label: ('0' + v.toString()).slice(-2),\n          value: v.toString()\n        };\n      }));\n    }\n\n    return ret;\n  }\n\n  var pickerValue = useMemo(function () {\n    return convertDateToStringArray(value);\n  }, [value]);\n  var onConfirm = useCallback(function (val) {\n    setValue(convertStringArrayToDate(val));\n  }, [setValue]);\n  var onSelect = useCallback(function (val) {\n    var _a;\n\n    var date = convertStringArrayToDate(val);\n\n    if (date) {\n      (_a = props.onSelect) === null || _a === void 0 ? void 0 : _a.call(props, date);\n    }\n  }, [props.onSelect]);\n  return withNativeProps(props, /*#__PURE__*/React.createElement(Picker, {\n    columns: columns,\n    value: pickerValue,\n    onCancel: props.onCancel,\n    onClose: props.onClose,\n    visible: props.visible,\n    confirmText: props.confirmText,\n    cancelText: props.cancelText,\n    onConfirm: onConfirm,\n    onSelect: onSelect,\n    getContainer: props.getContainer,\n    afterShow: props.afterShow,\n    afterClose: props.afterClose,\n    onClick: props.onClick,\n    title: props.title,\n    stopPropagation: props.stopPropagation\n  }, function (items) {\n    var _a;\n\n    return (_a = props.children) === null || _a === void 0 ? void 0 : _a.call(props, convertStringArrayToDate(items.map(function (item) {\n      return item === null || item === void 0 ? void 0 : item.value;\n    })));\n  }));\n};\n\nfunction convertDateToStringArray(date) {\n  if (!date) return [];\n  return [date.getFullYear().toString(), (date.getMonth() + 1).toString(), date.getDate().toString(), date.getHours().toString(), date.getMinutes().toString(), date.getSeconds().toString()];\n}\n\nfunction convertStringArrayToDate(value) {\n  var _a, _b, _c, _d, _e, _f;\n\n  if (value.length === 0) return null;\n  var yearString = (_a = value[0]) !== null && _a !== void 0 ? _a : '1900';\n  var monthString = (_b = value[1]) !== null && _b !== void 0 ? _b : '1';\n  var dateString = (_c = value[2]) !== null && _c !== void 0 ? _c : '1';\n  var hourString = (_d = value[3]) !== null && _d !== void 0 ? _d : '0';\n  var minuteString = (_e = value[4]) !== null && _e !== void 0 ? _e : '0';\n  var secondString = (_f = value[5]) !== null && _f !== void 0 ? _f : '0';\n  return new Date(parseInt(yearString), parseInt(monthString) - 1, parseInt(dateString), parseInt(hourString), parseInt(minuteString), parseInt(secondString));\n}"]},"metadata":{},"sourceType":"module"}