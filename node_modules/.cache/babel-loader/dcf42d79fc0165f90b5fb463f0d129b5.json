{"ast":null,"code":"import React, { useState, useRef, forwardRef, useImperativeHandle } from 'react';\nimport classNames from 'classnames';\nimport Input from '../input';\nimport { withNativeProps } from '../../utils/native-props';\nimport { mergeProps } from '../../utils/with-default-props';\nimport { SearchOutline } from 'antd-mobile-icons';\nimport { usePropsValue } from '../../utils/use-props-value';\nimport { useConfig } from '../config-provider';\nvar classPrefix = \"adm-search\";\nvar defaultProps = {\n  clearable: true,\n  showCancelButton: false,\n  defaultValue: ''\n};\nexport var Search = /*#__PURE__*/forwardRef(function (p, ref) {\n  var _classNames;\n\n  var _useConfig = useConfig(),\n      locale = _useConfig.locale;\n\n  var props = mergeProps(defaultProps, {\n    cancelText: locale.common.cancel\n  }, p);\n\n  var _usePropsValue = usePropsValue(props),\n      value = _usePropsValue[0],\n      setValue = _usePropsValue[1];\n\n  var _useState = useState(false),\n      hasFocus = _useState[0],\n      setHasFocus = _useState[1];\n\n  var inputRef = useRef(null);\n  useImperativeHandle(ref, function () {\n    return {\n      clear: function clear() {\n        var _a;\n\n        return (_a = inputRef.current) === null || _a === void 0 ? void 0 : _a.clear();\n      },\n      focus: function focus() {\n        var _a;\n\n        return (_a = inputRef.current) === null || _a === void 0 ? void 0 : _a.focus();\n      },\n      blur: function blur() {\n        var _a;\n\n        return (_a = inputRef.current) === null || _a === void 0 ? void 0 : _a.blur();\n      }\n    };\n  });\n\n  var renderCancelButton = function renderCancelButton() {\n    var isShowCancel = false;\n\n    if (typeof props.showCancelButton === 'function') {\n      isShowCancel = props.showCancelButton(hasFocus, value);\n    } else {\n      isShowCancel = props.showCancelButton && hasFocus;\n    }\n\n    return isShowCancel && /*#__PURE__*/React.createElement(\"div\", {\n      className: classPrefix + \"-suffix\"\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      onMouseDown: function onMouseDown(e) {\n        e.preventDefault();\n      },\n      onTouchStart: function onTouchStart(e) {\n        e.preventDefault();\n      },\n      onClick: function onClick() {\n        var _a, _b, _c;\n\n        (_a = inputRef.current) === null || _a === void 0 ? void 0 : _a.clear();\n        (_b = inputRef.current) === null || _b === void 0 ? void 0 : _b.blur();\n        (_c = props.onCancel) === null || _c === void 0 ? void 0 : _c.call(props);\n      }\n    }, props.cancelText));\n  };\n\n  return withNativeProps(props, /*#__PURE__*/React.createElement(\"div\", {\n    className: classNames(classPrefix, (_classNames = {}, _classNames[classPrefix + \"-active\"] = hasFocus, _classNames))\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classPrefix + \"-input-box\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classPrefix + \"-input-box-icon\"\n  }, /*#__PURE__*/React.createElement(SearchOutline, null)), /*#__PURE__*/React.createElement(Input, {\n    ref: inputRef,\n    className: classPrefix + \"-input\",\n    value: value,\n    onChange: setValue,\n    maxLength: props.maxLength,\n    placeholder: props.placeholder,\n    clearable: props.clearable,\n    onFocus: function onFocus(e) {\n      var _a;\n\n      setHasFocus(true);\n      (_a = props.onFocus) === null || _a === void 0 ? void 0 : _a.call(props, e);\n    },\n    onBlur: function onBlur(e) {\n      var _a;\n\n      setHasFocus(false);\n      (_a = props.onBlur) === null || _a === void 0 ? void 0 : _a.call(props, e);\n    },\n    onClear: props.onClear,\n    type: 'search',\n    onEnterPress: function onEnterPress() {\n      var _a, _b;\n\n      (_a = inputRef.current) === null || _a === void 0 ? void 0 : _a.blur();\n      (_b = props.onSearch) === null || _b === void 0 ? void 0 : _b.call(props, value);\n    }\n  })), renderCancelButton()));\n});","map":{"version":3,"sources":["/Users/brandonliu/Project/goairmart/antd-demo/node_modules/antd-mobile/es/components/search/search.js"],"names":["React","useState","useRef","forwardRef","useImperativeHandle","classNames","Input","withNativeProps","mergeProps","SearchOutline","usePropsValue","useConfig","classPrefix","defaultProps","clearable","showCancelButton","defaultValue","Search","p","ref","_classNames","_useConfig","locale","props","cancelText","common","cancel","_usePropsValue","value","setValue","_useState","hasFocus","setHasFocus","inputRef","clear","_a","current","focus","blur","renderCancelButton","isShowCancel","createElement","className","onMouseDown","e","preventDefault","onTouchStart","onClick","_b","_c","onCancel","call","onChange","maxLength","placeholder","onFocus","onBlur","onClear","type","onEnterPress","onSearch"],"mappings":"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","sourcesContent":["import React, { useState, useRef, forwardRef, useImperativeHandle } from 'react';\nimport classNames from 'classnames';\nimport Input from '../input';\nimport { withNativeProps } from '../../utils/native-props';\nimport { mergeProps } from '../../utils/with-default-props';\nimport { SearchOutline } from 'antd-mobile-icons';\nimport { usePropsValue } from '../../utils/use-props-value';\nimport { useConfig } from '../config-provider';\nvar classPrefix = \"adm-search\";\nvar defaultProps = {\n  clearable: true,\n  showCancelButton: false,\n  defaultValue: ''\n};\nexport var Search = /*#__PURE__*/forwardRef(function (p, ref) {\n  var _classNames;\n\n  var _useConfig = useConfig(),\n      locale = _useConfig.locale;\n\n  var props = mergeProps(defaultProps, {\n    cancelText: locale.common.cancel\n  }, p);\n\n  var _usePropsValue = usePropsValue(props),\n      value = _usePropsValue[0],\n      setValue = _usePropsValue[1];\n\n  var _useState = useState(false),\n      hasFocus = _useState[0],\n      setHasFocus = _useState[1];\n\n  var inputRef = useRef(null);\n  useImperativeHandle(ref, function () {\n    return {\n      clear: function clear() {\n        var _a;\n\n        return (_a = inputRef.current) === null || _a === void 0 ? void 0 : _a.clear();\n      },\n      focus: function focus() {\n        var _a;\n\n        return (_a = inputRef.current) === null || _a === void 0 ? void 0 : _a.focus();\n      },\n      blur: function blur() {\n        var _a;\n\n        return (_a = inputRef.current) === null || _a === void 0 ? void 0 : _a.blur();\n      }\n    };\n  });\n\n  var renderCancelButton = function renderCancelButton() {\n    var isShowCancel = false;\n\n    if (typeof props.showCancelButton === 'function') {\n      isShowCancel = props.showCancelButton(hasFocus, value);\n    } else {\n      isShowCancel = props.showCancelButton && hasFocus;\n    }\n\n    return isShowCancel && /*#__PURE__*/React.createElement(\"div\", {\n      className: classPrefix + \"-suffix\"\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      onMouseDown: function onMouseDown(e) {\n        e.preventDefault();\n      },\n      onTouchStart: function onTouchStart(e) {\n        e.preventDefault();\n      },\n      onClick: function onClick() {\n        var _a, _b, _c;\n\n        (_a = inputRef.current) === null || _a === void 0 ? void 0 : _a.clear();\n        (_b = inputRef.current) === null || _b === void 0 ? void 0 : _b.blur();\n        (_c = props.onCancel) === null || _c === void 0 ? void 0 : _c.call(props);\n      }\n    }, props.cancelText));\n  };\n\n  return withNativeProps(props, /*#__PURE__*/React.createElement(\"div\", {\n    className: classNames(classPrefix, (_classNames = {}, _classNames[classPrefix + \"-active\"] = hasFocus, _classNames))\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classPrefix + \"-input-box\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classPrefix + \"-input-box-icon\"\n  }, /*#__PURE__*/React.createElement(SearchOutline, null)), /*#__PURE__*/React.createElement(Input, {\n    ref: inputRef,\n    className: classPrefix + \"-input\",\n    value: value,\n    onChange: setValue,\n    maxLength: props.maxLength,\n    placeholder: props.placeholder,\n    clearable: props.clearable,\n    onFocus: function onFocus(e) {\n      var _a;\n\n      setHasFocus(true);\n      (_a = props.onFocus) === null || _a === void 0 ? void 0 : _a.call(props, e);\n    },\n    onBlur: function onBlur(e) {\n      var _a;\n\n      setHasFocus(false);\n      (_a = props.onBlur) === null || _a === void 0 ? void 0 : _a.call(props, e);\n    },\n    onClear: props.onClear,\n    type: 'search',\n    onEnterPress: function onEnterPress() {\n      var _a, _b;\n\n      (_a = inputRef.current) === null || _a === void 0 ? void 0 : _a.blur();\n      (_b = props.onSearch) === null || _b === void 0 ? void 0 : _b.call(props, value);\n    }\n  })), renderCancelButton()));\n});"]},"metadata":{},"sourceType":"module"}