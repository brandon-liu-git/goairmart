{"ast":null,"code":"var __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) {\n    if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  }\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n\nimport React, { useContext, useCallback, useState } from 'react';\nimport classNames from 'classnames';\nimport { Field } from 'rc-field-form';\nimport FieldContext from 'rc-field-form/lib/FieldContext';\nimport { devWarning } from '../../utils/dev-log';\nimport { FormContext, NoStyleItemContext } from './context';\nimport { toArray } from './utils';\nimport List from '../list';\nvar NAME_SPLIT = '__SPLIT__';\nvar classPrefix = \"adm-form-item\";\nvar MemoInput = /*#__PURE__*/React.memo(function (_ref) {\n  var children = _ref.children;\n  return children;\n}, function (prev, next) {\n  return prev.value === next.value && prev.update === next.update;\n});\n\nvar FormItemLayout = function FormItemLayout(props) {\n  var _classNames;\n\n  var className = props.className,\n      style = props.style,\n      label = props.label,\n      help = props.help,\n      required = props.required,\n      disabled = props.disabled,\n      children = props.children,\n      htmlFor = props.htmlFor,\n      hidden = props.hidden,\n      errors = props.errors;\n  var context = useContext(FormContext);\n  var hasFeedback = props.hasFeedback || context.hasFeedback;\n  var layout = props.layout || context.layout;\n  var feedback = hasFeedback && errors && errors.length > 0 ? errors[0] : null;\n  var labelElement = label ? /*#__PURE__*/React.createElement(\"label\", {\n    className: classPrefix + \"-label\",\n    htmlFor: htmlFor\n  }, label, required && /*#__PURE__*/React.createElement(\"span\", {\n    className: classPrefix + \"-label-required\"\n  }, \"*\"), help && /*#__PURE__*/React.createElement(\"span\", {\n    className: classPrefix + \"-label-help\"\n  }, help)) : null;\n  var descriptionElement = feedback && /*#__PURE__*/React.createElement(\"div\", {\n    className: classPrefix + \"-footer\"\n  }, feedback);\n  return /*#__PURE__*/React.createElement(List.Item, {\n    style: style,\n    title: layout === 'vertical' && labelElement,\n    prefix: layout === 'horizontal' && labelElement,\n    description: descriptionElement,\n    className: classNames(classPrefix, className, (_classNames = {}, _classNames[classPrefix + \"-hidden\"] = hidden, _classNames)),\n    disabled: disabled,\n    onClick: props.onClick\n  }, children);\n};\n\nexport var FormItem = function FormItem(props) {\n  var className = props.className,\n      style = props.style,\n      label = props.label,\n      help = props.help,\n      hasFeedback = props.hasFeedback,\n      name = props.name,\n      required = props.required,\n      noStyle = props.noStyle,\n      hidden = props.hidden,\n      layout = props.layout,\n      disabled = props.disabled,\n      rules = props.rules,\n      children = props.children,\n      messageVariables = props.messageVariables,\n      _props$trigger = props.trigger,\n      trigger = _props$trigger === void 0 ? 'onChange' : _props$trigger,\n      validateTrigger = props.validateTrigger,\n      onClick = props.onClick,\n      shouldUpdate = props.shouldUpdate,\n      dependencies = props.dependencies,\n      fieldProps = __rest(props, [\"className\", \"style\", \"label\", \"help\", \"hasFeedback\", \"name\", \"required\", \"noStyle\", \"hidden\", \"layout\", \"disabled\", \"rules\", \"children\", \"messageVariables\", \"trigger\", \"validateTrigger\", \"onClick\", \"shouldUpdate\", \"dependencies\"]);\n\n  var _React$useContext = React.useContext(FieldContext),\n      contextValidateTrigger = _React$useContext.validateTrigger;\n\n  var mergedValidateTrigger = validateTrigger !== undefined ? validateTrigger : contextValidateTrigger;\n  var updateRef = React.useRef(0);\n  updateRef.current += 1;\n\n  var _useState = useState({}),\n      subMetas = _useState[0],\n      setSubMetas = _useState[1];\n\n  var onSubMetaChange = useCallback(function (subMeta, namePath) {\n    setSubMetas(function (prevSubMetas) {\n      var nextSubMetas = Object.assign({}, prevSubMetas);\n      var nameKey = namePath.join(NAME_SPLIT);\n\n      if (subMeta.destroy) {\n        delete nextSubMetas[nameKey];\n      } else {\n        nextSubMetas[nameKey] = subMeta;\n      }\n\n      return nextSubMetas;\n    });\n  }, [setSubMetas]);\n\n  function renderLayout(baseChildren, fieldId, meta, isRequired) {\n    var _a;\n\n    if (noStyle && !hidden) {\n      return baseChildren;\n    }\n\n    var curErrors = (_a = meta === null || meta === void 0 ? void 0 : meta.errors) !== null && _a !== void 0 ? _a : [];\n    var errors = Object.keys(subMetas).reduce(function (subErrors, key) {\n      var _a, _b;\n\n      var errors = (_b = (_a = subMetas[key]) === null || _a === void 0 ? void 0 : _a.errors) !== null && _b !== void 0 ? _b : [];\n\n      if (errors.length) {\n        subErrors = [].concat(subErrors, errors);\n      }\n\n      return subErrors;\n    }, curErrors);\n    return /*#__PURE__*/React.createElement(FormItemLayout, {\n      className: className,\n      style: style,\n      label: label,\n      help: help,\n      required: isRequired,\n      disabled: disabled,\n      hasFeedback: hasFeedback,\n      htmlFor: fieldId,\n      errors: errors,\n      onClick: onClick,\n      hidden: hidden,\n      layout: layout\n    }, /*#__PURE__*/React.createElement(NoStyleItemContext.Provider, {\n      value: onSubMetaChange\n    }, baseChildren));\n  }\n\n  var isRenderProps = typeof children === 'function';\n\n  if (!name && !isRenderProps && !props.dependencies) {\n    return renderLayout(children);\n  }\n\n  var Variables = {};\n\n  if (typeof label === 'string') {\n    Variables.label = label;\n  }\n\n  if (messageVariables) {\n    Variables = Object.assign(Object.assign({}, Variables), messageVariables);\n  }\n\n  var notifyParentMetaChange = useContext(NoStyleItemContext);\n\n  var onMetaChange = function onMetaChange(meta) {\n    if (noStyle && notifyParentMetaChange) {\n      var namePath = meta.name;\n      notifyParentMetaChange(meta, namePath);\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(Field, Object.assign({}, fieldProps, {\n    name: name,\n    shouldUpdate: shouldUpdate,\n    dependencies: dependencies,\n    rules: rules,\n    trigger: trigger,\n    validateTrigger: mergedValidateTrigger,\n    onMetaChange: onMetaChange\n  }), function (control, meta, context) {\n    var childNode = null;\n    var isRequired = required !== undefined ? required : !!(rules && rules.some(function (rule) {\n      if (rule && typeof rule === 'object' && rule.required) {\n        return true;\n      }\n\n      return false;\n    }));\n    var fieldId = (toArray(name).length && meta ? meta.name : []).join('_');\n\n    if (shouldUpdate && dependencies) {\n      devWarning('Form.Item', \"`shouldUpdate` and `dependencies` shouldn't be used together.\");\n    }\n\n    if (isRenderProps) {\n      if ((shouldUpdate || dependencies) && !name) {\n        childNode = children(context);\n      } else {\n        if (!(shouldUpdate || dependencies)) {\n          devWarning('Form.Item', '`children` of render props only work with `shouldUpdate` or `dependencies`.');\n        }\n\n        if (name) {\n          devWarning('Form.Item', \"Do not use `name` with `children` of render props since it's not a field.\");\n        }\n      } // not render props\n\n    } else if (dependencies && !name) {\n      devWarning('Form.Item', 'Must set `name` or use render props when `dependencies` is set.');\n    } else if ( /*#__PURE__*/React.isValidElement(children)) {\n      if (children.props.defaultValue) {\n        devWarning('Form.Item', '`defaultValue` will not work on controlled Field. You should use `initialValues` of Form instead.');\n      }\n\n      var childProps = Object.assign(Object.assign({}, children.props), control);\n\n      if (!childProps.id) {\n        childProps.id = fieldId;\n      } // We should keep user origin event handler\n\n\n      var triggers = new Set([].concat(toArray(trigger), toArray(mergedValidateTrigger)));\n      triggers.forEach(function (eventName) {\n        childProps[eventName] = function () {\n          var _a2, _c2;\n\n          var _a, _b, _c;\n\n          for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n            args[_key] = arguments[_key];\n          }\n\n          (_a = control[eventName]) === null || _a === void 0 ? void 0 : (_a2 = _a).call.apply(_a2, [control].concat(args));\n          (_c = (_b = children.props)[eventName]) === null || _c === void 0 ? void 0 : (_c2 = _c).call.apply(_c2, [_b].concat(args));\n        };\n      });\n      childNode = /*#__PURE__*/React.createElement(MemoInput, {\n        value: control[props.valuePropName || 'value'],\n        update: updateRef.current\n      }, /*#__PURE__*/React.cloneElement(children, childProps));\n    } else {\n      if (name) {\n        devWarning('Form.Item', '`name` is only used for validate React element. If you are using Form.Item as layout display, please remove `name` instead.');\n      }\n\n      childNode = children;\n    }\n\n    return renderLayout(childNode, fieldId, meta, isRequired);\n  });\n};","map":{"version":3,"sources":["/Users/brandonliu/Project/goairmart/antd-demo/node_modules/antd-mobile/es/components/form/form-item.js"],"names":["__rest","s","e","t","p","Object","prototype","hasOwnProperty","call","indexOf","getOwnPropertySymbols","i","length","propertyIsEnumerable","React","useContext","useCallback","useState","classNames","Field","FieldContext","devWarning","FormContext","NoStyleItemContext","toArray","List","NAME_SPLIT","classPrefix","MemoInput","memo","_ref","children","prev","next","value","update","FormItemLayout","props","_classNames","className","style","label","help","required","disabled","htmlFor","hidden","errors","context","hasFeedback","layout","feedback","labelElement","createElement","descriptionElement","Item","title","prefix","description","onClick","FormItem","name","noStyle","rules","messageVariables","_props$trigger","trigger","validateTrigger","shouldUpdate","dependencies","fieldProps","_React$useContext","contextValidateTrigger","mergedValidateTrigger","undefined","updateRef","useRef","current","_useState","subMetas","setSubMetas","onSubMetaChange","subMeta","namePath","prevSubMetas","nextSubMetas","assign","nameKey","join","destroy","renderLayout","baseChildren","fieldId","meta","isRequired","_a","curErrors","keys","reduce","subErrors","key","_b","concat","Provider","isRenderProps","Variables","notifyParentMetaChange","onMetaChange","control","childNode","some","rule","isValidElement","defaultValue","childProps","id","triggers","Set","forEach","eventName","_a2","_c2","_c","_len","arguments","args","Array","_key","apply","valuePropName","cloneElement"],"mappings":"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","sourcesContent":["var __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) {\n    if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  }\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n\nimport React, { useContext, useCallback, useState } from 'react';\nimport classNames from 'classnames';\nimport { Field } from 'rc-field-form';\nimport FieldContext from 'rc-field-form/lib/FieldContext';\nimport { devWarning } from '../../utils/dev-log';\nimport { FormContext, NoStyleItemContext } from './context';\nimport { toArray } from './utils';\nimport List from '../list';\nvar NAME_SPLIT = '__SPLIT__';\nvar classPrefix = \"adm-form-item\";\nvar MemoInput = /*#__PURE__*/React.memo(function (_ref) {\n  var children = _ref.children;\n  return children;\n}, function (prev, next) {\n  return prev.value === next.value && prev.update === next.update;\n});\n\nvar FormItemLayout = function FormItemLayout(props) {\n  var _classNames;\n\n  var className = props.className,\n      style = props.style,\n      label = props.label,\n      help = props.help,\n      required = props.required,\n      disabled = props.disabled,\n      children = props.children,\n      htmlFor = props.htmlFor,\n      hidden = props.hidden,\n      errors = props.errors;\n  var context = useContext(FormContext);\n  var hasFeedback = props.hasFeedback || context.hasFeedback;\n  var layout = props.layout || context.layout;\n  var feedback = hasFeedback && errors && errors.length > 0 ? errors[0] : null;\n  var labelElement = label ? /*#__PURE__*/React.createElement(\"label\", {\n    className: classPrefix + \"-label\",\n    htmlFor: htmlFor\n  }, label, required && /*#__PURE__*/React.createElement(\"span\", {\n    className: classPrefix + \"-label-required\"\n  }, \"*\"), help && /*#__PURE__*/React.createElement(\"span\", {\n    className: classPrefix + \"-label-help\"\n  }, help)) : null;\n  var descriptionElement = feedback && /*#__PURE__*/React.createElement(\"div\", {\n    className: classPrefix + \"-footer\"\n  }, feedback);\n  return /*#__PURE__*/React.createElement(List.Item, {\n    style: style,\n    title: layout === 'vertical' && labelElement,\n    prefix: layout === 'horizontal' && labelElement,\n    description: descriptionElement,\n    className: classNames(classPrefix, className, (_classNames = {}, _classNames[classPrefix + \"-hidden\"] = hidden, _classNames)),\n    disabled: disabled,\n    onClick: props.onClick\n  }, children);\n};\n\nexport var FormItem = function FormItem(props) {\n  var className = props.className,\n      style = props.style,\n      label = props.label,\n      help = props.help,\n      hasFeedback = props.hasFeedback,\n      name = props.name,\n      required = props.required,\n      noStyle = props.noStyle,\n      hidden = props.hidden,\n      layout = props.layout,\n      disabled = props.disabled,\n      rules = props.rules,\n      children = props.children,\n      messageVariables = props.messageVariables,\n      _props$trigger = props.trigger,\n      trigger = _props$trigger === void 0 ? 'onChange' : _props$trigger,\n      validateTrigger = props.validateTrigger,\n      onClick = props.onClick,\n      shouldUpdate = props.shouldUpdate,\n      dependencies = props.dependencies,\n      fieldProps = __rest(props, [\"className\", \"style\", \"label\", \"help\", \"hasFeedback\", \"name\", \"required\", \"noStyle\", \"hidden\", \"layout\", \"disabled\", \"rules\", \"children\", \"messageVariables\", \"trigger\", \"validateTrigger\", \"onClick\", \"shouldUpdate\", \"dependencies\"]);\n\n  var _React$useContext = React.useContext(FieldContext),\n      contextValidateTrigger = _React$useContext.validateTrigger;\n\n  var mergedValidateTrigger = validateTrigger !== undefined ? validateTrigger : contextValidateTrigger;\n  var updateRef = React.useRef(0);\n  updateRef.current += 1;\n\n  var _useState = useState({}),\n      subMetas = _useState[0],\n      setSubMetas = _useState[1];\n\n  var onSubMetaChange = useCallback(function (subMeta, namePath) {\n    setSubMetas(function (prevSubMetas) {\n      var nextSubMetas = Object.assign({}, prevSubMetas);\n      var nameKey = namePath.join(NAME_SPLIT);\n\n      if (subMeta.destroy) {\n        delete nextSubMetas[nameKey];\n      } else {\n        nextSubMetas[nameKey] = subMeta;\n      }\n\n      return nextSubMetas;\n    });\n  }, [setSubMetas]);\n\n  function renderLayout(baseChildren, fieldId, meta, isRequired) {\n    var _a;\n\n    if (noStyle && !hidden) {\n      return baseChildren;\n    }\n\n    var curErrors = (_a = meta === null || meta === void 0 ? void 0 : meta.errors) !== null && _a !== void 0 ? _a : [];\n    var errors = Object.keys(subMetas).reduce(function (subErrors, key) {\n      var _a, _b;\n\n      var errors = (_b = (_a = subMetas[key]) === null || _a === void 0 ? void 0 : _a.errors) !== null && _b !== void 0 ? _b : [];\n\n      if (errors.length) {\n        subErrors = [].concat(subErrors, errors);\n      }\n\n      return subErrors;\n    }, curErrors);\n    return /*#__PURE__*/React.createElement(FormItemLayout, {\n      className: className,\n      style: style,\n      label: label,\n      help: help,\n      required: isRequired,\n      disabled: disabled,\n      hasFeedback: hasFeedback,\n      htmlFor: fieldId,\n      errors: errors,\n      onClick: onClick,\n      hidden: hidden,\n      layout: layout\n    }, /*#__PURE__*/React.createElement(NoStyleItemContext.Provider, {\n      value: onSubMetaChange\n    }, baseChildren));\n  }\n\n  var isRenderProps = typeof children === 'function';\n\n  if (!name && !isRenderProps && !props.dependencies) {\n    return renderLayout(children);\n  }\n\n  var Variables = {};\n\n  if (typeof label === 'string') {\n    Variables.label = label;\n  }\n\n  if (messageVariables) {\n    Variables = Object.assign(Object.assign({}, Variables), messageVariables);\n  }\n\n  var notifyParentMetaChange = useContext(NoStyleItemContext);\n\n  var onMetaChange = function onMetaChange(meta) {\n    if (noStyle && notifyParentMetaChange) {\n      var namePath = meta.name;\n      notifyParentMetaChange(meta, namePath);\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(Field, Object.assign({}, fieldProps, {\n    name: name,\n    shouldUpdate: shouldUpdate,\n    dependencies: dependencies,\n    rules: rules,\n    trigger: trigger,\n    validateTrigger: mergedValidateTrigger,\n    onMetaChange: onMetaChange\n  }), function (control, meta, context) {\n    var childNode = null;\n    var isRequired = required !== undefined ? required : !!(rules && rules.some(function (rule) {\n      if (rule && typeof rule === 'object' && rule.required) {\n        return true;\n      }\n\n      return false;\n    }));\n    var fieldId = (toArray(name).length && meta ? meta.name : []).join('_');\n\n    if (shouldUpdate && dependencies) {\n      devWarning('Form.Item', \"`shouldUpdate` and `dependencies` shouldn't be used together.\");\n    }\n\n    if (isRenderProps) {\n      if ((shouldUpdate || dependencies) && !name) {\n        childNode = children(context);\n      } else {\n        if (!(shouldUpdate || dependencies)) {\n          devWarning('Form.Item', '`children` of render props only work with `shouldUpdate` or `dependencies`.');\n        }\n\n        if (name) {\n          devWarning('Form.Item', \"Do not use `name` with `children` of render props since it's not a field.\");\n        }\n      } // not render props\n\n    } else if (dependencies && !name) {\n      devWarning('Form.Item', 'Must set `name` or use render props when `dependencies` is set.');\n    } else if ( /*#__PURE__*/React.isValidElement(children)) {\n      if (children.props.defaultValue) {\n        devWarning('Form.Item', '`defaultValue` will not work on controlled Field. You should use `initialValues` of Form instead.');\n      }\n\n      var childProps = Object.assign(Object.assign({}, children.props), control);\n\n      if (!childProps.id) {\n        childProps.id = fieldId;\n      } // We should keep user origin event handler\n\n\n      var triggers = new Set([].concat(toArray(trigger), toArray(mergedValidateTrigger)));\n      triggers.forEach(function (eventName) {\n        childProps[eventName] = function () {\n          var _a2, _c2;\n\n          var _a, _b, _c;\n\n          for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n            args[_key] = arguments[_key];\n          }\n\n          (_a = control[eventName]) === null || _a === void 0 ? void 0 : (_a2 = _a).call.apply(_a2, [control].concat(args));\n          (_c = (_b = children.props)[eventName]) === null || _c === void 0 ? void 0 : (_c2 = _c).call.apply(_c2, [_b].concat(args));\n        };\n      });\n      childNode = /*#__PURE__*/React.createElement(MemoInput, {\n        value: control[props.valuePropName || 'value'],\n        update: updateRef.current\n      }, /*#__PURE__*/React.cloneElement(children, childProps));\n    } else {\n      if (name) {\n        devWarning('Form.Item', '`name` is only used for validate React element. If you are using Form.Item as layout display, please remove `name` instead.');\n      }\n\n      childNode = children;\n    }\n\n    return renderLayout(childNode, fieldId, meta, isRequired);\n  });\n};"]},"metadata":{},"sourceType":"module"}