{"ast":null,"code":"import React, { useEffect, useState } from 'react';\nimport { resolveContainer } from '../../utils/get-container';\nimport ReactDOM from 'react-dom';\nimport { InternalToast } from './toast';\nimport { mergeProps } from '../../utils/with-default-props';\nvar containers = [];\n\nfunction unmount(container) {\n  var unmountResult = ReactDOM.unmountComponentAtNode(container);\n\n  if (unmountResult && container.parentNode) {\n    container.parentNode.removeChild(container);\n  }\n}\n\nvar defaultProps = {\n  duration: 2000\n};\nexport function show(p) {\n  var props = mergeProps(defaultProps, typeof p === 'string' ? {\n    content: p\n  } : p);\n  var timer = 0;\n  var _props$getContainer = props.getContainer,\n      getContainer = _props$getContainer === void 0 ? function () {\n    return document.body;\n  } : _props$getContainer;\n  var container = document.createElement('div');\n  var bodyContainer = resolveContainer(getContainer);\n  bodyContainer.appendChild(container);\n  clear();\n  containers.push(container);\n\n  var TempToast = function TempToast() {\n    var _useState = useState(true),\n        visible = _useState[0],\n        setVisible = _useState[1];\n\n    useEffect(function () {\n      return function () {\n        var _a;\n\n        (_a = props.afterClose) === null || _a === void 0 ? void 0 : _a.call(props);\n      };\n    }, []);\n    useEffect(function () {\n      if (props.duration === 0) {\n        return;\n      }\n\n      timer = window.setTimeout(function () {\n        setVisible(false);\n      }, props.duration);\n      return function () {\n        window.clearTimeout(timer);\n      };\n    }, []);\n    return /*#__PURE__*/React.createElement(InternalToast, Object.assign({}, props, {\n      getContainer: function getContainer() {\n        return container;\n      },\n      visible: visible,\n      afterClose: function afterClose() {\n        unmount(container);\n      }\n    }));\n  };\n\n  ReactDOM.render( /*#__PURE__*/React.createElement(TempToast, null), container);\n}\nexport function clear() {\n  while (true) {\n    var container = containers.pop();\n    if (!container) break;\n    unmount(container);\n  }\n}","map":{"version":3,"sources":["/Users/brandonliu/Project/goairmart/antd-demo/node_modules/antd-mobile/es/components/toast/methods.js"],"names":["React","useEffect","useState","resolveContainer","ReactDOM","InternalToast","mergeProps","containers","unmount","container","unmountResult","unmountComponentAtNode","parentNode","removeChild","defaultProps","duration","show","p","props","content","timer","_props$getContainer","getContainer","document","body","createElement","bodyContainer","appendChild","clear","push","TempToast","_useState","visible","setVisible","_a","afterClose","call","window","setTimeout","clearTimeout","Object","assign","render","pop"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { resolveContainer } from '../../utils/get-container';\nimport ReactDOM from 'react-dom';\nimport { InternalToast } from './toast';\nimport { mergeProps } from '../../utils/with-default-props';\nvar containers = [];\n\nfunction unmount(container) {\n  var unmountResult = ReactDOM.unmountComponentAtNode(container);\n\n  if (unmountResult && container.parentNode) {\n    container.parentNode.removeChild(container);\n  }\n}\n\nvar defaultProps = {\n  duration: 2000\n};\nexport function show(p) {\n  var props = mergeProps(defaultProps, typeof p === 'string' ? {\n    content: p\n  } : p);\n  var timer = 0;\n  var _props$getContainer = props.getContainer,\n      getContainer = _props$getContainer === void 0 ? function () {\n    return document.body;\n  } : _props$getContainer;\n  var container = document.createElement('div');\n  var bodyContainer = resolveContainer(getContainer);\n  bodyContainer.appendChild(container);\n  clear();\n  containers.push(container);\n\n  var TempToast = function TempToast() {\n    var _useState = useState(true),\n        visible = _useState[0],\n        setVisible = _useState[1];\n\n    useEffect(function () {\n      return function () {\n        var _a;\n\n        (_a = props.afterClose) === null || _a === void 0 ? void 0 : _a.call(props);\n      };\n    }, []);\n    useEffect(function () {\n      if (props.duration === 0) {\n        return;\n      }\n\n      timer = window.setTimeout(function () {\n        setVisible(false);\n      }, props.duration);\n      return function () {\n        window.clearTimeout(timer);\n      };\n    }, []);\n    return /*#__PURE__*/React.createElement(InternalToast, Object.assign({}, props, {\n      getContainer: function getContainer() {\n        return container;\n      },\n      visible: visible,\n      afterClose: function afterClose() {\n        unmount(container);\n      }\n    }));\n  };\n\n  ReactDOM.render( /*#__PURE__*/React.createElement(TempToast, null), container);\n}\nexport function clear() {\n  while (true) {\n    var container = containers.pop();\n    if (!container) break;\n    unmount(container);\n  }\n}"]},"metadata":{},"sourceType":"module"}