{"ast":null,"code":"import classNames from 'classnames';\nimport React, { useState, useRef } from 'react';\nimport { withNativeProps } from '../../utils/native-props';\nimport { mergeProps } from '../../utils/with-default-props';\nimport Mask from '../mask';\nimport { useLockScroll } from '../../utils/use-lock-scroll';\nimport { renderToContainer } from '../../utils/render-to-container';\nimport { useSpring, animated } from '@react-spring/web';\nimport { useShouldRender } from '../../utils/use-should-render';\nimport { withStopPropagation } from '../../utils/with-stop-propagation';\nvar classPrefix = \"adm-popup\";\nvar defaultProps = {\n  position: 'bottom',\n  visible: false,\n  getContainer: function getContainer() {\n    return document.body;\n  },\n  mask: true,\n  stopPropagation: ['click']\n};\nexport var Popup = function Popup(p) {\n  var props = mergeProps(defaultProps, p);\n  var bodyCls = classNames(classPrefix + \"-body\", props.bodyClassName, classPrefix + \"-body-position-\" + props.position);\n  var ref = useRef(null);\n\n  var _useState = useState(props.visible),\n      active = _useState[0],\n      setActive = _useState[1];\n\n  useLockScroll(ref, active);\n  var shouldRender = useShouldRender(active, props.forceRender, props.destroyOnClose);\n\n  var _useSpring = useSpring({\n    percent: props.visible ? 0 : 100,\n    config: {\n      precision: 0.1,\n      mass: 0.4,\n      tension: 300,\n      friction: 30\n    },\n    onStart: function onStart() {\n      setActive(true);\n    },\n    onRest: function onRest() {\n      var _a, _b;\n\n      setActive(props.visible);\n\n      if (props.visible) {\n        (_a = props.afterShow) === null || _a === void 0 ? void 0 : _a.call(props);\n      } else {\n        (_b = props.afterClose) === null || _b === void 0 ? void 0 : _b.call(props);\n      }\n    }\n  }),\n      percent = _useSpring.percent;\n\n  var node = withStopPropagation(props.stopPropagation, withNativeProps(props, /*#__PURE__*/React.createElement(\"div\", {\n    className: classPrefix,\n    onClick: props.onClick,\n    style: {\n      display: active ? 'unset' : 'none'\n    }\n  }, props.mask && /*#__PURE__*/React.createElement(Mask, {\n    visible: props.visible,\n    onMaskClick: props.onMaskClick,\n    className: props.maskClassName,\n    style: props.maskStyle,\n    disableBodyScroll: false,\n    stopPropagation: props.stopPropagation\n  }), /*#__PURE__*/React.createElement(animated.div, {\n    className: bodyCls,\n    style: Object.assign(Object.assign({}, props.bodyStyle), {\n      transform: percent.to(function (v) {\n        if (props.position === 'bottom') {\n          return \"translate(0, \" + v + \"%)\";\n        }\n\n        if (props.position === 'top') {\n          return \"translate(0, -\" + v + \"%)\";\n        }\n\n        if (props.position === 'left') {\n          return \"translate(-\" + v + \"%, 0)\";\n        }\n\n        if (props.position === 'right') {\n          return \"translate(\" + v + \"%, 0)\";\n        }\n\n        return 'none';\n      })\n    }),\n    ref: ref\n  }, shouldRender && props.children))));\n  return renderToContainer(props.getContainer, node);\n};","map":{"version":3,"sources":["/Users/brandonliu/Project/goairmart/antd-demo/node_modules/antd-mobile/es/components/popup/popup.js"],"names":["classNames","React","useState","useRef","withNativeProps","mergeProps","Mask","useLockScroll","renderToContainer","useSpring","animated","useShouldRender","withStopPropagation","classPrefix","defaultProps","position","visible","getContainer","document","body","mask","stopPropagation","Popup","p","props","bodyCls","bodyClassName","ref","_useState","active","setActive","shouldRender","forceRender","destroyOnClose","_useSpring","percent","config","precision","mass","tension","friction","onStart","onRest","_a","_b","afterShow","call","afterClose","node","createElement","className","onClick","style","display","onMaskClick","maskClassName","maskStyle","disableBodyScroll","div","Object","assign","bodyStyle","transform","to","v","children"],"mappings":"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","sourcesContent":["import classNames from 'classnames';\nimport React, { useState, useRef } from 'react';\nimport { withNativeProps } from '../../utils/native-props';\nimport { mergeProps } from '../../utils/with-default-props';\nimport Mask from '../mask';\nimport { useLockScroll } from '../../utils/use-lock-scroll';\nimport { renderToContainer } from '../../utils/render-to-container';\nimport { useSpring, animated } from '@react-spring/web';\nimport { useShouldRender } from '../../utils/use-should-render';\nimport { withStopPropagation } from '../../utils/with-stop-propagation';\nvar classPrefix = \"adm-popup\";\nvar defaultProps = {\n  position: 'bottom',\n  visible: false,\n  getContainer: function getContainer() {\n    return document.body;\n  },\n  mask: true,\n  stopPropagation: ['click']\n};\nexport var Popup = function Popup(p) {\n  var props = mergeProps(defaultProps, p);\n  var bodyCls = classNames(classPrefix + \"-body\", props.bodyClassName, classPrefix + \"-body-position-\" + props.position);\n  var ref = useRef(null);\n\n  var _useState = useState(props.visible),\n      active = _useState[0],\n      setActive = _useState[1];\n\n  useLockScroll(ref, active);\n  var shouldRender = useShouldRender(active, props.forceRender, props.destroyOnClose);\n\n  var _useSpring = useSpring({\n    percent: props.visible ? 0 : 100,\n    config: {\n      precision: 0.1,\n      mass: 0.4,\n      tension: 300,\n      friction: 30\n    },\n    onStart: function onStart() {\n      setActive(true);\n    },\n    onRest: function onRest() {\n      var _a, _b;\n\n      setActive(props.visible);\n\n      if (props.visible) {\n        (_a = props.afterShow) === null || _a === void 0 ? void 0 : _a.call(props);\n      } else {\n        (_b = props.afterClose) === null || _b === void 0 ? void 0 : _b.call(props);\n      }\n    }\n  }),\n      percent = _useSpring.percent;\n\n  var node = withStopPropagation(props.stopPropagation, withNativeProps(props, /*#__PURE__*/React.createElement(\"div\", {\n    className: classPrefix,\n    onClick: props.onClick,\n    style: {\n      display: active ? 'unset' : 'none'\n    }\n  }, props.mask && /*#__PURE__*/React.createElement(Mask, {\n    visible: props.visible,\n    onMaskClick: props.onMaskClick,\n    className: props.maskClassName,\n    style: props.maskStyle,\n    disableBodyScroll: false,\n    stopPropagation: props.stopPropagation\n  }), /*#__PURE__*/React.createElement(animated.div, {\n    className: bodyCls,\n    style: Object.assign(Object.assign({}, props.bodyStyle), {\n      transform: percent.to(function (v) {\n        if (props.position === 'bottom') {\n          return \"translate(0, \" + v + \"%)\";\n        }\n\n        if (props.position === 'top') {\n          return \"translate(0, -\" + v + \"%)\";\n        }\n\n        if (props.position === 'left') {\n          return \"translate(-\" + v + \"%, 0)\";\n        }\n\n        if (props.position === 'right') {\n          return \"translate(\" + v + \"%, 0)\";\n        }\n\n        return 'none';\n      })\n    }),\n    ref: ref\n  }, shouldRender && props.children))));\n  return renderToContainer(props.getContainer, node);\n};"]},"metadata":{},"sourceType":"module"}