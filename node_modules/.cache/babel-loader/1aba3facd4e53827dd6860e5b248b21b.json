{"ast":null,"code":"import { withNativeProps } from '../../utils/native-props';\nimport React, { useMemo, useRef, useState } from 'react';\nimport { useLockScroll } from '../../utils/use-lock-scroll';\nimport { useSpring, animated } from '@react-spring/web';\nimport { renderToContainer } from '../../utils/render-to-container';\nimport { mergeProps } from '../../utils/with-default-props';\nimport { useConfig } from '../config-provider';\nimport { useShouldRender } from '../../utils/use-should-render';\nimport { withStopPropagation } from '../../utils/with-stop-propagation';\nvar classPrefix = \"adm-mask\";\nvar opacityRecord = {\n  \"default\": 0.55,\n  thin: 0.35,\n  thick: 0.75\n};\nvar defaultProps = {\n  visible: true,\n  destroyOnClose: false,\n  forceRender: false,\n  color: 'black',\n  opacity: 'default',\n  disableBodyScroll: true,\n  getContainer: null,\n  stopPropagation: ['click']\n};\nexport var Mask = function Mask(p) {\n  var props = mergeProps(defaultProps, p);\n\n  var _useConfig = useConfig(),\n      locale = _useConfig.locale;\n\n  var ref = useRef(null);\n  useLockScroll(ref, props.visible && props.disableBodyScroll);\n  var background = useMemo(function () {\n    var _a;\n\n    var opacity = (_a = opacityRecord[props.opacity]) !== null && _a !== void 0 ? _a : props.opacity;\n    var rgb = props.color === 'white' ? '255, 255, 255' : '0, 0, 0';\n    return \"rgba(\" + rgb + \", \" + opacity + \")\";\n  }, [props.color, props.opacity]);\n\n  var _useState = useState(props.visible),\n      active = _useState[0],\n      setActive = _useState[1];\n\n  var _useSpring = useSpring({\n    opacity: props.visible ? 1 : 0,\n    config: {\n      precision: 0.01,\n      mass: 1,\n      tension: 200,\n      friction: 30\n    },\n    onStart: function onStart() {\n      setActive(true);\n    },\n    onRest: function onRest() {\n      var _a, _b;\n\n      setActive(props.visible);\n\n      if (props.visible) {\n        (_a = props.afterShow) === null || _a === void 0 ? void 0 : _a.call(props);\n      } else {\n        (_b = props.afterClose) === null || _b === void 0 ? void 0 : _b.call(props);\n      }\n    }\n  }),\n      opacity = _useSpring.opacity;\n\n  var shouldRender = useShouldRender(active, props.forceRender, props.destroyOnClose);\n  var node = withStopPropagation(props.stopPropagation, withNativeProps(props, /*#__PURE__*/React.createElement(animated.div, {\n    className: classPrefix,\n    ref: ref,\n    style: Object.assign(Object.assign({}, props.style), {\n      background: background,\n      opacity: opacity,\n      display: active ? 'unset' : 'none'\n    })\n  }, props.onMaskClick && /*#__PURE__*/React.createElement(\"div\", {\n    className: classPrefix + \"-aria-button\",\n    role: 'button',\n    \"aria-label\": locale.Mask.name,\n    onClick: props.onMaskClick\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: classPrefix + \"-content\"\n  }, shouldRender && props.children))));\n  return renderToContainer(props.getContainer, node);\n};","map":{"version":3,"sources":["/Users/brandonliu/Project/goairmart/antd-demo/node_modules/antd-mobile/es/components/mask/mask.js"],"names":["withNativeProps","React","useMemo","useRef","useState","useLockScroll","useSpring","animated","renderToContainer","mergeProps","useConfig","useShouldRender","withStopPropagation","classPrefix","opacityRecord","thin","thick","defaultProps","visible","destroyOnClose","forceRender","color","opacity","disableBodyScroll","getContainer","stopPropagation","Mask","p","props","_useConfig","locale","ref","background","_a","rgb","_useState","active","setActive","_useSpring","config","precision","mass","tension","friction","onStart","onRest","_b","afterShow","call","afterClose","shouldRender","node","createElement","div","className","style","Object","assign","display","onMaskClick","role","name","onClick","children"],"mappings":"AAAA,SAASA,eAAT,QAAgC,0BAAhC;AACA,OAAOC,KAAP,IAAgBC,OAAhB,EAAyBC,MAAzB,EAAiCC,QAAjC,QAAiD,OAAjD;AACA,SAASC,aAAT,QAA8B,6BAA9B;AACA,SAASC,SAAT,EAAoBC,QAApB,QAAoC,mBAApC;AACA,SAASC,iBAAT,QAAkC,iCAAlC;AACA,SAASC,UAAT,QAA2B,gCAA3B;AACA,SAASC,SAAT,QAA0B,oBAA1B;AACA,SAASC,eAAT,QAAgC,+BAAhC;AACA,SAASC,mBAAT,QAAoC,mCAApC;AACA,IAAIC,WAAW,GAAG,UAAlB;AACA,IAAIC,aAAa,GAAG;AAClB,aAAW,IADO;AAElBC,EAAAA,IAAI,EAAE,IAFY;AAGlBC,EAAAA,KAAK,EAAE;AAHW,CAApB;AAKA,IAAIC,YAAY,GAAG;AACjBC,EAAAA,OAAO,EAAE,IADQ;AAEjBC,EAAAA,cAAc,EAAE,KAFC;AAGjBC,EAAAA,WAAW,EAAE,KAHI;AAIjBC,EAAAA,KAAK,EAAE,OAJU;AAKjBC,EAAAA,OAAO,EAAE,SALQ;AAMjBC,EAAAA,iBAAiB,EAAE,IANF;AAOjBC,EAAAA,YAAY,EAAE,IAPG;AAQjBC,EAAAA,eAAe,EAAE,CAAC,OAAD;AARA,CAAnB;AAUA,OAAO,IAAIC,IAAI,GAAG,SAASA,IAAT,CAAcC,CAAd,EAAiB;AACjC,MAAIC,KAAK,GAAGnB,UAAU,CAACQ,YAAD,EAAeU,CAAf,CAAtB;;AAEA,MAAIE,UAAU,GAAGnB,SAAS,EAA1B;AAAA,MACIoB,MAAM,GAAGD,UAAU,CAACC,MADxB;;AAGA,MAAIC,GAAG,GAAG5B,MAAM,CAAC,IAAD,CAAhB;AACAE,EAAAA,aAAa,CAAC0B,GAAD,EAAMH,KAAK,CAACV,OAAN,IAAiBU,KAAK,CAACL,iBAA7B,CAAb;AACA,MAAIS,UAAU,GAAG9B,OAAO,CAAC,YAAY;AACnC,QAAI+B,EAAJ;;AAEA,QAAIX,OAAO,GAAG,CAACW,EAAE,GAAGnB,aAAa,CAACc,KAAK,CAACN,OAAP,CAAnB,MAAwC,IAAxC,IAAgDW,EAAE,KAAK,KAAK,CAA5D,GAAgEA,EAAhE,GAAqEL,KAAK,CAACN,OAAzF;AACA,QAAIY,GAAG,GAAGN,KAAK,CAACP,KAAN,KAAgB,OAAhB,GAA0B,eAA1B,GAA4C,SAAtD;AACA,WAAO,UAAUa,GAAV,GAAgB,IAAhB,GAAuBZ,OAAvB,GAAiC,GAAxC;AACD,GANuB,EAMrB,CAACM,KAAK,CAACP,KAAP,EAAcO,KAAK,CAACN,OAApB,CANqB,CAAxB;;AAQA,MAAIa,SAAS,GAAG/B,QAAQ,CAACwB,KAAK,CAACV,OAAP,CAAxB;AAAA,MACIkB,MAAM,GAAGD,SAAS,CAAC,CAAD,CADtB;AAAA,MAEIE,SAAS,GAAGF,SAAS,CAAC,CAAD,CAFzB;;AAIA,MAAIG,UAAU,GAAGhC,SAAS,CAAC;AACzBgB,IAAAA,OAAO,EAAEM,KAAK,CAACV,OAAN,GAAgB,CAAhB,GAAoB,CADJ;AAEzBqB,IAAAA,MAAM,EAAE;AACNC,MAAAA,SAAS,EAAE,IADL;AAENC,MAAAA,IAAI,EAAE,CAFA;AAGNC,MAAAA,OAAO,EAAE,GAHH;AAINC,MAAAA,QAAQ,EAAE;AAJJ,KAFiB;AAQzBC,IAAAA,OAAO,EAAE,SAASA,OAAT,GAAmB;AAC1BP,MAAAA,SAAS,CAAC,IAAD,CAAT;AACD,KAVwB;AAWzBQ,IAAAA,MAAM,EAAE,SAASA,MAAT,GAAkB;AACxB,UAAIZ,EAAJ,EAAQa,EAAR;;AAEAT,MAAAA,SAAS,CAACT,KAAK,CAACV,OAAP,CAAT;;AAEA,UAAIU,KAAK,CAACV,OAAV,EAAmB;AACjB,SAACe,EAAE,GAAGL,KAAK,CAACmB,SAAZ,MAA2B,IAA3B,IAAmCd,EAAE,KAAK,KAAK,CAA/C,GAAmD,KAAK,CAAxD,GAA4DA,EAAE,CAACe,IAAH,CAAQpB,KAAR,CAA5D;AACD,OAFD,MAEO;AACL,SAACkB,EAAE,GAAGlB,KAAK,CAACqB,UAAZ,MAA4B,IAA5B,IAAoCH,EAAE,KAAK,KAAK,CAAhD,GAAoD,KAAK,CAAzD,GAA6DA,EAAE,CAACE,IAAH,CAAQpB,KAAR,CAA7D;AACD;AACF;AArBwB,GAAD,CAA1B;AAAA,MAuBIN,OAAO,GAAGgB,UAAU,CAAChB,OAvBzB;;AAyBA,MAAI4B,YAAY,GAAGvC,eAAe,CAACyB,MAAD,EAASR,KAAK,CAACR,WAAf,EAA4BQ,KAAK,CAACT,cAAlC,CAAlC;AACA,MAAIgC,IAAI,GAAGvC,mBAAmB,CAACgB,KAAK,CAACH,eAAP,EAAwBzB,eAAe,CAAC4B,KAAD,EAAQ,aAAa3B,KAAK,CAACmD,aAAN,CAAoB7C,QAAQ,CAAC8C,GAA7B,EAAkC;AAC1HC,IAAAA,SAAS,EAAEzC,WAD+G;AAE1HkB,IAAAA,GAAG,EAAEA,GAFqH;AAG1HwB,IAAAA,KAAK,EAAEC,MAAM,CAACC,MAAP,CAAcD,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkB7B,KAAK,CAAC2B,KAAxB,CAAd,EAA8C;AACnDvB,MAAAA,UAAU,EAAEA,UADuC;AAEnDV,MAAAA,OAAO,EAAEA,OAF0C;AAGnDoC,MAAAA,OAAO,EAAEtB,MAAM,GAAG,OAAH,GAAa;AAHuB,KAA9C;AAHmH,GAAlC,EAQvFR,KAAK,CAAC+B,WAAN,IAAqB,aAAa1D,KAAK,CAACmD,aAAN,CAAoB,KAApB,EAA2B;AAC9DE,IAAAA,SAAS,EAAEzC,WAAW,GAAG,cADqC;AAE9D+C,IAAAA,IAAI,EAAE,QAFwD;AAG9D,kBAAc9B,MAAM,CAACJ,IAAP,CAAYmC,IAHoC;AAI9DC,IAAAA,OAAO,EAAElC,KAAK,CAAC+B;AAJ+C,GAA3B,CARqD,EAatF,aAAa1D,KAAK,CAACmD,aAAN,CAAoB,KAApB,EAA2B;AAC1CE,IAAAA,SAAS,EAAEzC,WAAW,GAAG;AADiB,GAA3B,EAEdqC,YAAY,IAAItB,KAAK,CAACmC,QAFR,CAbyE,CAArB,CAAvC,CAA9B;AAgBA,SAAOvD,iBAAiB,CAACoB,KAAK,CAACJ,YAAP,EAAqB2B,IAArB,CAAxB;AACD,CA/DM","sourcesContent":["import { withNativeProps } from '../../utils/native-props';\nimport React, { useMemo, useRef, useState } from 'react';\nimport { useLockScroll } from '../../utils/use-lock-scroll';\nimport { useSpring, animated } from '@react-spring/web';\nimport { renderToContainer } from '../../utils/render-to-container';\nimport { mergeProps } from '../../utils/with-default-props';\nimport { useConfig } from '../config-provider';\nimport { useShouldRender } from '../../utils/use-should-render';\nimport { withStopPropagation } from '../../utils/with-stop-propagation';\nvar classPrefix = \"adm-mask\";\nvar opacityRecord = {\n  \"default\": 0.55,\n  thin: 0.35,\n  thick: 0.75\n};\nvar defaultProps = {\n  visible: true,\n  destroyOnClose: false,\n  forceRender: false,\n  color: 'black',\n  opacity: 'default',\n  disableBodyScroll: true,\n  getContainer: null,\n  stopPropagation: ['click']\n};\nexport var Mask = function Mask(p) {\n  var props = mergeProps(defaultProps, p);\n\n  var _useConfig = useConfig(),\n      locale = _useConfig.locale;\n\n  var ref = useRef(null);\n  useLockScroll(ref, props.visible && props.disableBodyScroll);\n  var background = useMemo(function () {\n    var _a;\n\n    var opacity = (_a = opacityRecord[props.opacity]) !== null && _a !== void 0 ? _a : props.opacity;\n    var rgb = props.color === 'white' ? '255, 255, 255' : '0, 0, 0';\n    return \"rgba(\" + rgb + \", \" + opacity + \")\";\n  }, [props.color, props.opacity]);\n\n  var _useState = useState(props.visible),\n      active = _useState[0],\n      setActive = _useState[1];\n\n  var _useSpring = useSpring({\n    opacity: props.visible ? 1 : 0,\n    config: {\n      precision: 0.01,\n      mass: 1,\n      tension: 200,\n      friction: 30\n    },\n    onStart: function onStart() {\n      setActive(true);\n    },\n    onRest: function onRest() {\n      var _a, _b;\n\n      setActive(props.visible);\n\n      if (props.visible) {\n        (_a = props.afterShow) === null || _a === void 0 ? void 0 : _a.call(props);\n      } else {\n        (_b = props.afterClose) === null || _b === void 0 ? void 0 : _b.call(props);\n      }\n    }\n  }),\n      opacity = _useSpring.opacity;\n\n  var shouldRender = useShouldRender(active, props.forceRender, props.destroyOnClose);\n  var node = withStopPropagation(props.stopPropagation, withNativeProps(props, /*#__PURE__*/React.createElement(animated.div, {\n    className: classPrefix,\n    ref: ref,\n    style: Object.assign(Object.assign({}, props.style), {\n      background: background,\n      opacity: opacity,\n      display: active ? 'unset' : 'none'\n    })\n  }, props.onMaskClick && /*#__PURE__*/React.createElement(\"div\", {\n    className: classPrefix + \"-aria-button\",\n    role: 'button',\n    \"aria-label\": locale.Mask.name,\n    onClick: props.onMaskClick\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: classPrefix + \"-content\"\n  }, shouldRender && props.children))));\n  return renderToContainer(props.getContainer, node);\n};"]},"metadata":{},"sourceType":"module"}