{"ast":null,"code":"import { V, c as computeRubberband } from './maths-b2a210f4.esm.js';\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n\n    if (enumerableOnly) {\n      symbols = symbols.filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n      });\n    }\n\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nconst EVENT_TYPE_MAP = {\n  pointer: {\n    start: 'down',\n    change: 'move',\n    end: 'up'\n  },\n  mouse: {\n    start: 'down',\n    change: 'move',\n    end: 'up'\n  },\n  touch: {\n    start: 'start',\n    change: 'move',\n    end: 'end'\n  },\n  gesture: {\n    start: 'start',\n    change: 'change',\n    end: 'end'\n  }\n};\n\nfunction capitalize(string) {\n  if (!string) return '';\n  return string[0].toUpperCase() + string.slice(1);\n}\n\nfunction toHandlerProp(device, action = '', capture = false) {\n  const deviceProps = EVENT_TYPE_MAP[device];\n  const actionKey = deviceProps ? deviceProps[action] || action : action;\n  return 'on' + capitalize(device) + capitalize(actionKey) + (capture ? 'Capture' : '');\n}\n\nfunction toDomEventType(device, action = '') {\n  const deviceProps = EVENT_TYPE_MAP[device];\n  const actionKey = deviceProps ? deviceProps[action] || action : action;\n  return device + actionKey;\n}\n\nfunction isTouch(event) {\n  return 'touches' in event;\n}\n\nfunction getCurrentTargetTouchList(event) {\n  return Array.from(event.touches).filter(e => {\n    var _event$currentTarget, _event$currentTarget$;\n\n    return e.target === event.currentTarget || ((_event$currentTarget = event.currentTarget) === null || _event$currentTarget === void 0 ? void 0 : (_event$currentTarget$ = _event$currentTarget.contains) === null || _event$currentTarget$ === void 0 ? void 0 : _event$currentTarget$.call(_event$currentTarget, e.target));\n  });\n}\n\nfunction getTouchList(event) {\n  return event.type === 'touchend' ? event.changedTouches : event.targetTouches;\n}\n\nfunction getValueEvent(event) {\n  return isTouch(event) ? getTouchList(event)[0] : event;\n}\n\nfunction distanceAngle(P1, P2) {\n  const dx = P2.clientX - P1.clientX;\n  const dy = P2.clientY - P1.clientY;\n  const cx = (P2.clientX + P1.clientX) / 2;\n  const cy = (P2.clientY + P1.clientY) / 2;\n  const distance = Math.hypot(dx, dy);\n  const angle = -(Math.atan2(dx, dy) * 180) / Math.PI;\n  const origin = [cx, cy];\n  return {\n    angle,\n    distance,\n    origin\n  };\n}\n\nfunction touchIds(event) {\n  return getCurrentTargetTouchList(event).map(touch => touch.identifier);\n}\n\nfunction touchDistanceAngle(event, ids) {\n  const [P1, P2] = Array.from(event.touches).filter(touch => ids.includes(touch.identifier));\n  return distanceAngle(P1, P2);\n}\n\nfunction pointerId(event) {\n  const valueEvent = getValueEvent(event);\n  return isTouch(event) ? valueEvent.identifier : valueEvent.pointerId;\n}\n\nfunction pointerValues(event) {\n  const valueEvent = getValueEvent(event);\n  return [valueEvent.clientX, valueEvent.clientY];\n}\n\nconst LINE_HEIGHT = 40;\nconst PAGE_HEIGHT = 800;\n\nfunction wheelValues(event) {\n  let {\n    deltaX,\n    deltaY,\n    deltaMode\n  } = event;\n\n  if (deltaMode === 1) {\n    deltaX *= LINE_HEIGHT;\n    deltaY *= LINE_HEIGHT;\n  } else if (deltaMode === 2) {\n    deltaX *= PAGE_HEIGHT;\n    deltaY *= PAGE_HEIGHT;\n  }\n\n  return [deltaX, deltaY];\n}\n\nfunction scrollValues(event) {\n  var _ref, _ref2;\n\n  const {\n    scrollX,\n    scrollY,\n    scrollLeft,\n    scrollTop\n  } = event.currentTarget;\n  return [(_ref = scrollX !== null && scrollX !== void 0 ? scrollX : scrollLeft) !== null && _ref !== void 0 ? _ref : 0, (_ref2 = scrollY !== null && scrollY !== void 0 ? scrollY : scrollTop) !== null && _ref2 !== void 0 ? _ref2 : 0];\n}\n\nfunction getEventDetails(event) {\n  const payload = {};\n  if ('buttons' in event) payload.buttons = event.buttons;\n\n  if ('shiftKey' in event) {\n    const {\n      shiftKey,\n      altKey,\n      metaKey,\n      ctrlKey\n    } = event;\n    Object.assign(payload, {\n      shiftKey,\n      altKey,\n      metaKey,\n      ctrlKey\n    });\n  }\n\n  return payload;\n}\n\nfunction call(v, ...args) {\n  if (typeof v === 'function') {\n    return v(...args);\n  } else {\n    return v;\n  }\n}\n\nfunction noop() {}\n\nfunction chain(...fns) {\n  if (fns.length === 0) return noop;\n  if (fns.length === 1) return fns[0];\n  return function () {\n    let result;\n\n    for (const fn of fns) {\n      result = fn.apply(this, arguments) || result;\n    }\n\n    return result;\n  };\n}\n\nfunction assignDefault(value, fallback) {\n  return Object.assign({}, fallback, value || {});\n}\n\nconst BEFORE_LAST_KINEMATICS_DELAY = 32;\n\nclass Engine {\n  constructor(ctrl, args, key) {\n    this.ctrl = ctrl;\n    this.args = args;\n    this.key = key;\n\n    if (!this.state) {\n      this.state = {\n        values: [0, 0],\n        initial: [0, 0]\n      };\n      if (this.init) this.init();\n      this.reset();\n    }\n  }\n\n  get state() {\n    return this.ctrl.state[this.key];\n  }\n\n  set state(state) {\n    this.ctrl.state[this.key] = state;\n  }\n\n  get shared() {\n    return this.ctrl.state.shared;\n  }\n\n  get eventStore() {\n    return this.ctrl.gestureEventStores[this.key];\n  }\n\n  get timeoutStore() {\n    return this.ctrl.gestureTimeoutStores[this.key];\n  }\n\n  get config() {\n    return this.ctrl.config[this.key];\n  }\n\n  get sharedConfig() {\n    return this.ctrl.config.shared;\n  }\n\n  get handler() {\n    return this.ctrl.handlers[this.key];\n  }\n\n  reset() {\n    const {\n      state,\n      shared,\n      config,\n      ingKey,\n      args\n    } = this;\n    const {\n      transform,\n      threshold\n    } = config;\n    shared[ingKey] = state._active = state.active = state._blocked = state._force = false;\n    state._step = [false, false];\n    state.intentional = false;\n    state._movement = [0, 0];\n    state._distance = [0, 0];\n    state._delta = [0, 0];\n    state._threshold = V.sub(transform(threshold), transform([0, 0])).map(Math.abs);\n    state._bounds = [[-Infinity, Infinity], [-Infinity, Infinity]];\n    state.args = args;\n    state.axis = undefined;\n    state.memo = undefined;\n    state.elapsedTime = 0;\n    state.direction = [0, 0];\n    state.distance = [0, 0];\n    state.velocity = [0, 0];\n    state.movement = [0, 0];\n    state.delta = [0, 0];\n    state.timeStamp = 0;\n  }\n\n  start(event) {\n    const state = this.state;\n    const config = this.config;\n\n    if (!state._active) {\n      this.reset();\n      state._active = true;\n      state.target = event.target;\n      state.currentTarget = event.currentTarget;\n      state.initial = state.values;\n      state.lastOffset = config.from ? call(config.from, state) : state.offset;\n      state.offset = state.lastOffset;\n    }\n\n    state.startTime = state.timeStamp = event.timeStamp;\n  }\n\n  compute(event) {\n    const {\n      state,\n      config,\n      shared\n    } = this;\n    state.args = this.args;\n    let dt = 0;\n\n    if (event) {\n      state.event = event;\n      if (config.preventDefault && event.cancelable) state.event.preventDefault();\n      state.type = event.type;\n      shared.touches = this.ctrl.pointerIds.size || this.ctrl.touchIds.size;\n      shared.locked = !!document.pointerLockElement;\n      Object.assign(shared, getEventDetails(event));\n      shared.down = shared.pressed = shared.buttons % 2 === 1 || shared.touches > 0;\n      dt = event.timeStamp - state.timeStamp;\n      state.timeStamp = event.timeStamp;\n      state.elapsedTime = state.timeStamp - state.startTime;\n    }\n\n    if (state._active) {\n      const _absoluteDelta = state._delta.map(Math.abs);\n\n      V.addTo(state._distance, _absoluteDelta);\n    }\n\n    const [_m0, _m1] = config.transform(state._movement);\n\n    if (process.env.NODE_ENV === 'development') {\n      const isNumberAndNotNaN = v => typeof v === 'number' && !Number.isNaN(v);\n\n      if (!isNumberAndNotNaN(_m0) || !isNumberAndNotNaN(_m1)) {\n        console.warn(`[@use-gesture]: config.transform() must produce a valid result, but it was: [${_m0},${_m1}]`);\n      }\n    }\n\n    const [_t0, _t1] = state._threshold;\n    let [_s0, _s1] = state._step;\n    if (_s0 === false) _s0 = Math.abs(_m0) >= _t0 && Math.sign(_m0) * _t0;\n    if (_s1 === false) _s1 = Math.abs(_m1) >= _t1 && Math.sign(_m1) * _t1;\n    state.intentional = _s0 !== false || _s1 !== false;\n    if (!state.intentional) return;\n    state._step = [_s0, _s1];\n    const movement = [0, 0];\n    movement[0] = _s0 !== false ? _m0 - _s0 : 0;\n    movement[1] = _s1 !== false ? _m1 - _s1 : 0;\n    if (this.intent) this.intent(movement);\n\n    if (state._active && !state._blocked || state.active) {\n      state.first = state._active && !state.active;\n      state.last = !state._active && state.active;\n      state.active = shared[this.ingKey] = state._active;\n\n      if (event) {\n        if (state.first) {\n          if ('bounds' in config) state._bounds = call(config.bounds, state);\n          if (this.setup) this.setup();\n        }\n\n        state.movement = movement;\n        const previousOffset = state.offset;\n        this.computeOffset();\n\n        if (!state.last || dt > BEFORE_LAST_KINEMATICS_DELAY) {\n          state.delta = V.sub(state.offset, previousOffset);\n          const absoluteDelta = state.delta.map(Math.abs);\n          V.addTo(state.distance, absoluteDelta);\n          state.direction = state.delta.map(Math.sign);\n\n          if (!state.first && dt > 0) {\n            state.velocity = [absoluteDelta[0] / dt, absoluteDelta[1] / dt];\n          }\n        }\n      }\n    }\n\n    const rubberband = state._active ? config.rubberband || [0, 0] : [0, 0];\n    state.offset = computeRubberband(state._bounds, state.offset, rubberband);\n    this.computeMovement();\n  }\n\n  emit() {\n    const state = this.state;\n    const shared = this.shared;\n    const config = this.config;\n    if (!state._active) this.clean();\n    if ((state._blocked || !state.intentional) && !state._force && !config.triggerAllEvents) return;\n    const memo = this.handler(_objectSpread2(_objectSpread2(_objectSpread2({}, shared), state), {}, {\n      [this.aliasKey]: state.values\n    }));\n    if (memo !== undefined) state.memo = memo;\n  }\n\n  clean() {\n    this.eventStore.clean();\n    this.timeoutStore.clean();\n  }\n\n}\n\nfunction selectAxis([dx, dy]) {\n  const d = Math.abs(dx) - Math.abs(dy);\n  if (d > 0) return 'x';\n  if (d < 0) return 'y';\n  return undefined;\n}\n\nfunction restrictVectorToAxis(v, axis) {\n  switch (axis) {\n    case 'x':\n      v[1] = 0;\n      break;\n\n    case 'y':\n      v[0] = 0;\n      break;\n  }\n}\n\nclass CoordinatesEngine extends Engine {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"aliasKey\", 'xy');\n  }\n\n  reset() {\n    super.reset();\n    this.state.axis = undefined;\n  }\n\n  init() {\n    this.state.offset = [0, 0];\n    this.state.lastOffset = [0, 0];\n  }\n\n  computeOffset() {\n    this.state.offset = V.add(this.state.lastOffset, this.state.movement);\n  }\n\n  computeMovement() {\n    this.state.movement = V.sub(this.state.offset, this.state.lastOffset);\n  }\n\n  intent(v) {\n    this.state.axis = this.state.axis || selectAxis(v);\n    this.state._blocked = (this.config.lockDirection || !!this.config.axis) && !this.state.axis || !!this.config.axis && this.config.axis !== this.state.axis;\n    if (this.state._blocked) return;\n\n    if (this.config.axis || this.config.lockDirection) {\n      restrictVectorToAxis(v, this.state.axis);\n    }\n  }\n\n}\n\nconst DEFAULT_RUBBERBAND = 0.15;\nconst commonConfigResolver = {\n  enabled(value = true) {\n    return value;\n  },\n\n  preventDefault(value = false) {\n    return value;\n  },\n\n  triggerAllEvents(value = false) {\n    return value;\n  },\n\n  rubberband(value = 0) {\n    switch (value) {\n      case true:\n        return [DEFAULT_RUBBERBAND, DEFAULT_RUBBERBAND];\n\n      case false:\n        return [0, 0];\n\n      default:\n        return V.toVector(value);\n    }\n  },\n\n  from(value) {\n    if (typeof value === 'function') return value;\n    if (value != null) return V.toVector(value);\n  },\n\n  transform(value, _k, config) {\n    return value || config.shared.transform;\n  },\n\n  threshold(value) {\n    return V.toVector(value, 0);\n  }\n\n};\n\nif (process.env.NODE_ENV === 'development') {\n  Object.assign(commonConfigResolver, {\n    domTarget(value) {\n      if (value !== undefined) {\n        throw Error(`[@use-gesture]: \\`domTarget\\` option has been renamed to \\`target\\`.`);\n      }\n    },\n\n    lockDirection(value) {\n      if (value !== undefined) {\n        throw Error(`[@use-gesture]: \\`lockDirection\\` option has been merged with \\`axis\\`. Use it as in \\`{ axis: 'lock' }\\``);\n      }\n    },\n\n    initial(value) {\n      if (value !== undefined) {\n        throw Error(`[@use-gesture]: \\`initial\\` option has been renamed to \\`from\\`.`);\n      }\n    }\n\n  });\n}\n\nconst coordinatesConfigResolver = _objectSpread2(_objectSpread2({}, commonConfigResolver), {}, {\n  axis(_v, _k, {\n    axis\n  }) {\n    this.lockDirection = axis === 'lock';\n    if (!this.lockDirection) return axis;\n  },\n\n  bounds(value = {}) {\n    if (typeof value === 'function') {\n      return state => coordinatesConfigResolver.bounds(value(state));\n    }\n\n    if ('current' in value) {\n      return () => value.current;\n    }\n\n    if (typeof HTMLElement === 'function' && value instanceof HTMLElement) {\n      return value;\n    }\n\n    const {\n      left = -Infinity,\n      right = Infinity,\n      top = -Infinity,\n      bottom = Infinity\n    } = value;\n    return [[left, right], [top, bottom]];\n  }\n\n});\n\nconst DISPLACEMENT = 10;\nconst KEYS_DELTA_MAP = {\n  ArrowRight: (factor = 1) => [DISPLACEMENT * factor, 0],\n  ArrowLeft: (factor = 1) => [-DISPLACEMENT * factor, 0],\n  ArrowUp: (factor = 1) => [0, -DISPLACEMENT * factor],\n  ArrowDown: (factor = 1) => [0, DISPLACEMENT * factor]\n};\n\nclass DragEngine extends CoordinatesEngine {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"ingKey\", 'dragging');\n  }\n\n  reset() {\n    super.reset();\n    const state = this.state;\n    state._pointerId = undefined;\n    state._pointerActive = false;\n    state._keyboardActive = false;\n    state._preventScroll = false;\n    state._delayed = false;\n    state.swipe = [0, 0];\n    state.tap = false;\n    state.canceled = false;\n    state.cancel = this.cancel.bind(this);\n  }\n\n  setup() {\n    const state = this.state;\n\n    if (state._bounds instanceof HTMLElement) {\n      const boundRect = state._bounds.getBoundingClientRect();\n\n      const targetRect = state.currentTarget.getBoundingClientRect();\n      const _bounds = {\n        left: boundRect.left - targetRect.left + state.offset[0],\n        right: boundRect.right - targetRect.right + state.offset[0],\n        top: boundRect.top - targetRect.top + state.offset[1],\n        bottom: boundRect.bottom - targetRect.bottom + state.offset[1]\n      };\n      state._bounds = coordinatesConfigResolver.bounds(_bounds);\n    }\n  }\n\n  cancel() {\n    const state = this.state;\n    if (state.canceled) return;\n    state.canceled = true;\n    state._active = false;\n    setTimeout(() => {\n      this.compute();\n      this.emit();\n    }, 0);\n  }\n\n  setActive() {\n    this.state._active = this.state._pointerActive || this.state._keyboardActive;\n  }\n\n  clean() {\n    this.pointerClean();\n    this.state._pointerActive = false;\n    this.state._keyboardActive = false;\n    super.clean();\n  }\n\n  pointerDown(event) {\n    const config = this.config;\n    const state = this.state;\n    if (event.buttons != null && event.buttons !== config.pointerButtons) return;\n    this.ctrl.setEventIds(event);\n\n    if (config.pointerCapture) {\n      event.target.setPointerCapture(event.pointerId);\n    }\n\n    if (state._pointerActive) return;\n    this.start(event);\n    this.setupPointer(event);\n    state._pointerId = pointerId(event);\n    state._pointerActive = true;\n    state.values = pointerValues(event);\n    state.initial = state.values;\n\n    if (config.preventScroll) {\n      this.setupScrollPrevention(event);\n    } else if (config.delay > 0) {\n      this.setupDelayTrigger(event);\n    } else {\n      this.startPointerDrag(event);\n    }\n  }\n\n  startPointerDrag(event) {\n    const state = this.state;\n    state._active = true;\n    state._preventScroll = true;\n    state._delayed = false;\n    this.compute(event);\n    this.emit();\n  }\n\n  pointerMove(event) {\n    const state = this.state;\n    const config = this.config;\n    if (!state._pointerActive) return;\n    if (state.type === event.type && event.timeStamp === state.timeStamp) return;\n    const id = pointerId(event);\n    if (state._pointerId && id !== state._pointerId) return;\n    const values = pointerValues(event);\n\n    if (document.pointerLockElement === event.target) {\n      state._delta = [event.movementX, event.movementY];\n    } else {\n      state._delta = V.sub(values, state.values);\n      state.values = values;\n    }\n\n    V.addTo(state._movement, state._delta);\n    this.compute(event);\n\n    if (state._delayed) {\n      this.timeoutStore.remove('dragDelay');\n      state.active = false;\n      this.startPointerDrag(event);\n      return;\n    }\n\n    if (config.preventScroll && !state._preventScroll) {\n      if (state.axis) {\n        if (state.axis === config.preventScrollAxis || config.preventScrollAxis === 'xy') {\n          state._active = false;\n          this.clean();\n          return;\n        } else {\n          this.timeoutStore.remove('startPointerDrag');\n          this.startPointerDrag(event);\n          return;\n        }\n      } else {\n        return;\n      }\n    }\n\n    this.emit();\n  }\n\n  pointerUp(event) {\n    this.ctrl.setEventIds(event);\n\n    try {\n      if (this.config.pointerCapture && event.target.hasPointerCapture(event.pointerId)) {\n        ;\n        event.target.releasePointerCapture(event.pointerId);\n      }\n    } catch (_unused) {\n      if (process.env.NODE_ENV === 'development') {\n        console.warn(`[@use-gesture]: If you see this message, it's likely that you're using an outdated version of \\`@react-three/fiber\\`. \\n\\nPlease upgrade to the latest version.`);\n      }\n    }\n\n    const state = this.state;\n    const config = this.config;\n    if (!state._pointerActive) return;\n    const id = pointerId(event);\n    if (state._pointerId && id !== state._pointerId) return;\n    this.state._pointerActive = false;\n    this.setActive();\n    this.compute(event);\n    const [dx, dy] = state._distance;\n    state.tap = dx <= 3 && dy <= 3;\n\n    if (state.tap && config.filterTaps) {\n      state._force = true;\n    } else {\n      const [dirx, diry] = state.direction;\n      const [vx, vy] = state.velocity;\n      const [mx, my] = state.movement;\n      const [svx, svy] = config.swipe.velocity;\n      const [sx, sy] = config.swipe.distance;\n      const sdt = config.swipe.duration;\n\n      if (state.elapsedTime < sdt) {\n        if (Math.abs(vx) > svx && Math.abs(mx) > sx) state.swipe[0] = dirx;\n        if (Math.abs(vy) > svy && Math.abs(my) > sy) state.swipe[1] = diry;\n      }\n    }\n\n    this.emit();\n  }\n\n  pointerClick(event) {\n    if (!this.state.tap) {\n      event.preventDefault();\n      event.stopPropagation();\n    }\n  }\n\n  setupPointer(event) {\n    const config = this.config;\n    let device = config.device;\n\n    if (process.env.NODE_ENV === 'development') {\n      try {\n        if (device === 'pointer') {\n          const currentTarget = 'uv' in event ? event.sourceEvent.currentTarget : event.currentTarget;\n          const style = window.getComputedStyle(currentTarget);\n\n          if (style.touchAction === 'auto') {\n            console.warn(`[@use-gesture]: The drag target has its \\`touch-action\\` style property set to \\`auto\\`. It is recommended to add \\`touch-action: 'none'\\` so that the drag gesture behaves correctly on touch-enabled devices. For more information read this: https://use-gesture.netlify.app/docs/extras/#touch-action.\\n\\nThis message will only show in development mode. It won't appear in production. If this is intended, you can ignore it.`, currentTarget);\n          }\n        }\n      } catch (_unused2) {}\n    }\n\n    if (config.pointerLock) {\n      event.currentTarget.requestPointerLock();\n    }\n\n    if (!config.pointerCapture) {\n      this.eventStore.add(this.sharedConfig.window, device, 'change', this.pointerMove.bind(this));\n      this.eventStore.add(this.sharedConfig.window, device, 'end', this.pointerUp.bind(this));\n    }\n  }\n\n  pointerClean() {\n    if (this.config.pointerLock && document.pointerLockElement === this.state.currentTarget) {\n      document.exitPointerLock();\n    }\n  }\n\n  preventScroll(event) {\n    if (this.state._preventScroll && event.cancelable) {\n      event.preventDefault();\n    }\n  }\n\n  setupScrollPrevention(event) {\n    persistEvent(event);\n    this.eventStore.add(this.sharedConfig.window, 'touch', 'change', this.preventScroll.bind(this), {\n      passive: false\n    });\n    this.eventStore.add(this.sharedConfig.window, 'touch', 'end', this.clean.bind(this), {\n      passive: false\n    });\n    this.eventStore.add(this.sharedConfig.window, 'touch', 'cancel', this.clean.bind(this), {\n      passive: false\n    });\n    this.timeoutStore.add('startPointerDrag', this.startPointerDrag.bind(this), this.config.preventScroll, event);\n  }\n\n  setupDelayTrigger(event) {\n    this.state._delayed = true;\n    this.timeoutStore.add('dragDelay', this.startPointerDrag.bind(this), this.config.delay, event);\n  }\n\n  keyDown(event) {\n    const deltaFn = KEYS_DELTA_MAP[event.key];\n    const state = this.state;\n\n    if (deltaFn) {\n      const factor = event.shiftKey ? 10 : event.altKey ? 0.1 : 1;\n      state._delta = deltaFn(factor);\n      this.start(event);\n      state._keyboardActive = true;\n      V.addTo(state._movement, state._delta);\n      this.compute(event);\n      this.emit();\n    }\n  }\n\n  keyUp(event) {\n    if (!(event.key in KEYS_DELTA_MAP)) return;\n    this.state._keyboardActive = false;\n    this.setActive();\n    this.compute(event);\n    this.emit();\n  }\n\n  bind(bindFunction) {\n    const device = this.config.device;\n    bindFunction(device, 'start', this.pointerDown.bind(this));\n\n    if (this.config.pointerCapture) {\n      bindFunction(device, 'change', this.pointerMove.bind(this));\n      bindFunction(device, 'end', this.pointerUp.bind(this));\n      bindFunction(device, 'cancel', this.pointerUp.bind(this));\n    }\n\n    bindFunction('key', 'down', this.keyDown.bind(this));\n    bindFunction('key', 'up', this.keyUp.bind(this));\n\n    if (this.config.filterTaps) {\n      bindFunction('click', '', this.pointerClick.bind(this), {\n        capture: true\n      });\n    }\n  }\n\n}\n\nfunction persistEvent(event) {\n  'persist' in event && typeof event.persist === 'function' && event.persist();\n}\n\nconst isBrowser = typeof window !== 'undefined' && window.document && window.document.createElement;\n\nfunction supportsTouchEvents() {\n  return isBrowser && 'ontouchstart' in window;\n}\n\nfunction isTouchScreen() {\n  return supportsTouchEvents() || isBrowser && window.navigator.maxTouchPoints > 1;\n}\n\nfunction supportsPointerEvents() {\n  return isBrowser && 'onpointerdown' in window;\n}\n\nfunction supportsPointerLock() {\n  return isBrowser && 'exitPointerLock' in window.document;\n}\n\nfunction supportsGestureEvents() {\n  try {\n    return 'constructor' in GestureEvent;\n  } catch (e) {\n    return false;\n  }\n}\n\nconst SUPPORT = {\n  isBrowser,\n  gesture: supportsGestureEvents(),\n  touch: supportsTouchEvents(),\n  touchscreen: isTouchScreen(),\n  pointer: supportsPointerEvents(),\n  pointerLock: supportsPointerLock()\n};\nconst DEFAULT_PREVENT_SCROLL_DELAY = 250;\nconst DEFAULT_DRAG_DELAY = 180;\nconst DEFAULT_SWIPE_VELOCITY = 0.5;\nconst DEFAULT_SWIPE_DISTANCE = 50;\nconst DEFAULT_SWIPE_DURATION = 250;\n\nconst dragConfigResolver = _objectSpread2(_objectSpread2({}, coordinatesConfigResolver), {}, {\n  pointerLock(_v, _k, {\n    pointer: {\n      lock = false,\n      touch = false\n    } = {}\n  }) {\n    this.useTouch = SUPPORT.touch && touch;\n    return SUPPORT.pointerLock && lock;\n  },\n\n  device(_v, _k) {\n    if (this.useTouch) return 'touch';\n    if (this.pointerLock) return 'mouse';\n    if (SUPPORT.pointer) return 'pointer';\n    if (SUPPORT.touch) return 'touch';\n    return 'mouse';\n  },\n\n  preventScroll(value = false, _k, {\n    preventScrollAxis = 'y'\n  }) {\n    if (preventScrollAxis) this.preventScrollAxis = preventScrollAxis;\n    if (!SUPPORT.touchscreen) return false;\n    if (typeof value === 'number') return value;\n    return value ? DEFAULT_PREVENT_SCROLL_DELAY : false;\n  },\n\n  pointerCapture(_v, _k, {\n    pointer: {\n      capture = true,\n      buttons = 1\n    } = {}\n  }) {\n    this.pointerButtons = buttons;\n    return !this.pointerLock && this.device === 'pointer' && capture;\n  },\n\n  threshold(value, _k, {\n    filterTaps = false,\n    axis = undefined\n  }) {\n    const threshold = V.toVector(value, filterTaps ? 3 : axis ? 1 : 0);\n    this.filterTaps = filterTaps;\n    return threshold;\n  },\n\n  swipe({\n    velocity = DEFAULT_SWIPE_VELOCITY,\n    distance = DEFAULT_SWIPE_DISTANCE,\n    duration = DEFAULT_SWIPE_DURATION\n  } = {}) {\n    return {\n      velocity: this.transform(V.toVector(velocity)),\n      distance: this.transform(V.toVector(distance)),\n      duration\n    };\n  },\n\n  delay(value = 0) {\n    switch (value) {\n      case true:\n        return DEFAULT_DRAG_DELAY;\n\n      case false:\n        return 0;\n\n      default:\n        return value;\n    }\n  }\n\n});\n\nif (process.env.NODE_ENV === 'development') {\n  Object.assign(dragConfigResolver, {\n    useTouch(value) {\n      if (value !== undefined) {\n        throw Error(`[@use-gesture]: \\`useTouch\\` option has been renamed to \\`pointer.touch\\`. Use it as in \\`{ pointer: { touch: true } }\\`.`);\n      }\n    },\n\n    experimental_preventWindowScrollY(value) {\n      if (value !== undefined) {\n        throw Error(`[@use-gesture]: \\`experimental_preventWindowScrollY\\` option has been renamed to \\`preventScroll\\`.`);\n      }\n    },\n\n    swipeVelocity(value) {\n      if (value !== undefined) {\n        throw Error(`[@use-gesture]: \\`swipeVelocity\\` option has been renamed to \\`swipe.velocity\\`. Use it as in \\`{ swipe: { velocity: 0.5 } }\\`.`);\n      }\n    },\n\n    swipeDistance(value) {\n      if (value !== undefined) {\n        throw Error(`[@use-gesture]: \\`swipeDistance\\` option has been renamed to \\`swipe.distance\\`. Use it as in \\`{ swipe: { distance: 50 } }\\`.`);\n      }\n    },\n\n    swipeDuration(value) {\n      if (value !== undefined) {\n        throw Error(`[@use-gesture]: \\`swipeDuration\\` option has been renamed to \\`swipe.duration\\`. Use it as in \\`{ swipe: { duration: 250 } }\\`.`);\n      }\n    }\n\n  });\n}\n\nconst SCALE_ANGLE_RATIO_INTENT_DEG = 30;\nconst PINCH_WHEEL_RATIO = 36;\n\nclass PinchEngine extends Engine {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"ingKey\", 'pinching');\n\n    _defineProperty(this, \"aliasKey\", 'da');\n  }\n\n  init() {\n    this.state.offset = [1, 0];\n    this.state.lastOffset = [1, 0];\n    this.state._pointerEvents = new Map();\n  }\n\n  reset() {\n    super.reset();\n    const state = this.state;\n    state._touchIds = [];\n    state.canceled = false;\n    state.cancel = this.cancel.bind(this);\n    state.turns = 0;\n  }\n\n  computeOffset() {\n    const {\n      type,\n      movement,\n      lastOffset\n    } = this.state;\n\n    if (type === 'wheel') {\n      this.state.offset = V.add(movement, lastOffset);\n    } else {\n      this.state.offset = [(1 + movement[0]) * lastOffset[0], movement[1] + lastOffset[1]];\n    }\n  }\n\n  computeMovement() {\n    const {\n      offset,\n      lastOffset\n    } = this.state;\n    this.state.movement = [offset[0] / lastOffset[0], offset[1] - lastOffset[1]];\n  }\n\n  intent(v) {\n    const state = this.state;\n\n    if (!state.axis) {\n      const axisMovementDifference = Math.abs(v[0]) * SCALE_ANGLE_RATIO_INTENT_DEG - Math.abs(v[1]);\n      if (axisMovementDifference < 0) state.axis = 'angle';else if (axisMovementDifference > 0) state.axis = 'scale';\n    }\n\n    if (this.config.lockDirection) {\n      if (state.axis === 'scale') v[1] = 0;else if (state.axis === 'angle') v[0] = 0;\n    }\n  }\n\n  cancel() {\n    const state = this.state;\n    if (state.canceled) return;\n    setTimeout(() => {\n      state.canceled = true;\n      state._active = false;\n      this.compute();\n      this.emit();\n    }, 0);\n  }\n\n  touchStart(event) {\n    this.ctrl.setEventIds(event);\n    const state = this.state;\n    const ctrlTouchIds = this.ctrl.touchIds;\n\n    if (state._active) {\n      if (state._touchIds.every(id => ctrlTouchIds.has(id))) return;\n    }\n\n    if (ctrlTouchIds.size < 2) return;\n    this.start(event);\n    state._touchIds = Array.from(ctrlTouchIds).slice(0, 2);\n    const payload = touchDistanceAngle(event, state._touchIds);\n    this.pinchStart(event, payload);\n  }\n\n  pointerStart(event) {\n    if (event.buttons != null && event.buttons % 2 !== 1) return;\n    this.ctrl.setEventIds(event);\n    event.target.setPointerCapture(event.pointerId);\n    const state = this.state;\n    const _pointerEvents = state._pointerEvents;\n    const ctrlPointerIds = this.ctrl.pointerIds;\n\n    if (state._active) {\n      if (Array.from(_pointerEvents.keys()).every(id => ctrlPointerIds.has(id))) return;\n    }\n\n    if (_pointerEvents.size < 2) {\n      _pointerEvents.set(event.pointerId, event);\n    }\n\n    if (state._pointerEvents.size < 2) return;\n    this.start(event);\n    const payload = distanceAngle(...Array.from(_pointerEvents.values()));\n    this.pinchStart(event, payload);\n  }\n\n  pinchStart(event, payload) {\n    const state = this.state;\n    state.origin = payload.origin;\n    state.values = [payload.distance, payload.angle];\n    state.initial = state.values;\n    this.compute(event);\n    this.emit();\n  }\n\n  touchMove(event) {\n    if (!this.state._active) return;\n    const payload = touchDistanceAngle(event, this.state._touchIds);\n    this.pinchMove(event, payload);\n  }\n\n  pointerMove(event) {\n    const _pointerEvents = this.state._pointerEvents;\n\n    if (_pointerEvents.has(event.pointerId)) {\n      _pointerEvents.set(event.pointerId, event);\n    }\n\n    if (!this.state._active) return;\n    const payload = distanceAngle(...Array.from(_pointerEvents.values()));\n    this.pinchMove(event, payload);\n  }\n\n  pinchMove(event, payload) {\n    const state = this.state;\n    const prev_a = state.values[1];\n    const delta_a = payload.angle - prev_a;\n    let delta_turns = 0;\n    if (Math.abs(delta_a) > 270) delta_turns += Math.sign(delta_a);\n    state.values = [payload.distance, payload.angle - 360 * delta_turns];\n    state.origin = payload.origin;\n    state.turns = delta_turns;\n    state._movement = [state.values[0] / state.initial[0] - 1, state.values[1] - state.initial[1]];\n    this.compute(event);\n    this.emit();\n  }\n\n  touchEnd(event) {\n    this.ctrl.setEventIds(event);\n    if (!this.state._active) return;\n\n    if (this.state._touchIds.some(id => !this.ctrl.touchIds.has(id))) {\n      this.state._active = false;\n      this.compute(event);\n      this.emit();\n    }\n  }\n\n  pointerEnd(event) {\n    const state = this.state;\n    this.ctrl.setEventIds(event);\n\n    try {\n      event.target.releasePointerCapture(event.pointerId);\n    } catch (_unused) {}\n\n    if (state._pointerEvents.has(event.pointerId)) {\n      state._pointerEvents.delete(event.pointerId);\n    }\n\n    if (!state._active) return;\n\n    if (state._pointerEvents.size < 2) {\n      state._active = false;\n      this.compute(event);\n      this.emit();\n    }\n  }\n\n  gestureStart(event) {\n    if (event.cancelable) event.preventDefault();\n    const state = this.state;\n    if (state._active) return;\n    this.start(event);\n    state.values = [event.scale, event.rotation];\n    state.origin = [event.clientX, event.clientY];\n    this.compute(event);\n    this.emit();\n  }\n\n  gestureMove(event) {\n    if (event.cancelable) event.preventDefault();\n    if (!this.state._active) return;\n    const state = this.state;\n    state.values = [event.scale, event.rotation];\n    state.origin = [event.clientX, event.clientY];\n    const _previousMovement = state._movement;\n    state._movement = [event.scale - 1, event.rotation];\n    state._delta = V.sub(state._movement, _previousMovement);\n    this.compute(event);\n    this.emit();\n  }\n\n  gestureEnd(event) {\n    if (!this.state._active) return;\n    this.state._active = false;\n    this.compute(event);\n    this.emit();\n  }\n\n  wheel(event) {\n    if (!event.ctrlKey) return;\n    if (!this.state._active) this.wheelStart(event);else this.wheelChange(event);\n    this.timeoutStore.add('wheelEnd', this.wheelEnd.bind(this));\n  }\n\n  wheelStart(event) {\n    this.start(event);\n    this.wheelChange(event);\n  }\n\n  wheelChange(event) {\n    const isR3f = ('uv' in event);\n\n    if (!isR3f) {\n      if (event.cancelable) {\n        event.preventDefault();\n      }\n\n      if (process.env.NODE_ENV === 'development' && !event.defaultPrevented) {\n        console.warn(`[@use-gesture]: To properly support zoom on trackpads, try using the \\`target\\` option.\\n\\nThis message will only appear in development mode.`);\n      }\n    }\n\n    const state = this.state;\n    state._delta = [-wheelValues(event)[1] / PINCH_WHEEL_RATIO * state.offset[0], 0];\n    V.addTo(state._movement, state._delta);\n    this.state.origin = [event.clientX, event.clientY];\n    this.compute(event);\n    this.emit();\n  }\n\n  wheelEnd() {\n    if (!this.state._active) return;\n    this.state._active = false;\n    this.compute();\n    this.emit();\n  }\n\n  bind(bindFunction) {\n    const device = this.config.device;\n\n    if (!!device) {\n      bindFunction(device, 'start', this[device + 'Start'].bind(this));\n      bindFunction(device, 'change', this[device + 'Move'].bind(this));\n      bindFunction(device, 'end', this[device + 'End'].bind(this));\n      bindFunction(device, 'cancel', this[device + 'End'].bind(this));\n    } else {\n      bindFunction('wheel', '', this.wheel.bind(this), {\n        passive: false\n      });\n    }\n  }\n\n}\n\nconst pinchConfigResolver = _objectSpread2(_objectSpread2({}, commonConfigResolver), {}, {\n  useTouch(_v, _k, {\n    pointer: {\n      touch = false\n    } = {}\n  }) {\n    return SUPPORT.touch && touch;\n  },\n\n  device(_v, _k, config) {\n    const sharedConfig = config.shared;\n    if (sharedConfig.target && !SUPPORT.touch && SUPPORT.gesture) return 'gesture';\n    if (this.useTouch) return 'touch';\n\n    if (SUPPORT.touchscreen) {\n      if (SUPPORT.pointer) return 'pointer';\n      if (SUPPORT.touch) return 'touch';\n    }\n  },\n\n  bounds(_v, _k, {\n    scaleBounds = {},\n    angleBounds = {}\n  }) {\n    const _scaleBounds = state => {\n      const D = assignDefault(call(scaleBounds, state), {\n        min: -Infinity,\n        max: Infinity\n      });\n      return [D.min, D.max];\n    };\n\n    const _angleBounds = state => {\n      const A = assignDefault(call(angleBounds, state), {\n        min: -Infinity,\n        max: Infinity\n      });\n      return [A.min, A.max];\n    };\n\n    if (typeof scaleBounds !== 'function' && typeof angleBounds !== 'function') return [_scaleBounds(), _angleBounds()];\n    return state => [_scaleBounds(state), _angleBounds(state)];\n  },\n\n  threshold(value, _k, config) {\n    this.lockDirection = config.axis === 'lock';\n    const threshold = V.toVector(value, this.lockDirection ? [0.1, 3] : 0);\n    return threshold;\n  }\n\n});\n\nclass MoveEngine extends CoordinatesEngine {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"ingKey\", 'moving');\n  }\n\n  move(event) {\n    if (this.config.mouseOnly && event.pointerType !== 'mouse') return;\n    if (!this.state._active) this.moveStart(event);else this.moveChange(event);\n    this.timeoutStore.add('moveEnd', this.moveEnd.bind(this));\n  }\n\n  moveStart(event) {\n    this.start(event);\n    const state = this.state;\n    state.values = pointerValues(event);\n    this.compute(event);\n    state.initial = state.values;\n    this.emit();\n  }\n\n  moveChange(event) {\n    if (!this.state._active) return;\n    const values = pointerValues(event);\n    const state = this.state;\n    state._delta = V.sub(values, state.values);\n    V.addTo(state._movement, state._delta);\n    state.values = values;\n    this.compute(event);\n    this.emit();\n  }\n\n  moveEnd(event) {\n    if (!this.state._active) return;\n    this.state._active = false;\n    this.compute(event);\n    this.emit();\n  }\n\n  bind(bindFunction) {\n    bindFunction('pointer', 'change', this.move.bind(this));\n    bindFunction('pointer', 'leave', this.moveEnd.bind(this));\n  }\n\n}\n\nconst moveConfigResolver = _objectSpread2(_objectSpread2({}, coordinatesConfigResolver), {}, {\n  mouseOnly: (value = true) => value\n});\n\nclass ScrollEngine extends CoordinatesEngine {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"ingKey\", 'scrolling');\n  }\n\n  scroll(event) {\n    if (!this.state._active) this.start(event);\n    this.scrollChange(event);\n    this.timeoutStore.add('scrollEnd', this.scrollEnd.bind(this));\n  }\n\n  scrollChange(event) {\n    if (event.cancelable) event.preventDefault();\n    const state = this.state;\n    const values = scrollValues(event);\n    state._delta = V.sub(values, state.values);\n    V.addTo(state._movement, state._delta);\n    state.values = values;\n    this.compute(event);\n    this.emit();\n  }\n\n  scrollEnd() {\n    if (!this.state._active) return;\n    this.state._active = false;\n    this.compute();\n    this.emit();\n  }\n\n  bind(bindFunction) {\n    bindFunction('scroll', '', this.scroll.bind(this));\n  }\n\n}\n\nconst scrollConfigResolver = coordinatesConfigResolver;\n\nclass WheelEngine extends CoordinatesEngine {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"ingKey\", 'wheeling');\n  }\n\n  wheel(event) {\n    if (!this.state._active) this.start(event);\n    this.wheelChange(event);\n    this.timeoutStore.add('wheelEnd', this.wheelEnd.bind(this));\n  }\n\n  wheelChange(event) {\n    const state = this.state;\n    state._delta = wheelValues(event);\n    V.addTo(this.state._movement, state._delta);\n    this.compute(event);\n    this.emit();\n  }\n\n  wheelEnd() {\n    if (!this.state._active) return;\n    this.state._active = false;\n    this.compute();\n    this.emit();\n  }\n\n  bind(bindFunction) {\n    bindFunction('wheel', '', this.wheel.bind(this));\n  }\n\n}\n\nconst wheelConfigResolver = coordinatesConfigResolver;\n\nclass HoverEngine extends CoordinatesEngine {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"ingKey\", 'hovering');\n  }\n\n  enter(event) {\n    if (this.config.mouseOnly && event.pointerType !== 'mouse') return;\n    this.start(event);\n    this.state.values = pointerValues(event);\n    this.compute(event);\n    this.emit();\n  }\n\n  leave(event) {\n    if (this.config.mouseOnly && event.pointerType !== 'mouse') return;\n    const state = this.state;\n    if (!state._active) return;\n    state._active = false;\n    const values = pointerValues(event);\n    state._movement = state._delta = V.sub(values, state.values);\n    state.values = values;\n    this.compute(event);\n    state.delta = state.movement;\n    this.emit();\n  }\n\n  bind(bindFunction) {\n    bindFunction('pointer', 'enter', this.enter.bind(this));\n    bindFunction('pointer', 'leave', this.leave.bind(this));\n  }\n\n}\n\nconst hoverConfigResolver = _objectSpread2(_objectSpread2({}, coordinatesConfigResolver), {}, {\n  mouseOnly: (value = true) => value\n});\n\nconst EngineMap = new Map();\nconst ConfigResolverMap = new Map();\n\nfunction registerAction(action) {\n  EngineMap.set(action.key, action.engine);\n  ConfigResolverMap.set(action.key, action.resolver);\n}\n\nconst dragAction = {\n  key: 'drag',\n  engine: DragEngine,\n  resolver: dragConfigResolver\n};\nconst hoverAction = {\n  key: 'hover',\n  engine: HoverEngine,\n  resolver: hoverConfigResolver\n};\nconst moveAction = {\n  key: 'move',\n  engine: MoveEngine,\n  resolver: moveConfigResolver\n};\nconst pinchAction = {\n  key: 'pinch',\n  engine: PinchEngine,\n  resolver: pinchConfigResolver\n};\nconst scrollAction = {\n  key: 'scroll',\n  engine: ScrollEngine,\n  resolver: scrollConfigResolver\n};\nconst wheelAction = {\n  key: 'wheel',\n  engine: WheelEngine,\n  resolver: wheelConfigResolver\n};\nexport { ConfigResolverMap as C, EngineMap as E, SUPPORT as S, _objectSpread2 as _, _defineProperty as a, touchIds as b, chain as c, toHandlerProp as d, dragAction as e, hoverAction as h, isTouch as i, moveAction as m, pinchAction as p, registerAction as r, scrollAction as s, toDomEventType as t, wheelAction as w };","map":{"version":3,"sources":["/Users/brandonliu/Project/goairmart/antd-demo/node_modules/@use-gesture/core/dist/actions-49482b72.esm.js"],"names":["V","c","computeRubberband","_defineProperty","obj","key","value","Object","defineProperty","enumerable","configurable","writable","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","push","apply","_objectSpread2","target","i","arguments","length","source","forEach","getOwnPropertyDescriptors","defineProperties","EVENT_TYPE_MAP","pointer","start","change","end","mouse","touch","gesture","capitalize","string","toUpperCase","slice","toHandlerProp","device","action","capture","deviceProps","actionKey","toDomEventType","isTouch","event","getCurrentTargetTouchList","Array","from","touches","e","_event$currentTarget","_event$currentTarget$","currentTarget","contains","call","getTouchList","type","changedTouches","targetTouches","getValueEvent","distanceAngle","P1","P2","dx","clientX","dy","clientY","cx","cy","distance","Math","hypot","angle","atan2","PI","origin","touchIds","map","identifier","touchDistanceAngle","ids","includes","pointerId","valueEvent","pointerValues","LINE_HEIGHT","PAGE_HEIGHT","wheelValues","deltaX","deltaY","deltaMode","scrollValues","_ref","_ref2","scrollX","scrollY","scrollLeft","scrollTop","getEventDetails","payload","buttons","shiftKey","altKey","metaKey","ctrlKey","assign","v","args","noop","chain","fns","result","fn","assignDefault","fallback","BEFORE_LAST_KINEMATICS_DELAY","Engine","constructor","ctrl","state","values","initial","init","reset","shared","eventStore","gestureEventStores","timeoutStore","gestureTimeoutStores","config","sharedConfig","handler","handlers","ingKey","transform","threshold","_active","active","_blocked","_force","_step","intentional","_movement","_distance","_delta","_threshold","sub","abs","_bounds","Infinity","axis","undefined","memo","elapsedTime","direction","velocity","movement","delta","timeStamp","lastOffset","offset","startTime","compute","dt","preventDefault","cancelable","pointerIds","size","locked","document","pointerLockElement","down","pressed","_absoluteDelta","addTo","_m0","_m1","process","env","NODE_ENV","isNumberAndNotNaN","Number","isNaN","console","warn","_t0","_t1","_s0","_s1","sign","intent","first","last","bounds","setup","previousOffset","computeOffset","absoluteDelta","rubberband","computeMovement","emit","clean","triggerAllEvents","aliasKey","selectAxis","d","restrictVectorToAxis","CoordinatesEngine","add","lockDirection","DEFAULT_RUBBERBAND","commonConfigResolver","enabled","toVector","_k","domTarget","Error","coordinatesConfigResolver","_v","current","HTMLElement","left","right","top","bottom","DISPLACEMENT","KEYS_DELTA_MAP","ArrowRight","factor","ArrowLeft","ArrowUp","ArrowDown","DragEngine","_pointerId","_pointerActive","_keyboardActive","_preventScroll","_delayed","swipe","tap","canceled","cancel","bind","boundRect","getBoundingClientRect","targetRect","setTimeout","setActive","pointerClean","pointerDown","pointerButtons","setEventIds","pointerCapture","setPointerCapture","setupPointer","preventScroll","setupScrollPrevention","delay","setupDelayTrigger","startPointerDrag","pointerMove","id","movementX","movementY","remove","preventScrollAxis","pointerUp","hasPointerCapture","releasePointerCapture","_unused","filterTaps","dirx","diry","vx","vy","mx","my","svx","svy","sx","sy","sdt","duration","pointerClick","stopPropagation","sourceEvent","style","window","getComputedStyle","touchAction","_unused2","pointerLock","requestPointerLock","exitPointerLock","persistEvent","passive","keyDown","deltaFn","keyUp","bindFunction","persist","isBrowser","createElement","supportsTouchEvents","isTouchScreen","navigator","maxTouchPoints","supportsPointerEvents","supportsPointerLock","supportsGestureEvents","GestureEvent","SUPPORT","touchscreen","DEFAULT_PREVENT_SCROLL_DELAY","DEFAULT_DRAG_DELAY","DEFAULT_SWIPE_VELOCITY","DEFAULT_SWIPE_DISTANCE","DEFAULT_SWIPE_DURATION","dragConfigResolver","lock","useTouch","experimental_preventWindowScrollY","swipeVelocity","swipeDistance","swipeDuration","SCALE_ANGLE_RATIO_INTENT_DEG","PINCH_WHEEL_RATIO","PinchEngine","_pointerEvents","Map","_touchIds","turns","axisMovementDifference","touchStart","ctrlTouchIds","every","has","pinchStart","pointerStart","ctrlPointerIds","set","touchMove","pinchMove","prev_a","delta_a","delta_turns","touchEnd","some","pointerEnd","delete","gestureStart","scale","rotation","gestureMove","_previousMovement","gestureEnd","wheel","wheelStart","wheelChange","wheelEnd","isR3f","defaultPrevented","pinchConfigResolver","scaleBounds","angleBounds","_scaleBounds","D","min","max","_angleBounds","A","MoveEngine","move","mouseOnly","pointerType","moveStart","moveChange","moveEnd","moveConfigResolver","ScrollEngine","scroll","scrollChange","scrollEnd","scrollConfigResolver","WheelEngine","wheelConfigResolver","HoverEngine","enter","leave","hoverConfigResolver","EngineMap","ConfigResolverMap","registerAction","engine","resolver","dragAction","hoverAction","moveAction","pinchAction","scrollAction","wheelAction","C","E","S","_","a","b","h","m","p","r","s","t","w"],"mappings":"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","sourcesContent":["import { V, c as computeRubberband } from './maths-b2a210f4.esm.js';\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n\n    if (enumerableOnly) {\n      symbols = symbols.filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n      });\n    }\n\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nconst EVENT_TYPE_MAP = {\n  pointer: {\n    start: 'down',\n    change: 'move',\n    end: 'up'\n  },\n  mouse: {\n    start: 'down',\n    change: 'move',\n    end: 'up'\n  },\n  touch: {\n    start: 'start',\n    change: 'move',\n    end: 'end'\n  },\n  gesture: {\n    start: 'start',\n    change: 'change',\n    end: 'end'\n  }\n};\n\nfunction capitalize(string) {\n  if (!string) return '';\n  return string[0].toUpperCase() + string.slice(1);\n}\n\nfunction toHandlerProp(device, action = '', capture = false) {\n  const deviceProps = EVENT_TYPE_MAP[device];\n  const actionKey = deviceProps ? deviceProps[action] || action : action;\n  return 'on' + capitalize(device) + capitalize(actionKey) + (capture ? 'Capture' : '');\n}\nfunction toDomEventType(device, action = '') {\n  const deviceProps = EVENT_TYPE_MAP[device];\n  const actionKey = deviceProps ? deviceProps[action] || action : action;\n  return device + actionKey;\n}\nfunction isTouch(event) {\n  return 'touches' in event;\n}\n\nfunction getCurrentTargetTouchList(event) {\n  return Array.from(event.touches).filter(e => {\n    var _event$currentTarget, _event$currentTarget$;\n\n    return e.target === event.currentTarget || ((_event$currentTarget = event.currentTarget) === null || _event$currentTarget === void 0 ? void 0 : (_event$currentTarget$ = _event$currentTarget.contains) === null || _event$currentTarget$ === void 0 ? void 0 : _event$currentTarget$.call(_event$currentTarget, e.target));\n  });\n}\n\nfunction getTouchList(event) {\n  return event.type === 'touchend' ? event.changedTouches : event.targetTouches;\n}\n\nfunction getValueEvent(event) {\n  return isTouch(event) ? getTouchList(event)[0] : event;\n}\n\nfunction distanceAngle(P1, P2) {\n  const dx = P2.clientX - P1.clientX;\n  const dy = P2.clientY - P1.clientY;\n  const cx = (P2.clientX + P1.clientX) / 2;\n  const cy = (P2.clientY + P1.clientY) / 2;\n  const distance = Math.hypot(dx, dy);\n  const angle = -(Math.atan2(dx, dy) * 180) / Math.PI;\n  const origin = [cx, cy];\n  return {\n    angle,\n    distance,\n    origin\n  };\n}\nfunction touchIds(event) {\n  return getCurrentTargetTouchList(event).map(touch => touch.identifier);\n}\nfunction touchDistanceAngle(event, ids) {\n  const [P1, P2] = Array.from(event.touches).filter(touch => ids.includes(touch.identifier));\n  return distanceAngle(P1, P2);\n}\nfunction pointerId(event) {\n  const valueEvent = getValueEvent(event);\n  return isTouch(event) ? valueEvent.identifier : valueEvent.pointerId;\n}\nfunction pointerValues(event) {\n  const valueEvent = getValueEvent(event);\n  return [valueEvent.clientX, valueEvent.clientY];\n}\nconst LINE_HEIGHT = 40;\nconst PAGE_HEIGHT = 800;\nfunction wheelValues(event) {\n  let {\n    deltaX,\n    deltaY,\n    deltaMode\n  } = event;\n\n  if (deltaMode === 1) {\n    deltaX *= LINE_HEIGHT;\n    deltaY *= LINE_HEIGHT;\n  } else if (deltaMode === 2) {\n    deltaX *= PAGE_HEIGHT;\n    deltaY *= PAGE_HEIGHT;\n  }\n\n  return [deltaX, deltaY];\n}\nfunction scrollValues(event) {\n  var _ref, _ref2;\n\n  const {\n    scrollX,\n    scrollY,\n    scrollLeft,\n    scrollTop\n  } = event.currentTarget;\n  return [(_ref = scrollX !== null && scrollX !== void 0 ? scrollX : scrollLeft) !== null && _ref !== void 0 ? _ref : 0, (_ref2 = scrollY !== null && scrollY !== void 0 ? scrollY : scrollTop) !== null && _ref2 !== void 0 ? _ref2 : 0];\n}\nfunction getEventDetails(event) {\n  const payload = {};\n  if ('buttons' in event) payload.buttons = event.buttons;\n\n  if ('shiftKey' in event) {\n    const {\n      shiftKey,\n      altKey,\n      metaKey,\n      ctrlKey\n    } = event;\n    Object.assign(payload, {\n      shiftKey,\n      altKey,\n      metaKey,\n      ctrlKey\n    });\n  }\n\n  return payload;\n}\n\nfunction call(v, ...args) {\n  if (typeof v === 'function') {\n    return v(...args);\n  } else {\n    return v;\n  }\n}\nfunction noop() {}\nfunction chain(...fns) {\n  if (fns.length === 0) return noop;\n  if (fns.length === 1) return fns[0];\n  return function () {\n    let result;\n\n    for (const fn of fns) {\n      result = fn.apply(this, arguments) || result;\n    }\n\n    return result;\n  };\n}\nfunction assignDefault(value, fallback) {\n  return Object.assign({}, fallback, value || {});\n}\n\nconst BEFORE_LAST_KINEMATICS_DELAY = 32;\nclass Engine {\n  constructor(ctrl, args, key) {\n    this.ctrl = ctrl;\n    this.args = args;\n    this.key = key;\n\n    if (!this.state) {\n      this.state = {\n        values: [0, 0],\n        initial: [0, 0]\n      };\n      if (this.init) this.init();\n      this.reset();\n    }\n  }\n\n  get state() {\n    return this.ctrl.state[this.key];\n  }\n\n  set state(state) {\n    this.ctrl.state[this.key] = state;\n  }\n\n  get shared() {\n    return this.ctrl.state.shared;\n  }\n\n  get eventStore() {\n    return this.ctrl.gestureEventStores[this.key];\n  }\n\n  get timeoutStore() {\n    return this.ctrl.gestureTimeoutStores[this.key];\n  }\n\n  get config() {\n    return this.ctrl.config[this.key];\n  }\n\n  get sharedConfig() {\n    return this.ctrl.config.shared;\n  }\n\n  get handler() {\n    return this.ctrl.handlers[this.key];\n  }\n\n  reset() {\n    const {\n      state,\n      shared,\n      config,\n      ingKey,\n      args\n    } = this;\n    const {\n      transform,\n      threshold\n    } = config;\n    shared[ingKey] = state._active = state.active = state._blocked = state._force = false;\n    state._step = [false, false];\n    state.intentional = false;\n    state._movement = [0, 0];\n    state._distance = [0, 0];\n    state._delta = [0, 0];\n    state._threshold = V.sub(transform(threshold), transform([0, 0])).map(Math.abs);\n    state._bounds = [[-Infinity, Infinity], [-Infinity, Infinity]];\n    state.args = args;\n    state.axis = undefined;\n    state.memo = undefined;\n    state.elapsedTime = 0;\n    state.direction = [0, 0];\n    state.distance = [0, 0];\n    state.velocity = [0, 0];\n    state.movement = [0, 0];\n    state.delta = [0, 0];\n    state.timeStamp = 0;\n  }\n\n  start(event) {\n    const state = this.state;\n    const config = this.config;\n\n    if (!state._active) {\n      this.reset();\n      state._active = true;\n      state.target = event.target;\n      state.currentTarget = event.currentTarget;\n      state.initial = state.values;\n      state.lastOffset = config.from ? call(config.from, state) : state.offset;\n      state.offset = state.lastOffset;\n    }\n\n    state.startTime = state.timeStamp = event.timeStamp;\n  }\n\n  compute(event) {\n    const {\n      state,\n      config,\n      shared\n    } = this;\n    state.args = this.args;\n    let dt = 0;\n\n    if (event) {\n      state.event = event;\n      if (config.preventDefault && event.cancelable) state.event.preventDefault();\n      state.type = event.type;\n      shared.touches = this.ctrl.pointerIds.size || this.ctrl.touchIds.size;\n      shared.locked = !!document.pointerLockElement;\n      Object.assign(shared, getEventDetails(event));\n      shared.down = shared.pressed = shared.buttons % 2 === 1 || shared.touches > 0;\n      dt = event.timeStamp - state.timeStamp;\n      state.timeStamp = event.timeStamp;\n      state.elapsedTime = state.timeStamp - state.startTime;\n    }\n\n    if (state._active) {\n      const _absoluteDelta = state._delta.map(Math.abs);\n\n      V.addTo(state._distance, _absoluteDelta);\n    }\n\n    const [_m0, _m1] = config.transform(state._movement);\n\n    if (process.env.NODE_ENV === 'development') {\n      const isNumberAndNotNaN = v => typeof v === 'number' && !Number.isNaN(v);\n\n      if (!isNumberAndNotNaN(_m0) || !isNumberAndNotNaN(_m1)) {\n        console.warn(`[@use-gesture]: config.transform() must produce a valid result, but it was: [${_m0},${_m1}]`);\n      }\n    }\n\n    const [_t0, _t1] = state._threshold;\n    let [_s0, _s1] = state._step;\n    if (_s0 === false) _s0 = Math.abs(_m0) >= _t0 && Math.sign(_m0) * _t0;\n    if (_s1 === false) _s1 = Math.abs(_m1) >= _t1 && Math.sign(_m1) * _t1;\n    state.intentional = _s0 !== false || _s1 !== false;\n    if (!state.intentional) return;\n    state._step = [_s0, _s1];\n    const movement = [0, 0];\n    movement[0] = _s0 !== false ? _m0 - _s0 : 0;\n    movement[1] = _s1 !== false ? _m1 - _s1 : 0;\n    if (this.intent) this.intent(movement);\n\n    if (state._active && !state._blocked || state.active) {\n      state.first = state._active && !state.active;\n      state.last = !state._active && state.active;\n      state.active = shared[this.ingKey] = state._active;\n\n      if (event) {\n        if (state.first) {\n          if ('bounds' in config) state._bounds = call(config.bounds, state);\n          if (this.setup) this.setup();\n        }\n\n        state.movement = movement;\n        const previousOffset = state.offset;\n        this.computeOffset();\n\n        if (!state.last || dt > BEFORE_LAST_KINEMATICS_DELAY) {\n          state.delta = V.sub(state.offset, previousOffset);\n          const absoluteDelta = state.delta.map(Math.abs);\n          V.addTo(state.distance, absoluteDelta);\n          state.direction = state.delta.map(Math.sign);\n\n          if (!state.first && dt > 0) {\n            state.velocity = [absoluteDelta[0] / dt, absoluteDelta[1] / dt];\n          }\n        }\n      }\n    }\n\n    const rubberband = state._active ? config.rubberband || [0, 0] : [0, 0];\n    state.offset = computeRubberband(state._bounds, state.offset, rubberband);\n    this.computeMovement();\n  }\n\n  emit() {\n    const state = this.state;\n    const shared = this.shared;\n    const config = this.config;\n    if (!state._active) this.clean();\n    if ((state._blocked || !state.intentional) && !state._force && !config.triggerAllEvents) return;\n    const memo = this.handler(_objectSpread2(_objectSpread2(_objectSpread2({}, shared), state), {}, {\n      [this.aliasKey]: state.values\n    }));\n    if (memo !== undefined) state.memo = memo;\n  }\n\n  clean() {\n    this.eventStore.clean();\n    this.timeoutStore.clean();\n  }\n\n}\n\nfunction selectAxis([dx, dy]) {\n  const d = Math.abs(dx) - Math.abs(dy);\n  if (d > 0) return 'x';\n  if (d < 0) return 'y';\n  return undefined;\n}\n\nfunction restrictVectorToAxis(v, axis) {\n  switch (axis) {\n    case 'x':\n      v[1] = 0;\n      break;\n\n    case 'y':\n      v[0] = 0;\n      break;\n  }\n}\n\nclass CoordinatesEngine extends Engine {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"aliasKey\", 'xy');\n  }\n\n  reset() {\n    super.reset();\n    this.state.axis = undefined;\n  }\n\n  init() {\n    this.state.offset = [0, 0];\n    this.state.lastOffset = [0, 0];\n  }\n\n  computeOffset() {\n    this.state.offset = V.add(this.state.lastOffset, this.state.movement);\n  }\n\n  computeMovement() {\n    this.state.movement = V.sub(this.state.offset, this.state.lastOffset);\n  }\n\n  intent(v) {\n    this.state.axis = this.state.axis || selectAxis(v);\n    this.state._blocked = (this.config.lockDirection || !!this.config.axis) && !this.state.axis || !!this.config.axis && this.config.axis !== this.state.axis;\n    if (this.state._blocked) return;\n\n    if (this.config.axis || this.config.lockDirection) {\n      restrictVectorToAxis(v, this.state.axis);\n    }\n  }\n\n}\n\nconst DEFAULT_RUBBERBAND = 0.15;\nconst commonConfigResolver = {\n  enabled(value = true) {\n    return value;\n  },\n\n  preventDefault(value = false) {\n    return value;\n  },\n\n  triggerAllEvents(value = false) {\n    return value;\n  },\n\n  rubberband(value = 0) {\n    switch (value) {\n      case true:\n        return [DEFAULT_RUBBERBAND, DEFAULT_RUBBERBAND];\n\n      case false:\n        return [0, 0];\n\n      default:\n        return V.toVector(value);\n    }\n  },\n\n  from(value) {\n    if (typeof value === 'function') return value;\n    if (value != null) return V.toVector(value);\n  },\n\n  transform(value, _k, config) {\n    return value || config.shared.transform;\n  },\n\n  threshold(value) {\n    return V.toVector(value, 0);\n  }\n\n};\n\nif (process.env.NODE_ENV === 'development') {\n  Object.assign(commonConfigResolver, {\n    domTarget(value) {\n      if (value !== undefined) {\n        throw Error(`[@use-gesture]: \\`domTarget\\` option has been renamed to \\`target\\`.`);\n      }\n    },\n\n    lockDirection(value) {\n      if (value !== undefined) {\n        throw Error(`[@use-gesture]: \\`lockDirection\\` option has been merged with \\`axis\\`. Use it as in \\`{ axis: 'lock' }\\``);\n      }\n    },\n\n    initial(value) {\n      if (value !== undefined) {\n        throw Error(`[@use-gesture]: \\`initial\\` option has been renamed to \\`from\\`.`);\n      }\n    }\n\n  });\n}\n\nconst coordinatesConfigResolver = _objectSpread2(_objectSpread2({}, commonConfigResolver), {}, {\n  axis(_v, _k, {\n    axis\n  }) {\n    this.lockDirection = axis === 'lock';\n    if (!this.lockDirection) return axis;\n  },\n\n  bounds(value = {}) {\n    if (typeof value === 'function') {\n      return state => coordinatesConfigResolver.bounds(value(state));\n    }\n\n    if ('current' in value) {\n      return () => value.current;\n    }\n\n    if (typeof HTMLElement === 'function' && value instanceof HTMLElement) {\n      return value;\n    }\n\n    const {\n      left = -Infinity,\n      right = Infinity,\n      top = -Infinity,\n      bottom = Infinity\n    } = value;\n    return [[left, right], [top, bottom]];\n  }\n\n});\n\nconst DISPLACEMENT = 10;\nconst KEYS_DELTA_MAP = {\n  ArrowRight: (factor = 1) => [DISPLACEMENT * factor, 0],\n  ArrowLeft: (factor = 1) => [-DISPLACEMENT * factor, 0],\n  ArrowUp: (factor = 1) => [0, -DISPLACEMENT * factor],\n  ArrowDown: (factor = 1) => [0, DISPLACEMENT * factor]\n};\nclass DragEngine extends CoordinatesEngine {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"ingKey\", 'dragging');\n  }\n\n  reset() {\n    super.reset();\n    const state = this.state;\n    state._pointerId = undefined;\n    state._pointerActive = false;\n    state._keyboardActive = false;\n    state._preventScroll = false;\n    state._delayed = false;\n    state.swipe = [0, 0];\n    state.tap = false;\n    state.canceled = false;\n    state.cancel = this.cancel.bind(this);\n  }\n\n  setup() {\n    const state = this.state;\n\n    if (state._bounds instanceof HTMLElement) {\n      const boundRect = state._bounds.getBoundingClientRect();\n\n      const targetRect = state.currentTarget.getBoundingClientRect();\n      const _bounds = {\n        left: boundRect.left - targetRect.left + state.offset[0],\n        right: boundRect.right - targetRect.right + state.offset[0],\n        top: boundRect.top - targetRect.top + state.offset[1],\n        bottom: boundRect.bottom - targetRect.bottom + state.offset[1]\n      };\n      state._bounds = coordinatesConfigResolver.bounds(_bounds);\n    }\n  }\n\n  cancel() {\n    const state = this.state;\n    if (state.canceled) return;\n    state.canceled = true;\n    state._active = false;\n    setTimeout(() => {\n      this.compute();\n      this.emit();\n    }, 0);\n  }\n\n  setActive() {\n    this.state._active = this.state._pointerActive || this.state._keyboardActive;\n  }\n\n  clean() {\n    this.pointerClean();\n    this.state._pointerActive = false;\n    this.state._keyboardActive = false;\n    super.clean();\n  }\n\n  pointerDown(event) {\n    const config = this.config;\n    const state = this.state;\n    if (event.buttons != null && event.buttons !== config.pointerButtons) return;\n    this.ctrl.setEventIds(event);\n\n    if (config.pointerCapture) {\n      event.target.setPointerCapture(event.pointerId);\n    }\n\n    if (state._pointerActive) return;\n    this.start(event);\n    this.setupPointer(event);\n    state._pointerId = pointerId(event);\n    state._pointerActive = true;\n    state.values = pointerValues(event);\n    state.initial = state.values;\n\n    if (config.preventScroll) {\n      this.setupScrollPrevention(event);\n    } else if (config.delay > 0) {\n      this.setupDelayTrigger(event);\n    } else {\n      this.startPointerDrag(event);\n    }\n  }\n\n  startPointerDrag(event) {\n    const state = this.state;\n    state._active = true;\n    state._preventScroll = true;\n    state._delayed = false;\n    this.compute(event);\n    this.emit();\n  }\n\n  pointerMove(event) {\n    const state = this.state;\n    const config = this.config;\n    if (!state._pointerActive) return;\n    if (state.type === event.type && event.timeStamp === state.timeStamp) return;\n    const id = pointerId(event);\n    if (state._pointerId && id !== state._pointerId) return;\n    const values = pointerValues(event);\n\n    if (document.pointerLockElement === event.target) {\n      state._delta = [event.movementX, event.movementY];\n    } else {\n      state._delta = V.sub(values, state.values);\n      state.values = values;\n    }\n\n    V.addTo(state._movement, state._delta);\n    this.compute(event);\n\n    if (state._delayed) {\n      this.timeoutStore.remove('dragDelay');\n      state.active = false;\n      this.startPointerDrag(event);\n      return;\n    }\n\n    if (config.preventScroll && !state._preventScroll) {\n      if (state.axis) {\n        if (state.axis === config.preventScrollAxis || config.preventScrollAxis === 'xy') {\n          state._active = false;\n          this.clean();\n          return;\n        } else {\n          this.timeoutStore.remove('startPointerDrag');\n          this.startPointerDrag(event);\n          return;\n        }\n      } else {\n        return;\n      }\n    }\n\n    this.emit();\n  }\n\n  pointerUp(event) {\n    this.ctrl.setEventIds(event);\n\n    try {\n      if (this.config.pointerCapture && event.target.hasPointerCapture(event.pointerId)) {\n        ;\n        event.target.releasePointerCapture(event.pointerId);\n      }\n    } catch (_unused) {\n      if (process.env.NODE_ENV === 'development') {\n        console.warn(`[@use-gesture]: If you see this message, it's likely that you're using an outdated version of \\`@react-three/fiber\\`. \\n\\nPlease upgrade to the latest version.`);\n      }\n    }\n\n    const state = this.state;\n    const config = this.config;\n    if (!state._pointerActive) return;\n    const id = pointerId(event);\n    if (state._pointerId && id !== state._pointerId) return;\n    this.state._pointerActive = false;\n    this.setActive();\n    this.compute(event);\n    const [dx, dy] = state._distance;\n    state.tap = dx <= 3 && dy <= 3;\n\n    if (state.tap && config.filterTaps) {\n      state._force = true;\n    } else {\n      const [dirx, diry] = state.direction;\n      const [vx, vy] = state.velocity;\n      const [mx, my] = state.movement;\n      const [svx, svy] = config.swipe.velocity;\n      const [sx, sy] = config.swipe.distance;\n      const sdt = config.swipe.duration;\n\n      if (state.elapsedTime < sdt) {\n        if (Math.abs(vx) > svx && Math.abs(mx) > sx) state.swipe[0] = dirx;\n        if (Math.abs(vy) > svy && Math.abs(my) > sy) state.swipe[1] = diry;\n      }\n    }\n\n    this.emit();\n  }\n\n  pointerClick(event) {\n    if (!this.state.tap) {\n      event.preventDefault();\n      event.stopPropagation();\n    }\n  }\n\n  setupPointer(event) {\n    const config = this.config;\n    let device = config.device;\n\n    if (process.env.NODE_ENV === 'development') {\n      try {\n        if (device === 'pointer') {\n          const currentTarget = 'uv' in event ? event.sourceEvent.currentTarget : event.currentTarget;\n          const style = window.getComputedStyle(currentTarget);\n\n          if (style.touchAction === 'auto') {\n            console.warn(`[@use-gesture]: The drag target has its \\`touch-action\\` style property set to \\`auto\\`. It is recommended to add \\`touch-action: 'none'\\` so that the drag gesture behaves correctly on touch-enabled devices. For more information read this: https://use-gesture.netlify.app/docs/extras/#touch-action.\\n\\nThis message will only show in development mode. It won't appear in production. If this is intended, you can ignore it.`, currentTarget);\n          }\n        }\n      } catch (_unused2) {}\n    }\n\n    if (config.pointerLock) {\n      event.currentTarget.requestPointerLock();\n    }\n\n    if (!config.pointerCapture) {\n      this.eventStore.add(this.sharedConfig.window, device, 'change', this.pointerMove.bind(this));\n      this.eventStore.add(this.sharedConfig.window, device, 'end', this.pointerUp.bind(this));\n    }\n  }\n\n  pointerClean() {\n    if (this.config.pointerLock && document.pointerLockElement === this.state.currentTarget) {\n      document.exitPointerLock();\n    }\n  }\n\n  preventScroll(event) {\n    if (this.state._preventScroll && event.cancelable) {\n      event.preventDefault();\n    }\n  }\n\n  setupScrollPrevention(event) {\n    persistEvent(event);\n    this.eventStore.add(this.sharedConfig.window, 'touch', 'change', this.preventScroll.bind(this), {\n      passive: false\n    });\n    this.eventStore.add(this.sharedConfig.window, 'touch', 'end', this.clean.bind(this), {\n      passive: false\n    });\n    this.eventStore.add(this.sharedConfig.window, 'touch', 'cancel', this.clean.bind(this), {\n      passive: false\n    });\n    this.timeoutStore.add('startPointerDrag', this.startPointerDrag.bind(this), this.config.preventScroll, event);\n  }\n\n  setupDelayTrigger(event) {\n    this.state._delayed = true;\n    this.timeoutStore.add('dragDelay', this.startPointerDrag.bind(this), this.config.delay, event);\n  }\n\n  keyDown(event) {\n    const deltaFn = KEYS_DELTA_MAP[event.key];\n    const state = this.state;\n\n    if (deltaFn) {\n      const factor = event.shiftKey ? 10 : event.altKey ? 0.1 : 1;\n      state._delta = deltaFn(factor);\n      this.start(event);\n      state._keyboardActive = true;\n      V.addTo(state._movement, state._delta);\n      this.compute(event);\n      this.emit();\n    }\n  }\n\n  keyUp(event) {\n    if (!(event.key in KEYS_DELTA_MAP)) return;\n    this.state._keyboardActive = false;\n    this.setActive();\n    this.compute(event);\n    this.emit();\n  }\n\n  bind(bindFunction) {\n    const device = this.config.device;\n    bindFunction(device, 'start', this.pointerDown.bind(this));\n\n    if (this.config.pointerCapture) {\n      bindFunction(device, 'change', this.pointerMove.bind(this));\n      bindFunction(device, 'end', this.pointerUp.bind(this));\n      bindFunction(device, 'cancel', this.pointerUp.bind(this));\n    }\n\n    bindFunction('key', 'down', this.keyDown.bind(this));\n    bindFunction('key', 'up', this.keyUp.bind(this));\n\n    if (this.config.filterTaps) {\n      bindFunction('click', '', this.pointerClick.bind(this), {\n        capture: true\n      });\n    }\n  }\n\n}\n\nfunction persistEvent(event) {\n  'persist' in event && typeof event.persist === 'function' && event.persist();\n}\n\nconst isBrowser = typeof window !== 'undefined' && window.document && window.document.createElement;\n\nfunction supportsTouchEvents() {\n  return isBrowser && 'ontouchstart' in window;\n}\n\nfunction isTouchScreen() {\n  return supportsTouchEvents() || isBrowser && window.navigator.maxTouchPoints > 1;\n}\n\nfunction supportsPointerEvents() {\n  return isBrowser && 'onpointerdown' in window;\n}\n\nfunction supportsPointerLock() {\n  return isBrowser && 'exitPointerLock' in window.document;\n}\n\nfunction supportsGestureEvents() {\n  try {\n    return 'constructor' in GestureEvent;\n  } catch (e) {\n    return false;\n  }\n}\n\nconst SUPPORT = {\n  isBrowser,\n  gesture: supportsGestureEvents(),\n  touch: supportsTouchEvents(),\n  touchscreen: isTouchScreen(),\n  pointer: supportsPointerEvents(),\n  pointerLock: supportsPointerLock()\n};\n\nconst DEFAULT_PREVENT_SCROLL_DELAY = 250;\nconst DEFAULT_DRAG_DELAY = 180;\nconst DEFAULT_SWIPE_VELOCITY = 0.5;\nconst DEFAULT_SWIPE_DISTANCE = 50;\nconst DEFAULT_SWIPE_DURATION = 250;\nconst dragConfigResolver = _objectSpread2(_objectSpread2({}, coordinatesConfigResolver), {}, {\n  pointerLock(_v, _k, {\n    pointer: {\n      lock = false,\n      touch = false\n    } = {}\n  }) {\n    this.useTouch = SUPPORT.touch && touch;\n    return SUPPORT.pointerLock && lock;\n  },\n\n  device(_v, _k) {\n    if (this.useTouch) return 'touch';\n    if (this.pointerLock) return 'mouse';\n    if (SUPPORT.pointer) return 'pointer';\n    if (SUPPORT.touch) return 'touch';\n    return 'mouse';\n  },\n\n  preventScroll(value = false, _k, {\n    preventScrollAxis = 'y'\n  }) {\n    if (preventScrollAxis) this.preventScrollAxis = preventScrollAxis;\n    if (!SUPPORT.touchscreen) return false;\n    if (typeof value === 'number') return value;\n    return value ? DEFAULT_PREVENT_SCROLL_DELAY : false;\n  },\n\n  pointerCapture(_v, _k, {\n    pointer: {\n      capture = true,\n      buttons = 1\n    } = {}\n  }) {\n    this.pointerButtons = buttons;\n    return !this.pointerLock && this.device === 'pointer' && capture;\n  },\n\n  threshold(value, _k, {\n    filterTaps = false,\n    axis = undefined\n  }) {\n    const threshold = V.toVector(value, filterTaps ? 3 : axis ? 1 : 0);\n    this.filterTaps = filterTaps;\n    return threshold;\n  },\n\n  swipe({\n    velocity = DEFAULT_SWIPE_VELOCITY,\n    distance = DEFAULT_SWIPE_DISTANCE,\n    duration = DEFAULT_SWIPE_DURATION\n  } = {}) {\n    return {\n      velocity: this.transform(V.toVector(velocity)),\n      distance: this.transform(V.toVector(distance)),\n      duration\n    };\n  },\n\n  delay(value = 0) {\n    switch (value) {\n      case true:\n        return DEFAULT_DRAG_DELAY;\n\n      case false:\n        return 0;\n\n      default:\n        return value;\n    }\n  }\n\n});\n\nif (process.env.NODE_ENV === 'development') {\n  Object.assign(dragConfigResolver, {\n    useTouch(value) {\n      if (value !== undefined) {\n        throw Error(`[@use-gesture]: \\`useTouch\\` option has been renamed to \\`pointer.touch\\`. Use it as in \\`{ pointer: { touch: true } }\\`.`);\n      }\n    },\n\n    experimental_preventWindowScrollY(value) {\n      if (value !== undefined) {\n        throw Error(`[@use-gesture]: \\`experimental_preventWindowScrollY\\` option has been renamed to \\`preventScroll\\`.`);\n      }\n    },\n\n    swipeVelocity(value) {\n      if (value !== undefined) {\n        throw Error(`[@use-gesture]: \\`swipeVelocity\\` option has been renamed to \\`swipe.velocity\\`. Use it as in \\`{ swipe: { velocity: 0.5 } }\\`.`);\n      }\n    },\n\n    swipeDistance(value) {\n      if (value !== undefined) {\n        throw Error(`[@use-gesture]: \\`swipeDistance\\` option has been renamed to \\`swipe.distance\\`. Use it as in \\`{ swipe: { distance: 50 } }\\`.`);\n      }\n    },\n\n    swipeDuration(value) {\n      if (value !== undefined) {\n        throw Error(`[@use-gesture]: \\`swipeDuration\\` option has been renamed to \\`swipe.duration\\`. Use it as in \\`{ swipe: { duration: 250 } }\\`.`);\n      }\n    }\n\n  });\n}\n\nconst SCALE_ANGLE_RATIO_INTENT_DEG = 30;\nconst PINCH_WHEEL_RATIO = 36;\nclass PinchEngine extends Engine {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"ingKey\", 'pinching');\n\n    _defineProperty(this, \"aliasKey\", 'da');\n  }\n\n  init() {\n    this.state.offset = [1, 0];\n    this.state.lastOffset = [1, 0];\n    this.state._pointerEvents = new Map();\n  }\n\n  reset() {\n    super.reset();\n    const state = this.state;\n    state._touchIds = [];\n    state.canceled = false;\n    state.cancel = this.cancel.bind(this);\n    state.turns = 0;\n  }\n\n  computeOffset() {\n    const {\n      type,\n      movement,\n      lastOffset\n    } = this.state;\n\n    if (type === 'wheel') {\n      this.state.offset = V.add(movement, lastOffset);\n    } else {\n      this.state.offset = [(1 + movement[0]) * lastOffset[0], movement[1] + lastOffset[1]];\n    }\n  }\n\n  computeMovement() {\n    const {\n      offset,\n      lastOffset\n    } = this.state;\n    this.state.movement = [offset[0] / lastOffset[0], offset[1] - lastOffset[1]];\n  }\n\n  intent(v) {\n    const state = this.state;\n\n    if (!state.axis) {\n      const axisMovementDifference = Math.abs(v[0]) * SCALE_ANGLE_RATIO_INTENT_DEG - Math.abs(v[1]);\n      if (axisMovementDifference < 0) state.axis = 'angle';else if (axisMovementDifference > 0) state.axis = 'scale';\n    }\n\n    if (this.config.lockDirection) {\n      if (state.axis === 'scale') v[1] = 0;else if (state.axis === 'angle') v[0] = 0;\n    }\n  }\n\n  cancel() {\n    const state = this.state;\n    if (state.canceled) return;\n    setTimeout(() => {\n      state.canceled = true;\n      state._active = false;\n      this.compute();\n      this.emit();\n    }, 0);\n  }\n\n  touchStart(event) {\n    this.ctrl.setEventIds(event);\n    const state = this.state;\n    const ctrlTouchIds = this.ctrl.touchIds;\n\n    if (state._active) {\n      if (state._touchIds.every(id => ctrlTouchIds.has(id))) return;\n    }\n\n    if (ctrlTouchIds.size < 2) return;\n    this.start(event);\n    state._touchIds = Array.from(ctrlTouchIds).slice(0, 2);\n    const payload = touchDistanceAngle(event, state._touchIds);\n    this.pinchStart(event, payload);\n  }\n\n  pointerStart(event) {\n    if (event.buttons != null && event.buttons % 2 !== 1) return;\n    this.ctrl.setEventIds(event);\n    event.target.setPointerCapture(event.pointerId);\n    const state = this.state;\n    const _pointerEvents = state._pointerEvents;\n    const ctrlPointerIds = this.ctrl.pointerIds;\n\n    if (state._active) {\n      if (Array.from(_pointerEvents.keys()).every(id => ctrlPointerIds.has(id))) return;\n    }\n\n    if (_pointerEvents.size < 2) {\n      _pointerEvents.set(event.pointerId, event);\n    }\n\n    if (state._pointerEvents.size < 2) return;\n    this.start(event);\n    const payload = distanceAngle(...Array.from(_pointerEvents.values()));\n    this.pinchStart(event, payload);\n  }\n\n  pinchStart(event, payload) {\n    const state = this.state;\n    state.origin = payload.origin;\n    state.values = [payload.distance, payload.angle];\n    state.initial = state.values;\n    this.compute(event);\n    this.emit();\n  }\n\n  touchMove(event) {\n    if (!this.state._active) return;\n    const payload = touchDistanceAngle(event, this.state._touchIds);\n    this.pinchMove(event, payload);\n  }\n\n  pointerMove(event) {\n    const _pointerEvents = this.state._pointerEvents;\n\n    if (_pointerEvents.has(event.pointerId)) {\n      _pointerEvents.set(event.pointerId, event);\n    }\n\n    if (!this.state._active) return;\n    const payload = distanceAngle(...Array.from(_pointerEvents.values()));\n    this.pinchMove(event, payload);\n  }\n\n  pinchMove(event, payload) {\n    const state = this.state;\n    const prev_a = state.values[1];\n    const delta_a = payload.angle - prev_a;\n    let delta_turns = 0;\n    if (Math.abs(delta_a) > 270) delta_turns += Math.sign(delta_a);\n    state.values = [payload.distance, payload.angle - 360 * delta_turns];\n    state.origin = payload.origin;\n    state.turns = delta_turns;\n    state._movement = [state.values[0] / state.initial[0] - 1, state.values[1] - state.initial[1]];\n    this.compute(event);\n    this.emit();\n  }\n\n  touchEnd(event) {\n    this.ctrl.setEventIds(event);\n    if (!this.state._active) return;\n\n    if (this.state._touchIds.some(id => !this.ctrl.touchIds.has(id))) {\n      this.state._active = false;\n      this.compute(event);\n      this.emit();\n    }\n  }\n\n  pointerEnd(event) {\n    const state = this.state;\n    this.ctrl.setEventIds(event);\n\n    try {\n      event.target.releasePointerCapture(event.pointerId);\n    } catch (_unused) {}\n\n    if (state._pointerEvents.has(event.pointerId)) {\n      state._pointerEvents.delete(event.pointerId);\n    }\n\n    if (!state._active) return;\n\n    if (state._pointerEvents.size < 2) {\n      state._active = false;\n      this.compute(event);\n      this.emit();\n    }\n  }\n\n  gestureStart(event) {\n    if (event.cancelable) event.preventDefault();\n    const state = this.state;\n    if (state._active) return;\n    this.start(event);\n    state.values = [event.scale, event.rotation];\n    state.origin = [event.clientX, event.clientY];\n    this.compute(event);\n    this.emit();\n  }\n\n  gestureMove(event) {\n    if (event.cancelable) event.preventDefault();\n    if (!this.state._active) return;\n    const state = this.state;\n    state.values = [event.scale, event.rotation];\n    state.origin = [event.clientX, event.clientY];\n    const _previousMovement = state._movement;\n    state._movement = [event.scale - 1, event.rotation];\n    state._delta = V.sub(state._movement, _previousMovement);\n    this.compute(event);\n    this.emit();\n  }\n\n  gestureEnd(event) {\n    if (!this.state._active) return;\n    this.state._active = false;\n    this.compute(event);\n    this.emit();\n  }\n\n  wheel(event) {\n    if (!event.ctrlKey) return;\n    if (!this.state._active) this.wheelStart(event);else this.wheelChange(event);\n    this.timeoutStore.add('wheelEnd', this.wheelEnd.bind(this));\n  }\n\n  wheelStart(event) {\n    this.start(event);\n    this.wheelChange(event);\n  }\n\n  wheelChange(event) {\n    const isR3f = ('uv' in event);\n\n    if (!isR3f) {\n      if (event.cancelable) {\n        event.preventDefault();\n      }\n\n      if (process.env.NODE_ENV === 'development' && !event.defaultPrevented) {\n        console.warn(`[@use-gesture]: To properly support zoom on trackpads, try using the \\`target\\` option.\\n\\nThis message will only appear in development mode.`);\n      }\n    }\n\n    const state = this.state;\n    state._delta = [-wheelValues(event)[1] / PINCH_WHEEL_RATIO * state.offset[0], 0];\n    V.addTo(state._movement, state._delta);\n    this.state.origin = [event.clientX, event.clientY];\n    this.compute(event);\n    this.emit();\n  }\n\n  wheelEnd() {\n    if (!this.state._active) return;\n    this.state._active = false;\n    this.compute();\n    this.emit();\n  }\n\n  bind(bindFunction) {\n    const device = this.config.device;\n\n    if (!!device) {\n      bindFunction(device, 'start', this[device + 'Start'].bind(this));\n      bindFunction(device, 'change', this[device + 'Move'].bind(this));\n      bindFunction(device, 'end', this[device + 'End'].bind(this));\n      bindFunction(device, 'cancel', this[device + 'End'].bind(this));\n    } else {\n      bindFunction('wheel', '', this.wheel.bind(this), {\n        passive: false\n      });\n    }\n  }\n\n}\n\nconst pinchConfigResolver = _objectSpread2(_objectSpread2({}, commonConfigResolver), {}, {\n  useTouch(_v, _k, {\n    pointer: {\n      touch = false\n    } = {}\n  }) {\n    return SUPPORT.touch && touch;\n  },\n\n  device(_v, _k, config) {\n    const sharedConfig = config.shared;\n    if (sharedConfig.target && !SUPPORT.touch && SUPPORT.gesture) return 'gesture';\n    if (this.useTouch) return 'touch';\n\n    if (SUPPORT.touchscreen) {\n      if (SUPPORT.pointer) return 'pointer';\n      if (SUPPORT.touch) return 'touch';\n    }\n  },\n\n  bounds(_v, _k, {\n    scaleBounds = {},\n    angleBounds = {}\n  }) {\n    const _scaleBounds = state => {\n      const D = assignDefault(call(scaleBounds, state), {\n        min: -Infinity,\n        max: Infinity\n      });\n      return [D.min, D.max];\n    };\n\n    const _angleBounds = state => {\n      const A = assignDefault(call(angleBounds, state), {\n        min: -Infinity,\n        max: Infinity\n      });\n      return [A.min, A.max];\n    };\n\n    if (typeof scaleBounds !== 'function' && typeof angleBounds !== 'function') return [_scaleBounds(), _angleBounds()];\n    return state => [_scaleBounds(state), _angleBounds(state)];\n  },\n\n  threshold(value, _k, config) {\n    this.lockDirection = config.axis === 'lock';\n    const threshold = V.toVector(value, this.lockDirection ? [0.1, 3] : 0);\n    return threshold;\n  }\n\n});\n\nclass MoveEngine extends CoordinatesEngine {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"ingKey\", 'moving');\n  }\n\n  move(event) {\n    if (this.config.mouseOnly && event.pointerType !== 'mouse') return;\n    if (!this.state._active) this.moveStart(event);else this.moveChange(event);\n    this.timeoutStore.add('moveEnd', this.moveEnd.bind(this));\n  }\n\n  moveStart(event) {\n    this.start(event);\n    const state = this.state;\n    state.values = pointerValues(event);\n    this.compute(event);\n    state.initial = state.values;\n    this.emit();\n  }\n\n  moveChange(event) {\n    if (!this.state._active) return;\n    const values = pointerValues(event);\n    const state = this.state;\n    state._delta = V.sub(values, state.values);\n    V.addTo(state._movement, state._delta);\n    state.values = values;\n    this.compute(event);\n    this.emit();\n  }\n\n  moveEnd(event) {\n    if (!this.state._active) return;\n    this.state._active = false;\n    this.compute(event);\n    this.emit();\n  }\n\n  bind(bindFunction) {\n    bindFunction('pointer', 'change', this.move.bind(this));\n    bindFunction('pointer', 'leave', this.moveEnd.bind(this));\n  }\n\n}\n\nconst moveConfigResolver = _objectSpread2(_objectSpread2({}, coordinatesConfigResolver), {}, {\n  mouseOnly: (value = true) => value\n});\n\nclass ScrollEngine extends CoordinatesEngine {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"ingKey\", 'scrolling');\n  }\n\n  scroll(event) {\n    if (!this.state._active) this.start(event);\n    this.scrollChange(event);\n    this.timeoutStore.add('scrollEnd', this.scrollEnd.bind(this));\n  }\n\n  scrollChange(event) {\n    if (event.cancelable) event.preventDefault();\n    const state = this.state;\n    const values = scrollValues(event);\n    state._delta = V.sub(values, state.values);\n    V.addTo(state._movement, state._delta);\n    state.values = values;\n    this.compute(event);\n    this.emit();\n  }\n\n  scrollEnd() {\n    if (!this.state._active) return;\n    this.state._active = false;\n    this.compute();\n    this.emit();\n  }\n\n  bind(bindFunction) {\n    bindFunction('scroll', '', this.scroll.bind(this));\n  }\n\n}\n\nconst scrollConfigResolver = coordinatesConfigResolver;\n\nclass WheelEngine extends CoordinatesEngine {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"ingKey\", 'wheeling');\n  }\n\n  wheel(event) {\n    if (!this.state._active) this.start(event);\n    this.wheelChange(event);\n    this.timeoutStore.add('wheelEnd', this.wheelEnd.bind(this));\n  }\n\n  wheelChange(event) {\n    const state = this.state;\n    state._delta = wheelValues(event);\n    V.addTo(this.state._movement, state._delta);\n    this.compute(event);\n    this.emit();\n  }\n\n  wheelEnd() {\n    if (!this.state._active) return;\n    this.state._active = false;\n    this.compute();\n    this.emit();\n  }\n\n  bind(bindFunction) {\n    bindFunction('wheel', '', this.wheel.bind(this));\n  }\n\n}\n\nconst wheelConfigResolver = coordinatesConfigResolver;\n\nclass HoverEngine extends CoordinatesEngine {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"ingKey\", 'hovering');\n  }\n\n  enter(event) {\n    if (this.config.mouseOnly && event.pointerType !== 'mouse') return;\n    this.start(event);\n    this.state.values = pointerValues(event);\n    this.compute(event);\n    this.emit();\n  }\n\n  leave(event) {\n    if (this.config.mouseOnly && event.pointerType !== 'mouse') return;\n    const state = this.state;\n    if (!state._active) return;\n    state._active = false;\n    const values = pointerValues(event);\n    state._movement = state._delta = V.sub(values, state.values);\n    state.values = values;\n    this.compute(event);\n    state.delta = state.movement;\n    this.emit();\n  }\n\n  bind(bindFunction) {\n    bindFunction('pointer', 'enter', this.enter.bind(this));\n    bindFunction('pointer', 'leave', this.leave.bind(this));\n  }\n\n}\n\nconst hoverConfigResolver = _objectSpread2(_objectSpread2({}, coordinatesConfigResolver), {}, {\n  mouseOnly: (value = true) => value\n});\n\nconst EngineMap = new Map();\nconst ConfigResolverMap = new Map();\nfunction registerAction(action) {\n  EngineMap.set(action.key, action.engine);\n  ConfigResolverMap.set(action.key, action.resolver);\n}\nconst dragAction = {\n  key: 'drag',\n  engine: DragEngine,\n  resolver: dragConfigResolver\n};\nconst hoverAction = {\n  key: 'hover',\n  engine: HoverEngine,\n  resolver: hoverConfigResolver\n};\nconst moveAction = {\n  key: 'move',\n  engine: MoveEngine,\n  resolver: moveConfigResolver\n};\nconst pinchAction = {\n  key: 'pinch',\n  engine: PinchEngine,\n  resolver: pinchConfigResolver\n};\nconst scrollAction = {\n  key: 'scroll',\n  engine: ScrollEngine,\n  resolver: scrollConfigResolver\n};\nconst wheelAction = {\n  key: 'wheel',\n  engine: WheelEngine,\n  resolver: wheelConfigResolver\n};\n\nexport { ConfigResolverMap as C, EngineMap as E, SUPPORT as S, _objectSpread2 as _, _defineProperty as a, touchIds as b, chain as c, toHandlerProp as d, dragAction as e, hoverAction as h, isTouch as i, moveAction as m, pinchAction as p, registerAction as r, scrollAction as s, toDomEventType as t, wheelAction as w };\n"]},"metadata":{},"sourceType":"module"}