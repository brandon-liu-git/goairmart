{"ast":null,"code":"import React, { createRef, forwardRef, useEffect, useImperativeHandle, useState } from 'react';\nimport { withNativeProps } from '../../utils/native-props';\nimport { mergeProps } from '../../utils/with-default-props';\nimport classNames from 'classnames';\nimport Popup from '../popup';\nimport Button from '../button';\nimport { renderToBody } from '../../utils/render-to-body';\nvar classPrefix = \"adm-action-sheet\";\nvar defaultProps = {\n  visible: false,\n  actions: [],\n  cancelText: '',\n  closeOnAction: false,\n  closeOnMaskClick: true\n};\nexport var ActionSheet = function ActionSheet(p) {\n  var props = mergeProps(defaultProps, p);\n  return /*#__PURE__*/React.createElement(Popup, {\n    visible: props.visible,\n    onMaskClick: function onMaskClick() {\n      var _a, _b;\n\n      (_a = props.onMaskClick) === null || _a === void 0 ? void 0 : _a.call(props);\n\n      if (props.closeOnMaskClick) {\n        (_b = props.onClose) === null || _b === void 0 ? void 0 : _b.call(props);\n      }\n    },\n    afterClose: props.afterClose,\n    className: classPrefix + \"-popup\",\n    getContainer: props.getContainer\n  }, withNativeProps(props, /*#__PURE__*/React.createElement(\"div\", {\n    className: classPrefix\n  }, props.extra && /*#__PURE__*/React.createElement(\"div\", {\n    className: classPrefix + \"-extra\"\n  }, props.extra), /*#__PURE__*/React.createElement(\"div\", {\n    className: classPrefix + \"-button-list\"\n  }, props.actions.map(function (action, index) {\n    var _classNames;\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      key: action.key,\n      className: classPrefix + \"-button-item-wrapper\"\n    }, /*#__PURE__*/React.createElement(Button, {\n      block: true,\n      fill: 'none',\n      disabled: action.disabled,\n      onClick: function onClick() {\n        var _a, _b, _c;\n\n        (_a = action.onClick) === null || _a === void 0 ? void 0 : _a.call(action);\n        (_b = props.onAction) === null || _b === void 0 ? void 0 : _b.call(props, action, index);\n\n        if (props.closeOnAction) {\n          (_c = props.onClose) === null || _c === void 0 ? void 0 : _c.call(props);\n        }\n      },\n      className: classNames(classPrefix + \"-button-item\", (_classNames = {}, _classNames[classPrefix + \"-button-item-danger\"] = action.danger, _classNames))\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: classPrefix + \"-button-item-name\"\n    }, action.text), action.description && /*#__PURE__*/React.createElement(\"div\", {\n      className: classPrefix + \"-button-item-description\"\n    }, action.description)));\n  })), props.cancelText && /*#__PURE__*/React.createElement(\"div\", {\n    className: classPrefix + \"-cancel\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classPrefix + \"-button-item-wrapper\"\n  }, /*#__PURE__*/React.createElement(Button, {\n    block: true,\n    fill: 'none',\n    className: classPrefix + \"-button-item\",\n    onClick: function onClick() {\n      var _a;\n\n      (_a = props.onClose) === null || _a === void 0 ? void 0 : _a.call(props);\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classPrefix + \"-button-item-name\"\n  }, props.cancelText)))))));\n};\nexport function showActionSheet(props) {\n  var Wrapper = /*#__PURE__*/forwardRef(function (_, ref) {\n    var _useState = useState(false),\n        visible = _useState[0],\n        setVisible = _useState[1];\n\n    useEffect(function () {\n      setVisible(true);\n    }, []);\n\n    function handleClose() {\n      var _a;\n\n      (_a = props.onClose) === null || _a === void 0 ? void 0 : _a.call(props);\n      setVisible(false);\n    }\n\n    useImperativeHandle(ref, function () {\n      return {\n        close: handleClose\n      };\n    });\n    return /*#__PURE__*/React.createElement(ActionSheet, Object.assign({}, props, {\n      visible: visible,\n      onClose: handleClose,\n      afterClose: function afterClose() {\n        var _a;\n\n        (_a = props.afterClose) === null || _a === void 0 ? void 0 : _a.call(props);\n        unmount();\n      }\n    }));\n  });\n  var ref = /*#__PURE__*/createRef();\n  var unmount = renderToBody( /*#__PURE__*/React.createElement(Wrapper, {\n    ref: ref\n  }));\n  return {\n    close: function close() {\n      var _a;\n\n      (_a = ref.current) === null || _a === void 0 ? void 0 : _a.close();\n    }\n  };\n}","map":{"version":3,"sources":["/Users/brandonliu/Project/goairmart/antd-demo/node_modules/antd-mobile/es/components/action-sheet/action-sheet.js"],"names":["React","createRef","forwardRef","useEffect","useImperativeHandle","useState","withNativeProps","mergeProps","classNames","Popup","Button","renderToBody","classPrefix","defaultProps","visible","actions","cancelText","closeOnAction","closeOnMaskClick","ActionSheet","p","props","createElement","onMaskClick","_a","_b","call","onClose","afterClose","className","getContainer","extra","map","action","index","_classNames","key","block","fill","disabled","onClick","_c","onAction","danger","text","description","showActionSheet","Wrapper","_","ref","_useState","setVisible","handleClose","close","Object","assign","unmount","current"],"mappings":"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","sourcesContent":["import React, { createRef, forwardRef, useEffect, useImperativeHandle, useState } from 'react';\nimport { withNativeProps } from '../../utils/native-props';\nimport { mergeProps } from '../../utils/with-default-props';\nimport classNames from 'classnames';\nimport Popup from '../popup';\nimport Button from '../button';\nimport { renderToBody } from '../../utils/render-to-body';\nvar classPrefix = \"adm-action-sheet\";\nvar defaultProps = {\n  visible: false,\n  actions: [],\n  cancelText: '',\n  closeOnAction: false,\n  closeOnMaskClick: true\n};\nexport var ActionSheet = function ActionSheet(p) {\n  var props = mergeProps(defaultProps, p);\n  return /*#__PURE__*/React.createElement(Popup, {\n    visible: props.visible,\n    onMaskClick: function onMaskClick() {\n      var _a, _b;\n\n      (_a = props.onMaskClick) === null || _a === void 0 ? void 0 : _a.call(props);\n\n      if (props.closeOnMaskClick) {\n        (_b = props.onClose) === null || _b === void 0 ? void 0 : _b.call(props);\n      }\n    },\n    afterClose: props.afterClose,\n    className: classPrefix + \"-popup\",\n    getContainer: props.getContainer\n  }, withNativeProps(props, /*#__PURE__*/React.createElement(\"div\", {\n    className: classPrefix\n  }, props.extra && /*#__PURE__*/React.createElement(\"div\", {\n    className: classPrefix + \"-extra\"\n  }, props.extra), /*#__PURE__*/React.createElement(\"div\", {\n    className: classPrefix + \"-button-list\"\n  }, props.actions.map(function (action, index) {\n    var _classNames;\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      key: action.key,\n      className: classPrefix + \"-button-item-wrapper\"\n    }, /*#__PURE__*/React.createElement(Button, {\n      block: true,\n      fill: 'none',\n      disabled: action.disabled,\n      onClick: function onClick() {\n        var _a, _b, _c;\n\n        (_a = action.onClick) === null || _a === void 0 ? void 0 : _a.call(action);\n        (_b = props.onAction) === null || _b === void 0 ? void 0 : _b.call(props, action, index);\n\n        if (props.closeOnAction) {\n          (_c = props.onClose) === null || _c === void 0 ? void 0 : _c.call(props);\n        }\n      },\n      className: classNames(classPrefix + \"-button-item\", (_classNames = {}, _classNames[classPrefix + \"-button-item-danger\"] = action.danger, _classNames))\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: classPrefix + \"-button-item-name\"\n    }, action.text), action.description && /*#__PURE__*/React.createElement(\"div\", {\n      className: classPrefix + \"-button-item-description\"\n    }, action.description)));\n  })), props.cancelText && /*#__PURE__*/React.createElement(\"div\", {\n    className: classPrefix + \"-cancel\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classPrefix + \"-button-item-wrapper\"\n  }, /*#__PURE__*/React.createElement(Button, {\n    block: true,\n    fill: 'none',\n    className: classPrefix + \"-button-item\",\n    onClick: function onClick() {\n      var _a;\n\n      (_a = props.onClose) === null || _a === void 0 ? void 0 : _a.call(props);\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classPrefix + \"-button-item-name\"\n  }, props.cancelText)))))));\n};\nexport function showActionSheet(props) {\n  var Wrapper = /*#__PURE__*/forwardRef(function (_, ref) {\n    var _useState = useState(false),\n        visible = _useState[0],\n        setVisible = _useState[1];\n\n    useEffect(function () {\n      setVisible(true);\n    }, []);\n\n    function handleClose() {\n      var _a;\n\n      (_a = props.onClose) === null || _a === void 0 ? void 0 : _a.call(props);\n      setVisible(false);\n    }\n\n    useImperativeHandle(ref, function () {\n      return {\n        close: handleClose\n      };\n    });\n    return /*#__PURE__*/React.createElement(ActionSheet, Object.assign({}, props, {\n      visible: visible,\n      onClose: handleClose,\n      afterClose: function afterClose() {\n        var _a;\n\n        (_a = props.afterClose) === null || _a === void 0 ? void 0 : _a.call(props);\n        unmount();\n      }\n    }));\n  });\n  var ref = /*#__PURE__*/createRef();\n  var unmount = renderToBody( /*#__PURE__*/React.createElement(Wrapper, {\n    ref: ref\n  }));\n  return {\n    close: function close() {\n      var _a;\n\n      (_a = ref.current) === null || _a === void 0 ? void 0 : _a.close();\n    }\n  };\n}"]},"metadata":{},"sourceType":"module"}